{"version":3,"sources":["utils/dataSchema/LocalDropEventData.js","schema.js","utils/dataSchema/PeerMessageData.js","utils/message.js","utils/peerMessage.js","utils/commonUtil.js","utils/messagePacket.js","utils/peerConnection.js","utils/downloadManager.js","utils/localApi.js","redux/action.js","redux/actionType.js","utils/LocalDropEvent.js","utils/dataSchema/WebSocketData.js","utils/websocket.js","redux/reducer.js","constants/constant.js","redux/store.js","utils/window.js","constants/styleConstants.js","assets/github-logo.svg","components/HeaderComponent.js","components/ToggleSwitch.js","components/Message/PeerTabComponent.js","components/SharedStyle.js","components/MetaData/MetaDataComponent.js","components/Message/MessageItemComponent.js","components/Message/SystemMessageItemComponent.js","components/Message/MessageTableComponent.js","components/Message/MessageTableHeaderComponent.js","components/FooterComponent.js","utils/dataSchema/FingerprintedFile.js","components/Send/SendComponent.js","App.js","serviceWorker.js","index.js"],"names":["EventSendTextData","uuid","message","this","EventSendFilesData","size","fingerprint","EventDownloadFileData","EventConnectData","EventSendMessageData","EventErrorData","MESSAGE_TYPE","CLIENT_EVENT_TYPE","PEER_MESSAGE_TYPE","messageTextData","messageFileData","messageDownloadData","messageErrorData","createMessage","messageType","data","JSON","stringify","parseMessage","rawMessage","console","log","parse","Error","err","ERROR","createPeerMessage","parsePeerMessage","concatHeaderAndChunk","chunk","a","headerFingerprint","TextEncoder","encode","Blob","buffer","arrayBuffer","chunkWithHeader","getCurrentTime","now","Date","hours","getHours","slice","minutes","getMinutes","seconds","getSeconds","generateFingerPrint","arr","Uint8Array","crypto","getRandomValues","Array","from","x","toString","substr","join","createMessagePacket","source","destination","TEXT","type","time","progress","FILE","createPeerConnection","peerConnection","RTCPeerConnection","dataChannel","createDataChannel","negotiated","id","binaryType","onopen","event","handleDataChannelStatusChange","onclose","otherUUID","currentDownloadJob","forEach","writer","abort","writeSystemMessage","handleDataChannelClose","onmessage","handleDataChannelMessage","onerror","filename","lineno","colno","payload","undefined","onicecandidate","candidate","sendMessageToServer","ICE_CANDIDATE","fromUUID","getMyUUID","toUUID","ice","onconnectionstatechange","connectionState","writePeerChunk","messagePacket","addMessagePacket","DOWNLOAD","transferFileToPeer","createOffer","offer","setLocalDescription","localDescription","setRemoteOffer","setRemoteDescription","createAnswer","answer","setRemoteAnswer","initializePeerConnections","peerConnectionManager","peers","connectionArr","peerUUID","peerConnections","push","addMessageTypeEventListener","addEventListener","UUID","store","dispatch","updateMyUUID","updateUUID","PEERS","filteredPeers","filter","connection","addJoinedPeers","JOIN","LEAVE","close","peerList","deleteLeavedPeers","OFFER","timeStamp","ANSWER","addIceCandidate","events","eventType","callback","eventCallbacks","myUUID","length","peerMessage","readyState","send","addClientEventTypeEventListener","createPeerConnectionManager","LocalDropEvent","Object","keys","key","SOCKET_STATE","SOCKET_STATE_CODE","0","1","2","3","WEBSOCKET_CLOSE_EVENT_CODE","1000","name","description","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1012","1013","1014","1015","createWebSocketConnection","url","socket","WebSocket","PING","handleMessage","code","reason","wasClean","dispatchEvent","PONG","errorMessage","webSocketManager","websocketManager","state","createWebSocketManager","process","initialState","defaultSystemMessage","createdAt","combineReducers","localDropState","action","newState","peerSet","Set","newPeers","peer","has","messagePackets","indexOf","filesToTransfer","fingerprintedFiles","fingerprintedFile","file","messageProgresses","systemMessageMetaData","isSelected","isRead","systemMessages","systemMessage","createStore","rootReducer","StreamSaver","mitm","MAXIMUM_ACC_SIZE","chunkStore","transferStore","writeChunk","chunkArr","downloadWriter","arrayBuffers","write","accumulateChunk","parsePeerChunk","accArr","offset","available","getMessagePacket","fileSize","options","pathname","fileStream","createWriteStream","getWriter","window","_","byteLength","splice","index","findIndex","item","readFile","chunkSize","reader","readAsArrayBuffer","sendErrorToPeer","sendFilesToPeer","sendFileToPeer","addMessage","getState","getFileToTransfer","isDownloadInProgress","FileReader","target","result","transferFile","find","uInt8Array","TextDecoder","decode","parseChunkAndHeader","addSystemMessage","closeWebSocket","ColorThemes","MaterialThemeOceanic","MaterialThemePalenight","MaterialThemeDarker","Background","Foreground","Text","SelectionBackground","SelectionForeground","Buttons","SecondBackground","Disabled","Contrast","Active","Border","Highlight","Tree","Notifications","AccentColor","ExcludedFilesColor","CommentsColor","LinksColor","FunctionsColor","KeywordsColor","TagsColor","StringsColor","OperatorsColor","AttributesColor","NumbersColor","ParametersColor","MaterialThemeDeepOcean","ThemeOneLight","ThemeMonoKaiPro","MaterialThemeLighter","SolarizedLight","ThemeDracula","ThemeArcDark","ThemeOneDark","ThemeNightOwl","ThemeLightOwl","_extends","assign","i","arguments","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","d","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref","svgRef","title","props","y","width","height","viewBox","style","enableBackground","xmlSpace","ref","ForwardRef","forwardRef","Header","styled","div","theme","SecondText","HeaderComponent","onClickRepo","bind","open","className","onClick","Component","Switch","ToggleSwitch","onAnimationToggle","isSwitchOn","PeerTab","PeerList","SystemMessageTab","PeerTabButton","button","Peers","PeerTabComponent","onClickPeer","onClickSystemMessageTab","updatePeerUUID","connectToPeer","selectedPeerUUID","map","connect","messageCell","css","padding","rippleEffect","MetaData","OtherMetadata","ThemeColorButton","MyUUID","MetaDataComponent","onClickColorThemeButton","onChangeTheme","MessageItem","MessageCell","MessageInOutCell","isMyMessagePacket","MessageContentCellContainer","MessageContentCell","span","MessageButtonContainer","MessageButtonCell","MessageItemComponent","onDownloadOrCopy","requestDownloadFile","navigator","clipboard","writeText","then","startsWith","isStartWithHttp","href","rel","sizeString","toFixed","renderContent","renderButton","renderMessagePacket","SystemMessageItem","SystemMessageItemComponent","MessageTable","MessageItemContainer","MessageTableComponent","MessageTableHeader","HeaderItem","HeaderContentItem","HeaderDownloadSpace","MessageTableHeaderComponent","Footer","FooterComponent","onClickId","FingerprintedFile","Send","FileInput","input","SelectFileButton","SendPasteButton","SendButton","SendComponent","text","files","handleText","onSend","sendText","handleFiles","onClickFile","onPasteText","fileInputRef","textareaRef","addFiles","setState","value","sendTextToPeer","focus","click","readText","multiple","onChange","autoCorrect","autoCapitalize","spellCheck","placeholder","getPlaceholder","GlobalStyle","createGlobalStyle","LocalDropApp","Container","MobileSticky","App","STORAGE_COLOR_THEME_KEY","themeIndex","colorTheme","getStorageColorTheme","localStorage","getItem","setItem","nextKey","getNextKey","setStorageColorTheme","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister","catch","error"],"mappings":"sSAAMA,EACJ,cAAgC,IAAlBC,EAAiB,EAAjBA,KAAMC,EAAW,EAAXA,QAAW,oBAC7BC,KAAKF,KAAOA,EACZE,KAAKD,QAAUA,GAIbE,EACJ,cAAmD,IAArCH,EAAoC,EAApCA,KAAMC,EAA8B,EAA9BA,QAASG,EAAqB,EAArBA,KAAMC,EAAe,EAAfA,YAAe,oBAChDH,KAAKF,KAAOA,EACZE,KAAKD,QAAUA,EACfC,KAAKE,KAAOA,EACZF,KAAKG,YAAcA,GAIjBC,EACJ,cAAoC,IAAtBN,EAAqB,EAArBA,KAAMK,EAAe,EAAfA,YAAe,oBACjCH,KAAKF,KAAOA,EACZE,KAAKG,YAAcA,GAIjBE,EACJ,cAAuB,IAATP,EAAQ,EAARA,KAAQ,oBACpBE,KAAKF,KAAOA,GAIVQ,EACJ,cAA0B,IAAZP,EAAW,EAAXA,QAAW,oBACvBC,KAAKD,QAAUA,GAIbQ,EACJ,cAAgC,IAAlBT,EAAiB,EAAjBA,KAAMC,EAAW,EAAXA,QAAW,oBAC7BC,KAAKF,KAAOA,EACZE,KAAKD,QAAUA,GC9BNS,EAAe,CAC1B,KAAQ,OACR,MAAS,QACT,KAAQ,OACR,MAAS,QACT,MAAS,QACT,OAAU,SACV,KAAQ,OACR,KAAQ,OACR,MAAS,QACT,cAAiB,iBA+DNC,EACA,UADAA,EAEE,YAFFA,EAGG,aAHHA,EAIM,gBAJNA,EAKE,YALFA,EAOK,eAPLA,EAQF,QAREA,EASF,QAYEC,EAAoB,CAC/B,KAAQ,OACR,KAAQ,OACR,MAAS,QACT,SAAY,YC1GRC,GD6Ic,eACf,gBAAkB,CACjB,eAAkB,oBAClB,YAAe,mBC/InB,cAA6C,IAA/BZ,EAA8B,EAA9BA,QAASG,EAAqB,EAArBA,KAAMC,EAAe,EAAfA,YAAe,oBAC1CH,KAAKD,QAAUA,EACfC,KAAKE,KAAOA,EACZF,KAAKG,YAAcA,IAIjBS,EACJ,cAA6C,IAA/BT,EAA8B,EAA9BA,YAAaJ,EAAiB,EAAjBA,QAASG,EAAQ,EAARA,KAAQ,oBAC1CF,KAAKG,YAAcA,EACnBH,KAAKD,QAAUA,EACfC,KAAKE,KAAOA,GAIVW,EACJ,cAA8B,IAAhBV,EAAe,EAAfA,YAAe,oBAC3BH,KAAKG,YAAcA,GAIjBW,EACJ,cAA0B,IAAZf,EAAW,EAAXA,QAAW,oBACvBC,KAAKD,QAAUA,GCtBnB,SAASgB,EAAcC,EAAaC,GAClC,IAAMlB,EAAU,CACdiB,cACAC,QAGF,OAAOC,KAAKC,UAAUpB,GAGxB,SAASqB,EAAaC,GAqBpB,OApBAC,QAAQC,IAAI,iBAAkBF,GACP,SAACA,GACtB,IACE,IAAMtB,EAAUmB,KAAKM,MAAMH,GAE3B,KAAMtB,EAAO,eAAmBS,GAC9B,MAAM,IAAIiB,MAAJ,mDAAsD1B,EAAO,cAGrE,OAAOA,EACP,MAAM2B,GACN,MAAO,CACLV,YAAaR,EAAamB,MAC1BV,KAAM,CACJ,QAAWS,EAAI3B,WAbA,CAiBpBsB,GCxBL,SAASO,EAAkBZ,EAAaC,GACtC,IAAMlB,EAAU,CACdiB,cACAC,QAGF,OAAOC,KAAKC,UAAUpB,GAGxB,SAAS8B,EAAiBR,GAqBxB,OApBAC,QAAQC,IAAI,qBAAsBF,GACX,SAACA,GACtB,IACE,IAAMtB,EAAUmB,KAAKM,MAAMH,GAE3B,KAAMtB,EAAO,eAAmBW,GAC9B,MAAM,IAAIe,MAAJ,uDAA0D1B,EAAO,cAGzE,OAAOA,EACP,MAAM2B,GACN,MAAO,CACLV,YAAaN,EAAkBiB,MAC/BV,KAAM,CACJ,QAAWS,EAAI3B,WAbA,CAiBpBsB,G,SAKUS,E,gFAAf,WAAoC3B,EAAa4B,GAAjD,iBAAAC,EAAA,6DACQC,EAAoB,IAAIC,YAAY,SAASC,OAAOhC,GAE1DmB,QAAQC,IAAI,0BAA2BpB,GACvCmB,QAAQC,IAAI,wBAAyBU,GAJvC,SAMiC,IAAIG,KAAK,CAACH,EAAkBI,OAAQN,IAASO,cAN9E,cAMQC,EANR,yBAQSA,GART,4C,sBCzBA,SAASC,IACP,IAAMC,EAAM,IAAIC,KAEVC,EAAQ,WAAKF,EAAIG,YAAcC,OAAO,GACtCC,EAAU,WAAKL,EAAIM,cAAgBF,OAAO,GAC1CG,EAAU,WAAKP,EAAIQ,cAAgBJ,OAAO,GAEhD,MAAM,GAAN,OAAWF,EAAX,YAAsBG,EAAtB,YAAmCE,GAGrC,SAASE,IACP,IAAMC,EAAM,IAAIC,WAAW,IAK3B,OAJAC,OAAOC,gBAAgBH,GAIhB,kBAFWI,MAAMC,KAAKL,GAAK,SAAAM,GAAC,OAAK,IAAMA,EAAEC,SAAS,KAAKC,QAAQ,MAElCC,KAAK,IC3B3C,SAASC,EAAT,GAEI,IADFC,EACC,EADDA,OAAQC,EACP,EADOA,YAAa/C,EACpB,EADoBA,YAAaC,EACjC,EADiCA,KAElC,OAAID,IAAgBN,EAAkBsD,KAE7B,CACLF,SACAC,cACAE,KAAMjD,EACNC,OACAiD,KAAM1B,IACN2B,SAAU,KAIVnD,IAAgBN,EAAkB0D,KAC7B,CACLN,SACAC,cACAE,KAAMjD,EACNC,OACAiD,KAAM1B,IACN2B,SAAU,GAIVnD,IAAgBN,EAAkBiB,MAC7B,CACLmC,SACAC,cACAE,KAAMjD,EACNC,OACAiD,KAAM1B,IACN2B,SAAU,UAPd,ECFF,SAASE,EAAqBvE,GAC5B,IAAMwE,EAAiB,IAAIC,kBAGrBC,EAAcF,EAAeG,kBAAkB,uBAAwB,CAC3EC,YAAY,EACZC,GAAI,IAuEN,OApEAH,EAAYI,WAAa,cACzBJ,EAAYK,OAAS,SAACC,GACpBC,EAA8BD,EAAOhF,IAGvC0E,EAAYQ,QAAU,SAACF,GACrBC,EAA8BD,EAAOhF,GCgKzC,SAAgCmF,GAC1BC,GAAmBD,KACrBC,GAAmBD,GAAWE,SAAQ,YAAgB,EAAbC,OAChCC,QAEPC,GAAmB,kBAAD,OAAoBL,EAApB,uBAGbC,GAAmBD,ICjI5BM,CFrCoBzF,IAGpB0E,EAAYgB,UAAY,SAACV,I,sCAEvBW,CAAyBX,EAAOhF,IAGlC0E,EAAYkB,QAAU,SAACZ,GAAW,IACxB/E,EAAqC+E,EAArC/E,QAAS4F,EAA4Bb,EAA5Ba,SAAUC,EAAkBd,EAAlBc,OAAQC,EAAUf,EAAVe,MAC7BC,EAAU5E,KAAKC,UAAU,CAAEpB,UAAS4F,WAAUC,SAAQC,cAASE,EAAW,GAGhFT,GADsB,gBAASxF,EAAT,0BAAwCgG,IAIhExB,EAAe0B,eAAiB,SAAAlB,IAC9BxD,QAAQC,IAAR,gBAAqBzB,EAArB,gCAAyDgF,GAErDA,EAAMmB,YAQRC,GANgBnF,EAAcP,EAAa2F,cAAe,CACxDC,SAAUC,KACVC,OAAQxG,EACRyG,IAAKzB,EAAMmB,cAUjB3B,EAAekC,wBAA0B,SAAA1B,GAIvC,OAHAxD,QAAQC,IAAR,gBAAqBzB,EAArB,yCAAkEgF,GAClExD,QAAQC,IAAR,gBAAqBzB,EAArB,yCAAkEwE,EAAemC,iBAE1EnC,EAAemC,iBACpB,IAAK,aAGL,IAAK,YAGL,IAAK,eACH,MACF,IAAK,SACHnB,GAAmB,kDACnB,MACF,IAAK,SAEHA,GAAmB,kDACnB,MACF,QACEA,GAAmB,4DAA8DhB,EAAemC,mBAK/F,CAAEnC,iBAAgBE,e,4CAG3B,WAAwCM,EAAOhF,GAA/C,yBAAAkC,EAAA,yDAC4B,kBAAf8C,EAAM7D,KADnB,uBAEUqB,EAAcwC,EAAM7D,KAF9B,SAIUyF,GAAepE,EAAaxC,GAJtC,2CASQC,EAAU8B,EAAiBiD,EAAM7D,MAEvCK,QAAQC,IAAR,gBAAqBzB,EAArB,4CAAqEC,GAE7DiB,EAAsBjB,EAAtBiB,YAAaC,EAASlB,EAATkB,KAEjBD,IAAgBN,EAAkBsD,KAfxC,wBAgBU2C,EAAgB9C,EAAoB,CACxCC,OAAQhE,EACRiE,YAAasC,KACbpF,OACAD,gBAGFM,QAAQC,IAAI,gDAAiDoF,GAC7DC,GAAiBD,GAxBrB,8BA6BM3F,IAAgBN,EAAkB0D,KA7BxC,wBA8BUuC,EAAgB9C,EAAoB,CACxCC,OAAQhE,EACRiE,YAAasC,KACbpF,OACAD,gBAGFM,QAAQC,IAAI,gDAAiDoF,GAC7DC,GAAiBD,GAtCrB,8BA2CM3F,IAAgBN,EAAkBmG,SA3CxC,wBA8CIC,GAFwB7F,EAAhBd,YAEwBL,GA9CpC,8BAkDMkB,IAAgBN,EAAkBiB,MAlDxC,wBAqDI2D,GAFoBrE,EAAZlB,SAnDZ,gE,sBA0DA,SAASgF,EAA8BD,EAAOhF,IAC5CwB,QAAQC,IAAR,gBAAqBzB,EAArB,+CAAwEgF,GAItD,UAHUA,EAApBb,OAKNqB,GADmB,iBAAaxF,EAAb,2B,SAMRiH,E,8EAAf,WAA2BzC,GAA3B,eAAAtC,EAAA,sEACsBsC,EAAeyC,cADrC,cACQC,EADR,gBAEQ1C,EAAe2C,oBAAoBD,GAF3C,gCAIS1C,EAAe4C,kBAJxB,4C,+BAOeC,E,mFAAf,WAA8B7C,EAAgB0C,GAA9C,SAAAhF,EAAA,6DACEV,QAAQC,IAAI,mBADd,SAEQ+C,EAAe8C,qBAAqBJ,GAF5C,OAIE1F,QAAQC,IAAI+C,GAJd,4C,+BAQe+C,G,iFAAf,WAA4B/C,GAA5B,eAAAtC,EAAA,sEACuBsC,EAAe+C,eADtC,cACQC,EADR,OAEEhG,QAAQC,IAAI,2BAA4B+F,GAF1C,SAIQhD,EAAe2C,oBAAoBK,GAJ3C,gCAMShD,EAAe4C,kBANxB,4C,+BASeK,G,mFAAf,WAA+BjD,EAAgBgD,GAA/C,SAAAtF,EAAA,sEACQsC,EAAe8C,qBAAqBE,GAD5C,4C,sBAIA,SAASE,GAA0BC,EAAuBC,GACxD,IAD+D,EACzDC,EAAgB,GADyC,cAGxCD,GAHwC,IAG/D,2BAA8B,CAAC,IAApBE,EAAmB,QAC5B,IAAKH,EAAsBI,gBAAgBD,GAAW,OAEZvD,EAAqBuD,GAArDtD,EAF4C,EAE5CA,eAAgBE,EAF4B,EAE5BA,YAExBmD,EAAcG,KAAK,CAAEhI,KAAM8H,EAAUtD,iBAAgBE,kBARM,8BAY/D,OAAOmD,EAiLT,SAASI,GAA4BN,GACnCA,EAAsBO,iBAAiBxH,EAAayH,MAAM,SAAAnD,GAAU,IAC1DhF,EAASgF,EAAThF,KAER2H,EAAsB3H,KAAOA,EExRjC,SAAoBA,GAClBoI,GAAMC,SC3FoB,SAAArI,GAAI,MAAK,CACnCmE,KC1B4B,iBD2B5B6B,QAAShG,GDyFMsI,CAAatI,IFwR1BuI,CAAWvI,MAGb2H,EAAsBO,iBAAiBxH,EAAa8H,OAAO,SAAAxD,GAAU,IAAD,EAE5DyD,EADYzD,EAAV4C,MACoBc,QAAO,SAAAZ,GAAQ,OAAIA,IAAaH,EAAsB3H,QAE5E6H,EAAgBH,GAA0BC,EAAuBc,GAJL,cAMzCZ,GANyC,IAMlE,2BAAwC,CAAC,IAA9Bc,EAA6B,QAC9B3I,EAAsC2I,EAAtC3I,KAAMwE,EAAgCmE,EAAhCnE,eAAgBE,EAAgBiE,EAAhBjE,YAE9BiD,EAAsBI,gBAAgB/H,GAAQ,CAAEwE,iBAAgBE,gBATA,8BAalEkE,GAAeH,MAGjBd,EAAsBO,iBAAiBxH,EAAamI,MAAM,SAAA7D,GAAU,IAAD,EAE3DyD,EADYzD,EAAV4C,MACoBc,QAAO,SAAAZ,GAAQ,OAAIA,IAAaH,EAAsB3H,QAE5E6H,EAAgBH,GAA0BC,EAAuBc,GAJN,cAMxCZ,GANwC,IAMjE,2BAAwC,CAAC,IAA9Bc,EAA6B,QAC9B3I,EAAsC2I,EAAtC3I,KAAMwE,EAAgCmE,EAAhCnE,eAAgBE,EAAgBiE,EAAhBjE,YAE9BiD,EAAsBI,gBAAgB/H,GAAQ,CAAEwE,iBAAgBE,gBATD,8BAajEkE,GAAeH,MAGjBd,EAAsBO,iBAAiBxH,EAAaoI,OAAO,SAAA9D,GAAU,IAAD,EAE5DyD,EADYzD,EAAV4C,MACoBc,QAAO,SAAAZ,GAAQ,OAAIA,IAAaH,EAAsB3H,QAFhB,cAK3CyI,GAL2C,IAKlE,2BAAsC,CAAC,IAA5BX,EAA2B,QACpC,GAAKH,EAAsBI,gBAAgBD,GAA3C,CADoC,MAKIH,EAAsBI,gBAAgBD,GAAtEtD,EAL4B,EAK5BA,eAAgBE,EALY,EAKZA,YAExBlD,QAAQC,IAAI,+DAAgEkG,EAAsBI,gBAAgBD,IAElHtD,EAAeuE,QACfrE,EAAYqE,eAELpB,EAAsBI,gBAAgBD,KAjBmB,+BEpUtE,SAA2BF,GACzBQ,GAAMC,UC7FkBW,ED6FEpB,EC7FW,CACrCzD,KClByB,cDmBzB6B,QAASgD,KAFe,IAAAA,EHobtBC,CAAkBR,MAGpBd,EAAsBO,iBAAiBxH,EAAawI,MAApD,uCAA2D,WAAOlE,GAAP,uBAAA9C,EAAA,yDACjDoE,EAAuCtB,EAAvCsB,SAAUE,EAA6BxB,EAA7BwB,OAAQU,EAAqBlC,EAArBkC,MAAqBlC,EAAdmE,UAEjC3H,QAAQC,IAAI,qDAAsDkG,EAAsBI,gBAAgBzB,IAInGqB,EAAsBI,gBAAgBzB,GAPc,uBAQvD9E,QAAQC,IAAI,mEAAoEkG,GARzB,iCAYjDnD,EAAmBmD,EAAsBI,gBAAgBzB,GAAzD9B,eAZiD,kBAejD6C,EAAe7C,EAAgB0C,GAfkB,wBAiBlCK,GAAa/C,GAjBqB,QAiBjDgD,EAjBiD,OAwBvDpB,GANgBnF,EAAcP,EAAa0I,OAAQ,CACjD9C,SAAUE,EACVA,OAAQF,EACRkB,YArBqD,kDA0BvDhC,GAAmBpE,KAAKC,UAAL,UAAoB4E,EAAW,IA1BK,0DAA3D,uDA8BA0B,EAAsBO,iBAAiBxH,EAAa0I,OAApD,uCAA4D,WAAOpE,GAAP,mBAAA9C,EAAA,yDAClDoE,EAAwCtB,EAAxCsB,SAAwCtB,EAA9BwB,OAAQgB,EAAsBxC,EAAtBwC,OAAsBxC,EAAdmE,UAE7BxB,EAAsBI,gBAAgBzB,GAHe,uBAIxD9E,QAAQC,IAAI,qEAJ4C,iCAQ1DD,QAAQC,IAAI,aAAc+F,GAElBhD,EAAmBmD,EAAsBI,gBAAgBzB,GAAzD9B,eAVkD,SAWpDiD,GAAgBjD,EAAgBgD,GAXoB,2CAA5D,uDAcAG,EAAsBO,iBAAiBxH,EAAamB,OAAO,SAAAmD,GAIzDQ,GADoBR,EAAZ/E,YAKV0H,EAAsBO,iBAAiBxH,EAAa2F,cAApD,uCAAmE,WAAOrB,GAAP,qBAAA9C,EAAA,yDACzDoE,EAA0BtB,EAA1BsB,SAA0BtB,EAAhBwB,OAAQC,EAAQzB,EAARyB,IAE1BjF,QAAQC,IAAI,2BAA4BuD,GAEnC2C,EAAsBI,gBAAgBzB,GALsB,uBAM/D9E,QAAQC,IAAI,2CANmD,mCAUzBkG,EAAsBI,gBAAgBzB,GAAtE9B,EAVyD,EAUzDA,eAVyD,EAUzCE,YAVyC,SAW3DF,EAAe6E,gBAAgB5C,GAX4B,2CAAnE,uDAiDF,IAAMkB,GAlCN,WACE,IAAMA,EAAwB,CAC5B3H,KAAM,KACN+H,gBAAiB,GACjBuB,OAAQ,GAGV3B,iBAAyC,SAAC4B,EAAWC,GAGnD7B,EAAsB2B,OAAOC,GAAa5B,EAAsB2B,OAAOC,IAAc,GACrF5B,EAAsB2B,OAAOC,GAAWvB,KAAKwB,IAG/C7B,cAAsC,SAAC3C,GACrC,IAAMuE,EAAYvE,EAAMb,KAClBsF,EAAiB9B,EAAsB2B,OAAOC,GAEpD,GAAKE,EAAL,CAJ+C,oBASxBA,GATwB,IAS/C,2BAAuC,EACrCD,EADqC,SAC5BxE,IAVoC,oCAK7CxD,QAAQC,IAAR,uDAA6D8H,MAYjE,OAHAtB,GAA4BN,GA3U9B,SAAyCA,GACvCA,EAAsBO,iBAAiBvH,EAAvC,uCAAkE,WAAOqE,GAAP,yBAAA9C,EAAA,yDAClDsE,EAAWxB,EAAjBhF,KAEJ2H,EAAsBI,gBAAgBvB,IAExChF,QAAQC,IAAR,kCAAuCd,EAAvC,mCAL8D,EASxBgH,EAAsBI,gBAAgBvB,IAAWjC,EAAqBiC,GAAtGhC,EATwD,EASxDA,eAAgBE,EATwC,EASxCA,YACxBiD,EAAsBI,gBAAgBvB,GAAU,CAAEhC,iBAAgBE,eAG3B,cAAnCF,EAAemC,gBAb6C,uBAc9DnF,QAAQC,IAAR,kCAAuCd,EAAvC,uCAd8D,0CAmBxD+I,EAAS/B,EAAsB3H,KAnByB,UAoB1CiH,EAAYzC,GApB8B,QAoBxD0C,EApBwD,OAyB9Dd,GAJgBnF,EAAcP,EAAawI,MAAO,CAChD5C,SAAUoD,EAAQlD,SAAQU,WAtBkC,kDA2B9D1B,GAAmBpE,KAAKC,UAAL,UAAsB4E,EAAW,IA3BU,0DAAlE,uDA+BA0B,EAAsBO,iBAAiBvH,GAA6B,SAAAqE,GAAS,IACnEhF,EAAkBgF,EAAlBhF,KAAMC,EAAY+E,EAAZ/E,QAEd,GAAK0H,EAAsBI,gBAAgB/H,GAA3C,CAH0E,IAQlE0E,EAAgBiD,EAAsBI,gBAAgB/H,GAAtD0E,YACFvD,EAAO,IAAIN,EAAgB,CAC/BZ,UACAG,KAAMH,EAAQ0J,OACdtJ,YAAa+C,MAGTwG,EAAc9H,EAAkBlB,EAAkBsD,KAAM/C,GAO9D,GALAK,QAAQC,IAAI,2CAA4CmI,GAExDpI,QAAQC,IAAI,kBAAmBiD,GAC/BlD,QAAQC,IAAI,6BAA8BiD,EAAYmF,YAEvB,SAA3BnF,EAAYmF,WAGd,OAFArE,GAAmB,8DACnBhE,QAAQC,IAAI,kDAIdiD,EAAYoF,KAAKF,GASjB9C,GAPsB/C,EAAoB,CACxCC,OAAQuC,KACRtC,YAAajE,EACbmB,OACAD,YAAaN,EAAkBsD,aA9B/BsB,GAAmB,uBAAD,OAAyBxF,OAoC/C2H,EAAsBO,iBAAiBvH,GAA8B,SAAAqE,GAAU,IACrEhF,EAAqCgF,EAArChF,KAAMC,EAA+B+E,EAA/B/E,QAASG,EAAsB4E,EAAtB5E,KAAMC,EAAgB2E,EAAhB3E,YAE7B,GAAKsH,EAAsBI,gBAAgB/H,GAA3C,CAH4E,IAQpE0E,EAAgBiD,EAAsBI,gBAAgB/H,GAAtD0E,YACFvD,EAAO,IAAIL,EAAgB,CAAET,cAAaD,OAAMH,YAEhD2J,EAAc9H,EAAkBlB,EAAkB0D,KAAMnD,GAO9D,GALAK,QAAQC,IAAI,4CAA6CmI,GAEzDpI,QAAQC,IAAI,kBAAmBiD,GAC/BlD,QAAQC,IAAI,6BAA8BiD,EAAYmF,YAEvB,SAA3BnF,EAAYmF,WAGd,OAFArE,GAAmB,8DACnBhE,QAAQC,IAAI,kDAIdiD,EAAYoF,KAAKF,GASjB9C,GAPsB/C,EAAoB,CACxCC,OAAQuC,KACRtC,YAAajE,EACbmB,OACAD,YAAaN,EAAkB0D,aA1B/BkB,GAAmB,uBAAD,OAAyBxF,OAgC/C2H,EAAsBO,iBAAiBvH,GAAiC,SAAAqE,GAAU,IACxEhF,EAAsBgF,EAAtBhF,KAAMK,EAAgB2E,EAAhB3E,YAEd,GAAKsH,EAAsBI,gBAAgB/H,GAA3C,CAH+E,IAQvE0E,EAAgBiD,EAAsBI,gBAAgB/H,GAAtD0E,YACFvD,EAAO,IAAIJ,EAAoB,CAAEV,gBAEjCuJ,EAAc9H,EAAkBlB,EAAkBmG,SAAU5F,GAOlE,GALAK,QAAQC,IAAI,+CAAgDmI,GAE5DpI,QAAQC,IAAI,kBAAmBiD,GAC/BlD,QAAQC,IAAI,6BAA8BiD,EAAYmF,YAEvB,SAA3BnF,EAAYmF,WAKd,OAJArE,GACE,uBAAiB7E,EAAjB,+DAC8B+D,EAAYmF,kBAC5CrI,QAAQC,IAAI,2BAIdiD,EAAYoF,KAAKF,QAtBfpE,GAAmB,uBAAD,OAAyBxF,OA0B/C2H,EAAsBO,iBAAiBvH,GAAyB,SAAAqE,GAAS,IAC/DhF,EAAkBgF,EAAlBhF,KAAMC,EAAY+E,EAAZ/E,QAEd,GAAK0H,EAAsBI,gBAAgB/H,GAA3C,CAHsE,IAQ9D0E,EAAgBiD,EAAsBI,gBAAgB/H,GAAtD0E,YACFvD,EAAO,IAAIH,EAAiB,CAAEf,YAE9B2J,EAAc9H,EAAkBlB,EAAkBiB,MAAOV,GAO/D,GALAK,QAAQC,IAAI,uCAAwCmI,GAEpDpI,QAAQC,IAAI,kBAAmBiD,GAC/BlD,QAAQC,IAAI,6BAA8BiD,EAAYmF,YAEvB,SAA3BnF,EAAYmF,WAId,OAHArE,GAAmB,gBAAD,OACC7E,EADD,mCAElBa,QAAQC,IAAI,2BAIdiD,EAAYoF,KAAKF,QArBfpE,GAAmB,uBAAD,OAAyBxF,OAyB/C2H,EAAsBO,iBAAiBvH,GAA6B,SAAAqE,GACjDA,EAAThF,QAoKV+J,CAAgCpC,GAEzBA,EAGqBqC,GKjiBfC,GAZb,WAAYV,EAAWpI,GAGrB,GAH4B,oBAC5BjB,KAAKiE,KAAOoF,EAERpI,EACF,cAAkB+I,OAAOC,KAAKhJ,GAA9B,eAAqC,CAAhC,IAAMiJ,EAAG,KACZlK,KAAKkK,GAAOjJ,EAAKiJ,KCNnBC,GAEE,EAKFC,GAAoB,CACxBC,EAAG,aACHC,EAAG,OACHC,EAAG,UACHC,EAAG,UAKCC,GAA6B,CACjCC,IAAM,CACJC,KAAM,iBACNC,YAAa,oGAEfC,KAAM,CACJF,KAAM,aACNC,YAAa,sJAEfE,KAAM,CACJH,KAAM,iBACNC,YAAa,uEAEfG,KAAM,CACJJ,KAAM,mBACNC,YAAa,8JAEfI,KAAM,CACJL,KAAM,WACNC,YAAa,uDAEfK,KAAM,CACJN,KAAM,qBACNC,YAAa,uFAEfM,KAAM,CACJP,KAAM,mBACNC,YAAa,gJAEfO,KAAM,CACJR,KAAM,6BACNC,YAAa,4JAEfQ,KAAM,CACJT,KAAM,mBACNC,YAAa,qLAEfS,KAAM,CACJV,KAAM,kBACNC,YAAa,mGAEfU,KAAM,CACJX,KAAM,oBACNC,YAAa,sIAEfW,KAAM,CACJZ,KAAM,iBACNC,YAAa,0IAEfY,KAAM,CACJb,KAAM,kBACNC,YAAa,sEAEfa,KAAM,CACJd,KAAM,kBACNC,YAAa,wIAEfc,KAAM,CACJf,KAAM,cACNC,YAAa,mJAEfe,KAAM,CACJhB,KAAM,gBACNC,YAAa,qJCnEjB,SAASgB,GAA0BC,GACjC,IAAMC,EAAS,IAAIC,UAAUF,GAgD7B,OA9CAC,EAAO9D,iBAAiB,OAAxB,uCAAgC,WAAgBlD,GAAhB,eAAA9C,EAAA,sDACxBjC,EAAUgB,EAAcP,EAAawL,KAAM,CAAEjM,QAAS,wBAC5D+L,EAAOlC,KAAK7J,GAFkB,2CAAhC,uDAKA+L,EAAO9D,iBAAiB,UAAxB,uCAAmC,WAAgB3G,GAAhB,SAAAW,EAAA,sDACjCV,QAAQC,IAAI,mCAAoCF,GAChDC,QAAQC,IAAI,yBAA0BF,EAAWJ,MAKjDgL,GAHgB7K,EAAaC,EAAWJ,MAGjB6K,GAPU,2CAAnC,uDAUAA,EAAO9D,iBAAiB,SAAS,SAAClD,GAAU,IAElCoH,EAA2BpH,EAA3BoH,KACFpG,EAAU,CACduD,UAAW,QACX6C,OACAC,OAJiCrH,EAArBqH,OAKZC,SALiCtH,EAAbsH,UAQtB,GAAI3B,GAA2ByB,GAAO,CAAC,IAAD,EACNzB,GAA2ByB,GAAjDvB,EAD4B,EAC5BA,KAAMC,EADsB,EACtBA,YACd9E,EAAQ6E,KAAOA,EACf7E,EAAQ8E,YAAcA,EAIxBtF,GADsB,gCAAkCpE,KAAKC,UAAU2E,OAASC,EAAW,OAI7F+F,EAAO9D,iBAAiB,SAAS,SAAClD,GAChCxD,QAAQC,IAAI,6BAA8BuD,GAE1C,IAAMgB,EAAU,CACduD,UAAW,QACXvE,SAGFQ,GAAmB,oBAAsBpE,KAAKC,UAAU2E,OAASC,EAAW,OAGvE+F,E,SAGMG,G,mFAAf,WAA6BlM,EAAS+L,GAAtC,+CAAA9J,EAAA,yDACUhB,EAAsBjB,EAAtBiB,YAAaC,EAASlB,EAATkB,KAErBK,QAAQC,IAAI,iCAAkCP,GAC9CM,QAAQC,IAAI,0BAA2BN,GAEnCD,IAAgBR,EAAayH,KANnC,uBAOYnI,EAASmB,EAATnB,KAEFgF,EAAQ,IAAIiF,GAAe/I,EAAa,CAAElB,SAChD2H,GAAsB4E,cAAcvH,GAVxC,6BAeM9D,IAAgBR,EAAa8H,MAfnC,wBAgBYZ,EAAUzG,EAAVyG,MAEF5C,EAAQ,IAAIiF,GAAe/I,EAAa,CAAE0G,UAChDD,GAAsB4E,cAAcvH,GAnBxC,8BAwBM9D,IAAgBR,EAAamI,KAxBnC,wBAyBYjB,EAAUzG,EAAVyG,MAEF5C,EAAQ,IAAIiF,GAAe/I,EAAa,CAAE0G,UAChDD,GAAsB4E,cAAcvH,GA5BxC,8BAiCM9D,IAAgBR,EAAaoI,MAjCnC,wBAkCYlB,EAAUzG,EAAVyG,MAEF5C,EAAQ,IAAIiF,GAAe/I,EAAa,CAAE0G,UAChDD,GAAsB4E,cAAcvH,GArCxC,8BA2CM9D,IAAgBR,EAAawI,MA3CnC,wBA4CUlE,EAAQ,IAAIiF,GAAe/I,EAAaC,GAC9CwG,GAAsB4E,cAAcvH,GA7CxC,8BAkDM9D,IAAgBR,EAAa0I,OAlDnC,wBAmDUpE,EAAQ,IAAIiF,GAAe/I,EAAaC,GAC9CwG,GAAsB4E,cAAcvH,GApDxC,8BAyDM9D,IAAgBR,EAAawL,KAzDnC,wBA0DUjM,EAAUgB,EAAcC,EAAa,CAAEjB,QAAS,yBAEtD+L,EAAOlC,KAAK7J,GA5DhB,8BAiEMiB,IAAgBR,EAAa8L,KAjEnC,wBAkEYvM,EAAYkB,EAAZlB,QAERuB,QAAQC,IAAR,8BAAoCxB,IApExC,8BAyEMiB,IAAgBR,EAAamB,MAzEnC,wBA2EU4K,EAAetL,EAAI,QAEnB6D,EAAQ,IAAIiF,GAAe/I,EAAa,CAC5CjB,QAASwM,IAEX9E,GAAsB4E,cAAcvH,GAhFxC,8BAqFM9D,IAAgBR,EAAa2F,cArFnC,wBAsFUrB,EAAQ,IAAIiF,GAAe/I,EAAaC,GAE9CwG,GAAsB4E,cAAcvH,GAxFxC,gE,sBAyJA,IA3D2C0H,GA4DrCC,GAhDN,SAAgCZ,GAC9B,IAAMW,EAAmB,CACvBV,OAAQF,GAA0BC,GAClCa,MAAO,GACPtD,OAAQ,GAGVoD,iBAAoC,SAACnD,EAAWC,GAC9CkD,EAAiBpD,OAAOC,GAAamD,EAAiBpD,OAAOC,IAAc,GAC3EmD,EAAiBpD,OAAOC,GAAWvB,KAAKwB,IAG1CkD,cAAiC,SAAC1H,GAChC,IAAMuE,EAAYvE,EAAMb,KAClBsF,EAAiBiD,EAAiBpD,OAAOC,GAE/C,GAAKE,EAAL,CAJ0C,oBASnBA,GATmB,IAS1C,2BAAuC,EACrCD,EADqC,SAC5BxE,IAV+B,oCAKxCxD,QAAQC,IAAR,kDAAuD8H,KAS3DmD,KAAwB,SAACzM,GACvB,IAAM+L,EAASU,EAAiBV,OAE5BA,EAAOnC,aAAeQ,IAIxB7E,GADG,mCAAqC8E,GAAkB0B,EAAOnC,aAKnE6C,EAAiBV,OAAOlC,KAAK7J,IAG/ByM,MAAyB,WACvBA,EAAiBV,OAAOjD,UAG1B,OAAO2D,EAIgBG,CADbC,2BA3D+BJ,GA6DTC,IA5DfzE,iBAAiBvH,GAAgC,SAAAqE,GAAU,IAClE/E,EAAY+E,EAAZ/E,QAERyM,GAAiB5C,KAAK7J,MAGxByM,GAAiBxE,iBAAiBvH,GAAyB,SAAAqE,GACzD0H,GAAiB3D,WAuDN4D,U,2BC9MTI,GAAe,CAAEnF,MAAO,GAAI3H,QAAS,IAgI3C,IAAM+M,GAAuB,CAC3B/M,QAAQ,gBAAD,OC7I4B6M,SD6I5B,6CACPzM,YAAa+C,IACb6J,UAAWvK,KAeEwK,oBAAgB,CAC7BC,eAjJF,WAAuD,IAA/BP,EAA8B,uDAAtBG,GAAcK,EAAQ,uCAIpD,GAHA5L,QAAQC,IAAI,8BAA+BmL,GAC3CpL,QAAQC,IAAI,aAAc2L,GJnBJ,aIqBlBA,EAAOjJ,KAAmB,CAE5B,IAAMkJ,EAAQ,gBAAQT,GAChBhF,EAAQwF,EAAOpH,QAMrB,OAJAxE,QAAQC,IAAI,eACZ4L,EAASzF,MAAT,uBAAqByF,EAASzF,OAA9B,aAAwCA,IACxCpG,QAAQC,IAAI,gBAAiB4L,GAEtBA,EACF,GJ9BkB,gBI8BdD,EAAOjJ,KAAsB,CAEtC,IAAMkJ,EAAQ,gBAAQT,GAChBU,EAAU,IAAIC,IAAIH,EAAOpH,SAE/BxE,QAAQC,IAAI,cAAe6L,GAE3B,IAAME,EAAWH,EAASzF,MAAMc,QAAO,SAAA+E,GAAI,OAAKH,EAAQI,IAAID,MAI5D,OAHAjM,QAAQC,IAAI,eAAgB+L,GAC5BH,EAASzF,MAAQ4F,EAEVH,EAGT,OAAOT,GAsHPe,eAnHF,WAA6C,IAArBf,EAAoB,uDAAZ,GAAIQ,EAAQ,uCAC1C,GJ/CyB,gBI+CrBA,EAAOjJ,KAAsB,CAC/B,IAAMlE,EAAUmN,EAAOpH,QACjBqH,EAAQ,uBAAQT,GAAR,CAAe3M,IAE7B,OAAOoN,EAGT,OAAOT,GA4GPlD,OA1FF,WAAuC,IAAvBkD,EAAsB,uDAAd,KAAMQ,EAAQ,uCACpC,GJxE4B,mBIwExBA,EAAOjJ,KAAyB,CAClC,IAAMkJ,EAAWD,EAAOpH,QAExB,OAAOqH,EAGT,OAAOT,GAoFP9E,SAjFF,WAAyC,IAAvB8E,EAAsB,uDAAd,KAAMQ,EAAQ,uCACtC,GJjF8B,qBIiF1BA,EAAOjJ,KAA2B,CACpC,IAAMkJ,EAAWD,EAAOpH,QAExB,OAAOqH,EAGT,GJ1FyB,gBI0FrBD,EAAOjJ,KAAsB,CAC/B,IAAMyD,EAAQwF,EAAOpH,QAErB,IAA8B,IAA1B4B,EAAMgG,QAAQhB,GAChB,OAAO,KAIX,OAAOA,GAmEPiB,gBAhEF,WAA8C,IAArBjB,EAAoB,uDAAZ,GAAIQ,EAAQ,uCAC3C,GJlGuB,cIkGnBA,EAAOjJ,KAAoB,CAC7B,IAAM2J,EAAqBV,EAAOpH,QAE5BqH,EAAQ,gBAAQT,GAQtB,OANAkB,EAAmBzI,SAAQ,SAAC0I,GAAuB,IACzCC,EAAsBD,EAAtBC,KAAM3N,EAAgB0N,EAAhB1N,YAEdgN,EAAShN,GAAe2N,KAGnBX,EAGT,OAAOT,GAkDPqB,kBA5GF,WAAgD,IAArBrB,EAAoB,uDAAZ,GAAIQ,EAAQ,uCAC7C,GJrD6B,oBIqDzBA,EAAOjJ,KAA0B,CACnC,IAAMkJ,EAAQ,gBAAQT,GADa,EAEDQ,EAAOpH,QAAjC3F,EAF2B,EAE3BA,YAAagE,EAFc,EAEdA,SAMrB,OAJIgJ,EAAShN,KACXgN,EAAShN,GAAegE,GAGnBgJ,EAGT,OAAOT,GAiGPsB,sBAhDF,WACwD,IAAtDtB,EAAqD,uDAA7C,CAAEuB,YAAY,EAAOC,QAAQ,GAAQhB,EAAQ,uCAErD,GJnH+C,sCImH3CA,EAAOjJ,KAA4C,CACrD,IAAMkJ,EAAQ,gBAAQT,GAKtB,OAHAS,EAASc,YAAcd,EAASc,WAChCd,EAASe,SAASf,EAASc,YAAoBd,EAASe,OAEjDf,EAGT,GJ3HgC,uBI2H5BD,EAAOjJ,KAA6B,CACtC,IAAMkJ,EAAQ,gBAAQT,GAGtB,OAFAS,EAASe,SAASf,EAASc,WAEpBd,EAGT,OAAOT,GA8BPyB,eApBF,WAAiE,IAAzCzB,EAAwC,uDAAhC,CAACI,IAAuBI,EAAQ,uCAC9D,GJ7IgC,uBI6I5BA,EAAOjJ,KAA6B,CACtC,IAAMmK,EAAgBlB,EAAOpH,QACvBqH,EAAQ,CAAKiB,GAAL,oBAAuB1B,IAErC,OAAOS,EAGT,OAAOT,KE1JM2B,gBAAYC,I,oBTO3BC,KAAYC,KAAZ,UAAuB5B,gEAAvB,4BAEA,IAGI6B,GAHmB,GAMjBC,GAAa,GASbxJ,GAAqB,GAOrByJ,GAAgB,G,SAGPC,G,mFAAf,WAA0BC,EAAUC,GAApC,mBAAA9M,EAAA,6DACQ+M,EADR,aAC2BF,GAD3B,SAG6B,IAAIzM,KAAK2M,GAAezM,cAHrD,OAGQA,EAHR,OAIQD,EAAS,IAAIe,WAAWd,GAE9BwM,EAAeE,MAAM3M,GANvB,4C,+BAWe4M,G,mFAAf,WAA+B1M,EAAiBzC,GAAhD,6CAAAkC,EAAA,2DAGMkN,GAAe3M,GADjBpC,EAFJ,EAEIA,YAAa4B,EAFjB,EAEiBA,MAGf2M,GAAWvO,GAAeuO,GAAWvO,IAAgB,CACnDgP,OAAQ,GACRL,eAAgB,KAChBM,OAAQ,EACRlP,KAAM,EACNmP,WAAW,GAGRX,GAAWvO,GAAa2O,eAb/B,iBAcUnI,EAAgB2I,GAAiBnP,GAEjCwF,EAAYgB,GAAiBA,EAAc1F,KAAKlB,SAAY,0BAC5DwP,EAAY5I,GAAiBA,EAAc1F,KAAKf,MAAS,EACzDsP,EAAU,CAAEC,SAAUtP,EAAaD,KAAMqP,GAE/Cb,GAAWvO,GAAaD,KAAOqP,EACzBG,EAAanB,KAAYoB,kBAAkBhK,EAAU6J,GAErDpK,EAASsK,EAAWE,YAE1BC,OAAO7H,iBAAiB,UAAU,SAAC8H,GACjC1K,EAAOC,WAITH,GAAmBpF,GAAQoF,GAAmBpF,IAAS,GACvDoF,GAAmBpF,GAAnB,CAA4B,CAAEsF,SAAQjF,gBAAtC,oBAAwD+E,GAAmBpF,KAG3E4O,GAAWvO,GAAa2O,eAAiB1J,EACnCyJ,EAAWH,GAAWvO,GAAagP,OAEzCT,GAAWvO,GAAaiP,QAAUrN,EAAMgO,WACxClB,EAAS/G,KAAK/F,GAtClB,2BAwCU8M,EAAWH,GAAWvO,GAAagP,OACnCL,EAAiBJ,GAAWvO,GAAa2O,eAE/CJ,GAAWvO,GAAaiP,QAAUrN,EAAMgO,WACxClB,EAAS/G,KAAK/F,KAEV8M,EAASpF,QAAUgF,IAAoBC,GAAWvO,GAAakP,WA9CvE,wBA+CMX,GAAWvO,GAAakP,WAAY,EAM9BN,EArDZ,aAqD+BF,GACzBH,GAAWvO,GAAagP,OAAOa,OAAO,EAAGvB,IAtD/C,UAwDYG,GAAWG,EAAcD,GAxDrC,QAyDMJ,GAAWvO,GAAakP,WAAY,EA7FnB,KA+FbZ,KACFA,GA/FiB,KAmCzB,aAkEMC,GAAWvO,GAAaiP,QAAUV,GAAWvO,GAAaD,MAlEhE,wBAmEU2O,EAAWH,GAAWvO,GAAagP,OACnCL,EAAiBJ,GAAWvO,GAAa2O,eApEnD,UAsEUF,GAAW,aAAIC,GAAWC,GAtEpC,QAuEIJ,GAAWvO,GAAagP,OAAS,GAEjCL,EAAejG,QAGX3D,GAAmBpF,MAKN,KAJTmQ,EAAQ/K,GAAmBpF,GAAMoQ,WAAU,SAACC,GAChD,OAAOA,EAAKhQ,cAAgBA,OAI5B+E,GAAmBpF,GAAMkQ,OAAOC,EAAO,GAGD,IAApC/K,GAAmBpF,GAAM2J,eACpBvE,GAAmBpF,GAG5BwB,QAAQC,IAAI,yBAA0B2D,YAGjCwJ,GAAWvO,GA5FtB,6C,sBAgGA,SAASiQ,GAAStC,EAAMsB,EAAQiB,EAAWC,EAAQnQ,EAAaL,GAC9D,GAAIsP,EAAStB,EAAK5N,KAWhB,OAVIyO,GAAcxO,KAChBwO,GAAcxO,IAAe,GAG/BmB,QAAQC,IAAI,aAAc6N,GAC1B9N,QAAQC,IAAI,gBAAiBuM,EAAK5N,WAGlCoF,GADa,4BAAyBxF,EAAzB,yBAAgDgO,EAAKnD,OAMpE,IAAM5I,EAAQ+L,EAAKjL,MAAMuM,EAAQA,EAASiB,GAC1CC,EAAOC,kBAAkBxO,GC1G3B,SAASyO,GAAgB1Q,EAAMC,GAC7B,IAAM+E,EAAQ,IAAIiF,GAChBtJ,EACA,IAAIF,EAAe,CAAET,OAAMC,aAE7B0H,GAAsB4E,cAAcvH,GAGtC,SAAS2L,GAAgB3Q,EAAM8N,GAC7BA,EAAmBzI,SAAQ,SAAC0I,IA1B9B,SAAwB/N,EAAM+N,GAAoB,IACxCC,EAAsBD,EAAtBC,KAAM3N,EAAgB0N,EAAhB1N,YAEdmB,QAAQC,IAAI,0BAA2BuM,GAEvC,IAAMhJ,EAAQ,IAAIiF,GAChBtJ,EACA,IAAIR,EAAmB,CACrBH,OACAC,QAAS+N,EAAKnD,KACdzK,KAAM4N,EAAK5N,KACXC,iBAGJsH,GAAsB4E,cAAcvH,GAalC4L,CAAe5Q,EAAM+N,MA4BzB,SAAS3H,GAAoBnG,GAC3B,IAAM+E,EAAQ,IAAIiF,GAChBtJ,EACA,IAAIH,EAAqB,CAAEP,aAE7B0M,GAAiBJ,cAAcvH,GASjC,SAAS4D,GAAehB,GACtBQ,GAAMC,SC9F4B,CAClClE,KCdsB,WDetB6B,QD4FuB4B,IAOzB,SAASd,GAAiB7G,GACxBmI,GAAMC,SC5FkB,SAAApI,GAAO,MAAK,CACpCkE,KCtByB,cDuBzB6B,QAAS/F,GD0FM4Q,CAAW5Q,IAW5B,SAASsG,KACP,OAAO6B,GAAM0I,WAAWpH,OAS1B,SAAS1C,GAAmB3G,EAAaL,GACvC,IAAMgO,EAPR,SAA2B3N,GAGzB,OAFwB+H,GAAM0I,WAAWjD,gBAElBxN,GAIV0Q,CAAkB1Q,GAE/B,GAAK2N,EAML,GAAKrG,GAAsBI,gBAAgB/H,GAA3C,CAT6C,IAiBrC0E,EAAgBiD,GAAsBI,gBAAgB/H,GAAtD0E,YAER,GDQF,SAA8BrE,GAC5B,OAAOwO,GAAcxO,KAAgB,ECTjC2Q,CAAqB3Q,GAAzB,CAAwC,IAEhC2F,EAAU,CACd3F,cACA2N,KAAM,CAAEnD,KAHmBmD,EAArBnD,KAGQzK,KAHa4N,EAAf5N,KAGQ+D,KAHO6J,EAAT7J,OAMpBuM,GAAgB1Q,EADA,iBAAWuG,KAAX,+BAAuDnF,KAAKC,UAAU2E,OAASC,EAAW,SDM9G,SAAsB5F,EAAa2N,EAAMtJ,EAAa1E,GACpD6O,GAAcxO,IAAe,EAE7B,IAAMmQ,EAAS,IAAIS,WAEf3B,EAAS,EAEb9N,QAAQC,IAAI,gBAHM,OAIlBD,QAAQC,IAAI,gBAAiBuM,EAAK5N,MAElCkQ,GAAStC,EAAMsB,EANG,MAMgBkB,EAAQnQ,EAAaL,GAEvDwQ,EAAOtI,iBAAiB,OAAxB,uCAAgC,WAAOlD,GAAP,iBAAA9C,EAAA,6DAC9BV,QAAQC,IAAI,0BAA2BuD,EAAMkM,OAAOC,QACpD3P,QAAQC,IAAI,wCAAyCuD,EAAMkM,OAAOC,QAE5DlP,EAAQ+C,EAAMkM,OAAOC,OAC3B3P,QAAQC,IAAI,YAAaQ,GALK,SAOAD,EAAqB3B,EAAa4B,GAPlC,UAOxBQ,EAPwB,OAQ9BjB,QAAQC,IAAI,sBAAuBgB,GACnCjB,QAAQC,IAAI,iCAAkCgB,EAAgBwN,YAE/B,YAA3BvL,EAAYmF,YAAuD,WAA3BnF,EAAYmF,WAX1B,mDAe9BnF,EAAYoF,KAAKrH,GAIjB6N,GAAStC,EAHTsB,GAxBgB,YA2BkBkB,EAAQnQ,EAAaL,GAnBzB,4CAAhC,uDCdEoR,CAAa/Q,EAAa2N,EAAMtJ,EAAa1E,OApB/C,CAIEwF,GADE,WAAKxF,EAAL,6CAAwDoB,KAAKC,UAAU,CAAEhB,cAAa2N,aAAQ/H,EAAW,SAP3GyK,GAAgB1Q,EADH,iBAAcuG,KAAd,cAAiClG,EAAjC,2BA6BjB,SAASmP,GAAiBnP,GASxB,OANsB+H,GAAM0I,WAAWnD,eAAe0D,MAAK,SAACxK,GAG1D,OAFiBA,EAAT1F,KAEId,cAAgBA,KAMhC,SAAS+O,GAAe3M,GACtB,OLpIF,SAA6BA,GAC3B,IAAM6O,EAAa,IAAIhO,WAAWb,GAMlC,MAAO,CACLpC,aANkB,IAAIkR,aAAcC,OAAOF,EAAWvO,MAAM,EYnDhC,KZ0D5Bd,MAJAqP,EAAWvO,MYtDiB,GZsDWuO,EAAWrB,YAAY1N,QK+HzDkP,CAAoBhP,G,SAGdmE,G,mFAAf,WAA8BnE,EAAiBzC,GAA/C,SAAAkC,EAAA,sEACQiN,GAAgB1M,EAAiBzC,GADzC,4C,sBAIA,SAASwF,GAAmBvF,GAC1B,IAAMqO,EAAgB,CACpBrO,UACAI,YAAa+C,IACb6J,UAAWvK,KAGb0F,GAAMC,SC3IwB,SAACiG,GAAD,MAAoB,CAClDnK,KCjDgC,qBDkDhC6B,QAASsI,GDyIMoD,CAAiBpD,ISlMlCyB,OAAO7H,iBAAiB,gBAAgB,SAAClD,GACvCxD,QAAQC,IAAI,gBTiGd,WACE,IAAMuD,EAAQ,IAAIiF,GAAetJ,GAEjCgM,GAAiBJ,cAAcvH,GSnG/B2M,MCJK,IAsdMC,GAAc,CACzBC,qBAhdkC,CAClC,WAAc,UACd,WAAc,UACd,KAAQ,UACR,oBAAuB,UACvB,oBAAuB,UACvB,QAAW,UACX,iBAAoB,UACpB,SAAY,UACZ,SAAY,UACZ,OAAU,UACV,OAAU,UACV,UAAa,UACb,KAAQ,UACR,cAAiB,UACjB,YAAe,UACf,mBAAsB,UACtB,cAAiB,UACjB,WAAc,UACd,eAAkB,UAClB,cAAiB,UACjB,UAAa,UACb,aAAgB,UAChB,eAAkB,UAClB,gBAAmB,UACnB,aAAgB,UAChB,gBAAmB,UAGnB,WAAc,UACd,mBAAsB,WAmbtBC,uBAhboC,CACpC,WAAc,UACd,WAAc,UACd,KAAQ,UACR,oBAAuB,UACvB,oBAAuB,UACvB,QAAW,UACX,iBAAoB,UACpB,SAAY,UACZ,SAAY,UACZ,OAAU,UACV,OAAU,UACV,UAAa,UACb,KAAQ,UACR,cAAiB,UACjB,YAAe,UACf,mBAAsB,UACtB,cAAiB,UACjB,WAAc,UACd,eAAkB,UAClB,cAAiB,UACjB,UAAa,UACb,aAAgB,UAChB,eAAkB,UAClB,gBAAmB,UACnB,aAAgB,UAChB,gBAAmB,UAGnB,WAAc,UACd,mBAAsB,WAmZtBC,oBA/WiC,CACjCC,WAAY,UACZC,WAAY,UACZC,KAAM,UACNC,oBAAqB,UACrBC,oBAAqB,UACrBC,QAAS,UACTC,iBAAkB,UAClBC,SAAU,UACVC,SAAU,UACVC,OAAQ,UACRC,OAAQ,UACRC,UAAW,UACXC,KAAM,UACNC,cAAe,UACfC,YAAa,UACbC,mBAAoB,UACpBC,cAAe,UACfC,WAAY,UACZC,eAAgB,UAChBC,cAAe,UACfC,UAAW,UACXC,aAAc,UACdC,eAAgB,UAChBC,gBAAiB,UACjBC,aAAc,UACdC,gBAAiB,UAGjB,WAAc,UACd,mBAAsB,WAkVtBC,uBA/UoC,CACpC1B,WAAY,UACZC,WAAY,UACZC,KAAM,UACNC,oBAAqB,UACrBC,oBAAqB,UACrBC,QAAS,UACTC,iBAAkB,UAClBC,SAAU,UACVC,SAAU,UACVC,OAAQ,UACRC,OAAQ,UACRC,UAAW,UACXC,KAAM,UACNC,cAAe,UACfC,YAAa,UACbC,mBAAoB,UACpBC,cAAe,UACfC,WAAY,UACZC,eAAgB,UAChBC,cAAe,UACfC,UAAW,UACXC,aAAc,UACdC,eAAgB,UAChBC,gBAAiB,UACjBC,aAAc,UACdC,gBAAiB,UAGjB,WAAc,UACd,mBAAsB,WAkTtBE,cA7O2B,CAC3B3B,WAAY,UACZC,WAAY,UACZC,KAAM,UACNC,oBAAqB,UACrBC,oBAAqB,UACrBC,QAAS,UACTC,iBAAkB,UAClBC,SAAU,UACVC,SAAU,UACVC,OAAQ,UACRC,OAAQ,UACRC,UAAW,UACXC,KAAM,UACNC,cAAe,UACfC,YAAa,UACbC,mBAAoB,UACpBC,cAAe,UACfC,WAAY,UACZC,eAAgB,UAChBC,cAAe,UACfC,UAAW,UACXC,aAAc,UACdC,eAAgB,UAChBC,gBAAiB,UACjBC,aAAc,UACdC,gBAAiB,UAGjB,WAAc,UACd,mBAAsB,WAgNtBG,gBAhT6B,CAC7B5B,WAAY,UACZC,WAAY,UACZC,KAAM,UACNC,oBAAqB,UACrBC,oBAAqB,UACrBC,QAAS,UACTC,iBAAkB,UAClBC,SAAU,UACVC,SAAU,UACVC,OAAQ,UACRC,OAAQ,UACRC,UAAW,UACXC,KAAM,UACNC,cAAe,UACfC,YAAa,UACbC,mBAAoB,UACpBC,cAAe,UACfC,WAAY,UACZC,eAAgB,UAChBC,cAAe,UACfC,UAAW,UACXC,aAAc,UACdC,eAAgB,UAChBC,gBAAiB,UACjBC,aAAc,UACdC,gBAAiB,UAGjB,WAAc,UACd,mBAAsB,WAmRtBI,qBAhRkC,CAClC7B,WAAY,UACZC,WAAY,UACZC,KAAM,UACNC,oBAAqB,UACrBC,oBAAqB,UACrBC,QAAS,UACTC,iBAAkB,UAClBC,SAAU,UACVC,SAAU,UACVC,OAAQ,UACRC,OAAQ,UACRC,UAAW,UACXC,KAAM,UACNC,cAAe,UACfC,YAAa,UACbC,mBAAoB,UACpBC,cAAe,UACfC,WAAY,UACZC,eAAgB,UAChBC,cAAe,UACfC,UAAW,UACXC,aAAc,UACdC,eAAgB,UAChBC,gBAAiB,UACjBC,aAAc,UACdC,gBAAiB,UAGjB,WAAc,UACd,mBAAsB,WAmPtBK,eA/M4B,CAC5B9B,WAAY,UACZC,WAAY,UACZC,KAAM,UACNC,oBAAqB,UACrBC,oBAAqB,UACrBC,QAAS,UACTC,iBAAkB,UAClBC,SAAU,UACVC,SAAU,UACVC,OAAQ,UACRC,OAAQ,UACRC,UAAW,UACXC,KAAM,UACNC,cAAe,UACfC,YAAa,UACbC,mBAAoB,UACpBC,cAAe,UACfC,WAAY,UACZC,eAAgB,UAChBC,cAAe,UACfC,UAAW,UACXC,aAAc,UACdC,eAAgB,UAChBC,gBAAiB,UACjBC,aAAc,UACdC,gBAAiB,UAGjB,WAAc,UACd,mBAAsB,WAkLtBM,aA/K0B,CAC1B/B,WAAY,UACZC,WAAY,UACZC,KAAM,UACNC,oBAAqB,UACrBC,oBAAqB,UACrBC,QAAS,UACTC,iBAAkB,UAClBC,SAAU,UACVC,SAAU,UACVC,OAAQ,UACRC,OAAQ,UACRC,UAAW,UACXC,KAAM,UACNC,cAAe,UACfC,YAAa,UACbC,mBAAoB,UACpBC,cAAe,UACfC,WAAY,UACZC,eAAgB,UAChBC,cAAe,UACfC,UAAW,UACXC,aAAc,UACdC,eAAgB,UAChBC,gBAAiB,UACjBC,aAAc,UACdC,gBAAiB,UAGjB,WAAc,UACd,mBAAsB,WAkJtBO,aA/I0B,CAC1BhC,WAAY,UACZC,WAAY,UACZC,KAAM,UACNC,oBAAqB,UACrBC,oBAAqB,UACrBC,QAAS,UACTC,iBAAkB,UAClBC,SAAU,UACVC,SAAU,UACVC,OAAQ,UACRC,OAAQ,UACRC,UAAW,UACXC,KAAM,UACNC,cAAe,UACfC,YAAa,UACbC,mBAAoB,UACpBC,cAAe,UACfC,WAAY,UACZC,eAAgB,UAChBC,cAAe,UACfC,UAAW,UACXC,aAAc,UACdC,eAAgB,UAChBC,gBAAiB,UACjBC,aAAc,UACdC,gBAAiB,UAGjB,WAAc,UACd,mBAAsB,WAkHtBQ,aA/G0B,CAC1BjC,WAAY,UACZC,WAAY,UACZC,KAAM,UACNC,oBAAqB,UACrBC,oBAAqB,UACrBC,QAAS,UACTC,iBAAkB,UAClBC,SAAU,UACVC,SAAU,UACVC,OAAQ,UACRC,OAAQ,UACRC,UAAW,UACXC,KAAM,UACNC,cAAe,UACfC,YAAa,UACbC,mBAAoB,UACpBC,cAAe,UACfC,WAAY,UACZC,eAAgB,UAChBC,cAAe,UACfC,UAAW,UACXC,aAAc,UACdC,eAAgB,UAChBC,gBAAiB,UACjBC,aAAc,UACdC,gBAAiB,UAGjB,WAAc,UACd,mBAAsB,WAkFtBS,cA/E2B,CAC3BlC,WAAY,UACZC,WAAY,UACZC,KAAM,UACNC,oBAAqB,YACrBC,oBAAqB,UACrBC,QAAS,UACTC,iBAAkB,UAClBC,SAAU,UACVC,SAAU,UACVC,OAAQ,UACRC,OAAQ,UACRC,UAAW,UACXC,KAAM,UACNC,cAAe,UACfC,YAAa,UACbC,mBAAoB,UACpBC,cAAe,UACfC,WAAY,UACZC,eAAgB,UAChBC,cAAe,UACfC,UAAW,UACXC,aAAc,UACdC,eAAgB,UAChBC,gBAAiB,UACjBC,aAAc,UACdC,gBAAiB,UAGjB,WAAc,UACd,mBAAsB,WAkDtBU,cA/C2B,CAC3BnC,WAAY,UACZC,WAAY,UACZC,KAAM,UACNC,oBAAqB,UACrBC,oBAAqB,UACrBC,QAAS,UACTC,iBAAkB,UAClBC,SAAU,UACVC,SAAU,UACVC,OAAQ,UACRC,OAAQ,UACRC,UAAW,UACXC,KAAM,UACNC,cAAe,UACfC,YAAa,UACbC,mBAAoB,UACpBC,cAAe,UACfC,WAAY,UACZC,eAAgB,UAChBC,cAAe,UACfC,UAAW,UACXC,aAAc,UACdC,eAAgB,UAChBC,gBAAiB,UACjBC,aAAc,UACdC,gBAAiB,UAGjB,WAAc,UACd,mBAAsB,YCldxB,SAASW,KAA2Q,OAA9PA,GAAWlK,OAAOmK,QAAU,SAAUnD,GAAU,IAAK,IAAIoD,EAAI,EAAGA,EAAIC,UAAU5K,OAAQ2K,IAAK,CAAE,IAAItQ,EAASuQ,UAAUD,GAAI,IAAK,IAAIlK,KAAOpG,EAAckG,OAAOsK,UAAUC,eAAeC,KAAK1Q,EAAQoG,KAAQ8G,EAAO9G,GAAOpG,EAAOoG,IAAY,OAAO8G,IAA2ByD,MAAMzU,KAAMqU,WAEhT,SAASK,GAAyB5Q,EAAQ6Q,GAAY,GAAc,MAAV7Q,EAAgB,MAAO,GAAI,IAAkEoG,EAAKkK,EAAnEpD,EAEzF,SAAuClN,EAAQ6Q,GAAY,GAAc,MAAV7Q,EAAgB,MAAO,GAAI,IAA2DoG,EAAKkK,EAA5DpD,EAAS,GAAQ4D,EAAa5K,OAAOC,KAAKnG,GAAqB,IAAKsQ,EAAI,EAAGA,EAAIQ,EAAWnL,OAAQ2K,IAAOlK,EAAM0K,EAAWR,GAAQO,EAASjH,QAAQxD,IAAQ,IAAa8G,EAAO9G,GAAOpG,EAAOoG,IAAQ,OAAO8G,EAFxM6D,CAA8B/Q,EAAQ6Q,GAAuB,GAAI3K,OAAO8K,sBAAuB,CAAE,IAAIC,EAAmB/K,OAAO8K,sBAAsBhR,GAAS,IAAKsQ,EAAI,EAAGA,EAAIW,EAAiBtL,OAAQ2K,IAAOlK,EAAM6K,EAAiBX,GAAQO,EAASjH,QAAQxD,IAAQ,GAAkBF,OAAOsK,UAAUU,qBAAqBR,KAAK1Q,EAAQoG,KAAgB8G,EAAO9G,GAAOpG,EAAOoG,IAAU,OAAO8G,EAMne,IAAI,GAAqB,IAAMiE,cAAc,IAAK,KAAmB,IAAMA,cAAc,OAAQ,CAC/FC,EAAG,mpEAGD,GAAqB,IAAMD,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9C,GAAqB,IAAMA,cAAc,IAAK,MAE9CE,GAAqB,IAAMF,cAAc,IAAK,MAE9CG,GAAqB,IAAMH,cAAc,IAAK,MAE9CI,GAAqB,IAAMJ,cAAc,IAAK,MAE9CK,GAAsB,IAAML,cAAc,IAAK,MAE/CM,GAAsB,IAAMN,cAAc,IAAK,MAE/CO,GAAsB,IAAMP,cAAc,IAAK,MAE/CQ,GAAsB,IAAMR,cAAc,IAAK,MAE/CS,GAAsB,IAAMT,cAAc,IAAK,MAE/CU,GAAsB,IAAMV,cAAc,IAAK,MAE/CW,GAAsB,IAAMX,cAAc,IAAK,MAE/CY,GAAsB,IAAMZ,cAAc,IAAK,MAE/C,GAAgB,SAAuBa,GACzC,IAAIC,EAASD,EAAKC,OACdC,EAAQF,EAAKE,MACbC,EAAQvB,GAAyBoB,EAAM,CAAC,SAAU,UAEtD,OAAoB,IAAMb,cAAc,MAAOf,GAAS,CACtDvP,GAAI,SACJlB,EAAG,MACHyS,EAAG,MACHC,MAAO,YACPC,OAAQ,YACRC,QAAS,sBACTC,MAAO,CACLC,iBAAkB,2BAEpBC,SAAU,WACVC,IAAKV,GACJE,GAAQD,EAAqB,IAAMf,cAAc,QAAS,KAAMe,GAAS,KAAM,GAAO,GAAO,GAAO,GAAO,GAAOb,GAAOC,GAAOC,GAAOC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,KAGhMa,GAAa,IAAMC,YAAW,SAAUV,EAAOQ,GACjD,OAAoB,IAAMxB,cAAc,GAAef,GAAS,CAC9D6B,OAAQU,GACPR,OAEU,I,qiCC9Df,IAAMW,GAASC,IAAOC,IAAV,MAKK,SAAAb,GAAK,OAAIA,EAAMc,MAAMjF,cASxB,SAAAmE,GAAK,OAAIA,EAAMc,MAAM5D,gBAUrB,SAAA8C,GAAK,OAAIA,EAAMc,MAAM5D,gBAOpB,SAAA8C,GAAK,OAAIA,EAAMc,MAAMC,aF/BT,SEsFZC,G,kDA1Bb,WAAYhB,GAAQ,IAAD,8BACjB,cAAMA,IAEDiB,YAAc,EAAKA,YAAYC,KAAjB,gBAHF,E,0DAOjBtH,OAAOuH,KAAK,yCAA0C,Y,+BAItD,OACE,kBAACR,GAAD,CAAQS,UAAU,oBAChB,yBAAKA,UAAU,0BAAf,eAGA,yBAAKA,UAAU,0BAA0BC,QAAUtX,KAAKkX,aACtD,kBAAC,GAAD,MADF,kB,GAjBsBK,a,ohCC7D9B,IAAMC,GAASX,IAAOC,IAAV,MASa,SAAAb,GAAK,OAAIA,EAAMc,MAAM1E,YAGrB,SAAA4D,GAAK,OAAIA,EAAMc,MAAMvE,UAInB,SAAAyD,GAAK,OAAIA,EAAMc,MAAMxE,UAcnB,SAAA0D,GAAK,OAAIA,EAAMc,MAAMC,cAChC,SAAAf,GAAK,OAAIA,EAAMc,MAAMpE,iBAqBlB8E,G,kDACnB,WAAYxB,GAAQ,IAAD,8BACjB,cAAMA,IAEDyB,kBAAoB,EAAKA,kBAAkBP,KAAvB,gBAHR,E,iEASjBG,EAFoBtX,KAAKiW,MAAjBqB,a,+BAKA,IAAD,EACwBtX,KAAKiW,MAA5B0B,EADD,EACCA,WAAYzJ,EADb,EACaA,OAEpB,OACE,kBAACsJ,GAAD,KACE,yBAAKH,UAAS,qCAAmCM,EAAa,KAAO,OACnEL,QAAUtX,KAAK0X,mBACf,yBAAKL,UAAU,oBACb,yBAAKA,UAAS,iBAAcM,EAAa,KAAO,QAC5CzJ,EAAS,GAAK,Y,GAtBYqJ,a,8mDC/C1C,IAAMK,GAAUf,IAAOC,IAAV,MACI,SAAAb,GAAK,OAAIA,EAAMc,MAAM9E,uBAQhC4F,GAAWhB,IAAOC,IAAV,MAaRgB,GAAmBjB,IAAOC,IAAV,MAmBhBiB,IAVoBlB,IAAOC,IAAV,MAUDD,IAAOmB,OAAV,MAMf,SAAA/B,GAAK,OAAIA,EAAMhI,WACb,SAAAgI,GAAK,OAAIA,EAAMc,MAAM7E,qBACrB,SAAA+D,GAAK,OAAIA,EAAMc,MAAM1E,aACJ,SAAA4D,GAAK,OAAIA,EAAMc,MAAMvE,UAGhC,SAAAyD,GAAK,OAAIA,EAAMc,MAAMzE,WJxDN,UIsErB2F,GAAQpB,IAAOC,IAAV,MAOM,SAAAb,GAAK,OAAIA,EAAMc,MAAM3E,oBAEf,SAAA6D,GAAK,OAAIA,EAAMc,MAAMvE,UAEhC,SAAAyD,GAAK,OAAIA,EAAMc,MAAM/D,iBJjFN,SI2FrBkF,G,kDACJ,WAAYjC,GAAQ,IAAD,8BACjB,cAAMA,IAEDqB,QAAU,EAAKa,YAAYhB,KAAjB,gBACf,EAAKiB,wBAA0B,EAAKA,wBAAwBjB,KAA7B,gBAJd,E,wDAOPrX,GACVwB,QAAQC,IAAI,WAAYzB,GAExBE,KAAKiW,MAAM9N,Sb1Ee,SAAArI,GAAI,MAAK,CACrCmE,KC9B8B,mBD+B9B6B,QAAShG,GawEauY,CAAevY,IdvBvC,SAAuBA,GACrB,IAAMgF,EAAQ,IAAIiF,GAChBtJ,EACA,IAAIJ,EAAiB,CAAEP,UAEzB2H,GAAsB4E,cAAcvH,GcmBlCwT,CAAcxY,K,gDAIdE,KAAKiW,MAAM9N,Sb3DwC,CACrDlE,KC9C+C,wC,+BY2GrC,IAAD,SAKHjE,KAAKiW,MAHPvO,EAFK,EAELA,MACU6Q,EAHL,EAGL3Q,SACAoG,EAJK,EAILA,sBAMF,OAHA1M,QAAQC,IAAI,iBAAkBvB,KAAKiW,OACnC3U,QAAQC,IAAI,YAAamG,GAGvB,kBAAC,WAAD,KACE,kBAACkQ,GAAD,CAASP,UAAU,sBACjB,kBAACY,GAAD,iBAEE,EAMA,kBAACJ,GAAD,KAEInQ,GAASA,EAAM8Q,KAAI,SAAAjL,GACjB,OACE,kBAACwK,GAAD,CACE7N,IAAMqD,EACNU,WAAaV,IAASgL,EACtBjB,QAAU,EAAKa,YAAYhB,KAAK,EAAM5J,IAHxC,WAIQA,QAOlB,kBAACuK,GAAD,CAAkB5J,OAASF,EAAsBE,QAC/C,kBAAC,GAAD,CACEhE,IAAI,wBACJyN,WAAa3J,EAAsBC,WACnCC,OAASF,EAAsBE,OAC/BoJ,QAAUtX,KAAKoY,6BAInB,O,GAhEqBb,aAgFhBkB,iBALS,SAAA/L,GAAK,MAAK,CAChChF,MAAOgF,EAAMO,eAAevF,MAC5BE,SAAU8E,EAAM9E,SAChBoG,sBAAuBtB,EAAMsB,yBAEhByK,CAAyBP,I,y4BC1KjC,IAAMQ,GAAcC,YAAH,MAID,SAAA1C,GAAK,OAAIA,EAAMc,MAAMvE,UAE/B,SAAAyD,GAAK,OAAIA,EAAM2C,SAAW,YAG5B,SAAA3C,GAAK,OAAIA,EAAME,OLZK,OKahB,SAAAF,GAAK,OAAIA,EAAME,OLbC,OKchB,SAAAF,GAAK,OAAIA,EAAME,OLdC,OKgBlB0C,GAAeF,YAAH,MAON,SAAA1C,GAAK,OAAIA,EAAMc,MAAM5E,WACW,SAAA8D,GAAK,OAAIA,EAAMc,MAAMxE,UAK/C,SAAA0D,GAAK,OAAIA,EAAMc,MAAMzE,WL3BnB,S,6zBME3B,IAAMwG,GAAWjC,IAAOC,IAAV,MAMRiC,GAAgBlC,IAAOC,IAAV,MAMbkC,GAAmBnC,IAAOmB,OAAV,MAIC,SAAA/B,GAAK,OAAIA,EAAMc,MAAMvE,UAErB,SAAAyD,GAAK,OAAIA,EAAMc,MAAM5E,WAChC,SAAA8D,GAAK,OAAIA,EAAMc,MAAM1D,kBAE5BwF,IAGCI,GAASpC,IAAOC,IAAV,MAKA,SAAAb,GAAK,OAAIA,EAAMc,MAAM5D,gBACV,SAAA8C,GAAK,OAAIA,EAAMc,MAAM3E,oBAK9B,SAAA6D,GAAK,OAAIA,EAAMc,MAAMxD,kBNrCR,SM6CrB2F,G,kDACJ,WAAYjD,GAAQ,IAAD,8BACjB,cAAMA,IAEDkD,wBAA0B,EAAKA,wBAAwBhC,KAA7B,gBAHd,E,sEAOQ,IACjBiC,EAAkBpZ,KAAKiW,MAAvBmD,cAEJA,GACFA,M,+BAIM,IACA5P,EAAWxJ,KAAKiW,MAAhBzM,OAER,OACE,kBAACsP,GAAD,KACE,kBAACG,GAAD,KACE,0CADF,UAEQzP,EAAU,IAAKA,EAAU,KAEjC,kBAACuP,GAAD,KACE,kBAACC,GAAD,CAAkB1B,QAAUtX,KAAKmZ,yBAAjC,4B,GA1BsB5B,aAsCjBkB,iBAHS,SAAA/L,GAAK,MAAK,CAChClD,OAAQkD,EAAMlD,UAEDiP,CAAyBS,I,+xDC1ExC,IAAMG,GAAcxC,IAAOC,IAAV,MAKM,SAAAb,GAAK,OAAIA,EAAMc,MAAMzE,YAGhC,SAAA2D,GAAK,OAAIA,EAAMc,MAAM5D,ePjBN,SOyBrBmG,GAAczC,IAAOC,IAAV,KACZ4B,GP1BsB,SOoCrBa,GAAmB1C,YAAOyC,GAAPzC,CAAH,MACV,SAAAZ,GAAK,OACbA,EAAMuD,kBACJ,SAAAvD,GAAK,OAAIA,EAAMc,MAAMxD,iBACrB,SAAA0C,GAAK,OAAIA,EAAMc,MAAM3D,mBAIrBqG,GAA8B5C,IAAOC,IAAV,KAC5B4B,GP7CsB,SOsDF,SAAAzC,GAAK,OAAIA,EAAMc,MAAMvE,UAKxCkH,GAAqB7C,IAAO8C,KAAV,MAWV,SAAA1D,GAAK,OAAIA,EAAMc,MAAMhE,cAI7B6G,GAAyB/C,IAAOC,IAAV,KP1ED,SOmFF,SAAAb,GAAK,OAAIA,EAAMc,MAAMvE,UAKxCqH,GAAoBhD,IAAOmB,OAAV,MAQA,SAAA/B,GAAK,OAAIA,EAAMc,MAAM5E,WAChC,SAAA8D,GAAK,OAAIA,EAAMc,MAAM1D,mBACV,SAAA4C,GAAK,OAAIA,EAAMc,MAAMvE,SAGvCqG,IA0JUiB,G,kDAtJb,WAAY7D,GAAQ,IAAD,8BACjB,cAAMA,IAED8D,iBAAmB,EAAKA,iBAAiB5C,KAAtB,gBACxB,EAAKqC,kBAAoB,EAAKA,kBAAkBrC,KAAvB,gBAJR,E,+DAOC,IACVxQ,EAAkB3G,KAAKiW,MAAvBtP,cACA7C,EAAuB6C,EAAvB7C,OAAQG,EAAe0C,EAAf1C,KAAMhD,EAAS0F,EAAT1F,KAEtB,GAAIgD,IAASvD,EAAkBsD,KAY3BC,IAASvD,EAAkB0D,MjBjEnC,SAA6BtE,EAAMmB,GAAO,IAChCd,EAAgBc,EAAhBd,YAEF2E,EAAQ,IAAIiF,GAChBtJ,EACA,IAAIL,EAAsB,CACxBN,OAAMK,iBAGVsH,GAAsB4E,cAAcvH,GiB0DhCkV,CAAoBlW,EAAQ7C,OAd9B,CAAsC,IAC5BlB,EAAYkB,EAAZlB,QAERka,UAAUC,UAAUC,UAAUpa,GAASqa,MAAK,eAEzC,kB,wCAkBWtW,GAIhB,OAHAxC,QAAQC,IAAI,gCAAiCuC,GAC7CxC,QAAQC,IAAI,qCAAsC8E,MAE3CvC,IAAWuC,O,sCAGJtG,GACd,OAAOA,EAAQsa,WAAW,U,oCAGdrZ,EAAaC,GACzB,GAAID,IAAgBN,EAAkBsD,KACpC,OACE,kBAAC,WAAD,KACE,kBAACyV,GAAD,CAA6BtD,MP3JR,KO6JjBnW,KAAKsa,gBAAgBrZ,EAAKlB,SACxB,kBAAC2Z,GAAD,KACE,uBAAGa,KAAOtZ,EAAKlB,QAAUiR,OAAO,SAASwJ,IAAI,uBAA7C,UACQvZ,EAAKlB,WAGf,kBAAC2Z,GAAD,eAA0BzY,EAAKlB,WAGrC,kBAACuZ,GAAD,CAAaV,QAAU,KAAvB,UAAmC3X,EAAKf,QAK9C,GAAIc,IAAgBN,EAAkB0D,KAAM,CAC1C,IAAMqW,GrBhLWva,EqBgLiBe,EAAKf,OrB/K/B,KAAQA,EAAO,IACnB,GAAN,QAAYA,EAAO,KAAMwa,QAAQ,GAAjC,OAGExa,GAAQ,KAAeA,EAAO,IAC1B,GAAN,QAAYA,EAAI,KAAkBwa,QAAQ,GAA1C,OAGExa,GAAQ,IACJ,GAAN,QAAYA,EAAI,KAAyBwa,QAAQ,GAAjD,YADF,EqByKI,OACE,kBAAC,WAAD,KACE,kBAACjB,GAAD,CAA6BtD,MPhLR,KOiLnB,kBAACuD,GAAD,eAA0BzY,EAAKlB,WAEjC,kBAACuZ,GAAD,CAAaV,QAAU,KAAQ6B,IrBvLzC,IAAuBva,I,mCqB+LRc,EAAa8C,GACxB,OAAI9C,IAAgBN,EAAkBsD,KAElC,kBAAC6V,GAAD,CAAmBvC,QAAUtX,KAAK+Z,kBAAlC,QAMA/Y,IAAgBN,EAAkB0D,MAASpE,KAAKwZ,kBAAkB1V,QAAtE,EAEI,kBAAC+V,GAAD,CAAmBvC,QAAUtX,KAAK+Z,kBAAlC,c,0CAScpT,GAClB,GAAKA,EAAL,CADiC,IAM/B7C,EAME6C,EANF7C,OACAC,EAKE4C,EALF5C,YACAE,EAIE0C,EAJF1C,KACAhD,EAGE0F,EAHF1F,KACAiD,EAEEyC,EAFFzC,KAIIsV,GAFF7S,EADFxC,SAGwBnE,KAAKwZ,kBAAkB1V,IAEjD,OACE,kBAAC,WAAD,KACE,kBAACyV,GAAD,CACEpD,MPrOoB,GOqOKyC,QAAU,IACnCY,kBAAoBA,GAFtB,UAGQA,EAAoB,SAAM,WAElC,kBAACF,GAAD,CAAaV,QAAU,KAAvB,WAAoC9U,IACpC,kBAACwV,GAAD,CAAaV,QAAU,KAAvB,WAAoC7U,IACpC,kBAACuV,GAAD,CAAanD,MP1OQ,IO0OrB,UAA2ClS,IACzCjE,KAAK2a,cAAc1W,EAAMhD,GAC3B,kBAACqY,GAAD,CAAanD,MP5OQ,IO4OrB,UAA2CjS,KACzC,EACF,kBAAC0V,GAAD,KACI5Z,KAAK4a,aAAa3W,EAAMH,KAE1B,GACA,M,+BAKE,IACA6C,EAAkB3G,KAAKiW,MAAvBtP,cAER,OACE,kBAAC0S,GAAD,CAAahC,UAAU,0BACnBrX,KAAK6a,oBAAoBlU,Q,GAjJA4Q,a,2XC1GnC,IAAMuD,GAAoBjE,IAAOC,IAAV,MAIO,SAAAb,GAAK,OAAIA,EAAMc,MAAMzE,YAKrC,SAAA2D,GAAK,OAAIA,EAAMc,MAAM7D,aAQrB,SAAA+C,GAAK,OAAIA,EAAMc,MAAM5D,gBAKd4H,G,uKACT,IACA3M,EAAkBpO,KAAKiW,MAAvB7H,cAER,OACE,kBAAC0M,GAAD,KACE,oDAAqB1M,EAAcrB,UAAnC,MACA,6BACIqB,EAAcrO,c,GAR8BwX,a,mXClBxD,IAAMyD,GAAenE,IAAOC,IAAV,MAKZmE,GAAuBpE,IAAOC,IAAV,MACZ,SAAAb,GAAK,OAAIA,EAAMhI,WAAa,QAAU,UAGnC,SAAAgI,GAAK,OAAIA,EAAMc,MAAM3E,mBTXX,SSqBrB8I,G,uKACM,IAAD,EAKHlb,KAAKiW,MAHPxI,EAFK,EAELA,eACAU,EAHK,EAGLA,eACAH,EAJK,EAILA,sBAGF,OACE,kBAACgN,GAAD,CAAc3D,UAAU,2BAEpB,kBAAC4D,GAAD,CACE5D,UAAU,mCACVpJ,YAAcD,EAAsBC,YAElCR,EAAe+K,KAAI,SAAA7R,GAAkB,IAC3B1F,EAAS0F,EAAT1F,KAER,OACE,kBAAC,GAAD,CACEiJ,IAAMjJ,EAAKd,YACXwG,cAAgBA,QAO1B,kBAACsU,GAAD,CACEhN,WAAaD,EAAsBC,YAEjCE,EAAeqK,KAAI,SAAApK,GAEnB,OACE,kBAAC,GAAD,CACElE,IAAMkE,EAAcjO,YACpBiO,cAAgBA,a,GApCEmJ,aAoDrBkB,iBALS,SAAA/L,GAAK,MAAK,CAChCe,eAAgBf,EAAMe,eACtBU,eAAgBzB,EAAMyB,eACtBH,sBAAuBtB,EAAMsB,yBAEhByK,CAAyByC,I,gyBCrExC,IAAMC,GAAqBtE,IAAOC,IAAV,MAGD,SAAAb,GAAK,OAAIA,EAAMc,MAAMvE,UAE3B,SAAAyD,GAAK,OAAIA,EAAMc,MAAMtE,aAC1B,SAAAwD,GAAK,OAAIA,EAAMc,MAAM1D,mBAY3B+H,GAAavE,IAAOC,IAAV,KACX4B,IAIC2C,GAAoBxE,IAAOC,IAAV,KAClB4B,IAOC4C,GAAsBzE,IAAOC,IAAV,MAMnByE,G,uKACM,IACAvN,EAA0BhO,KAAKiW,MAA/BjI,sBAER,OACE,kBAAC,WAAD,MAEKA,EAAsBC,YACvB,kBAACkN,GAAD,CAAoB9D,UAAU,kCAC5B,kBAAC+D,GAAD,CACEjF,MVvDgB,GUwDhByC,QAAU,KAFZ,UAKA,kBAACwC,GAAD,CAAYxC,QAAU,KAAtB,UACA,kBAACwC,GAAD,CAAYxC,QAAU,KAAtB,gBACE,EACF,kBAACwC,GAAD,CAAYjF,MV7DK,IU6DjB,QACA,kBAACkF,GAAD,gBACA,kBAACD,GAAD,CAAYxC,QAAU,KAAtB,QACA,kBAACwC,GAAD,CAAYjF,MVhEK,IUgEjB,QACA,kBAACmF,GAAD,OACE,Q,GAtB4B/D,aAmC3BkB,iBAJS,SAAA/L,GAAK,MAAK,CAChCsB,sBAAuBtB,EAAMsB,yBAGhByK,CAAyB8C,I,4gBC1ExC,IAAMC,GAAS3E,IAAOC,IAAV,MAGA,SAAAb,GAAK,OAAIA,EAAMc,MAAM5D,gBAChB,SAAA8C,GAAK,OAAIA,EAAMc,MAAMjF,cAcvB,SAAAmE,GAAK,OAAIA,EAAMc,MAAMC,aXpBT,SWkCNyE,G,kDACnB,WAAYxF,GAAQ,IAAD,8BACjB,cAAMA,IAEDyF,UAAY,EAAKA,UAAUvE,KAAf,gBACjB,EAAKD,YAAc,EAAKA,YAAYC,KAAjB,gBAJF,E,wDAQjBtH,OAAOuH,KAAK,gCAAiC,Y,oCAI7CvH,OAAOuH,KAAK,yCAA0C,Y,+BAItD,OACE,kBAACoE,GAAD,CAAQnE,UAAU,oBAChB,yBAAKC,QAAUtX,KAAK0b,WAClB,kBAAC,GAAD,MADF,aAIA,yBAAKpE,QAAUtX,KAAKkX,aAClB,kBAAC,GAAD,MADF,oBAIA,yBAAKG,UAAU,yBAAf,mBd/D6BzK,gB,GcoCQ2K,aChC9BoE,GANb,cAAoC,IAAtB7N,EAAqB,EAArBA,KAAM3N,EAAe,EAAfA,YAAe,oBACjCH,KAAK8N,KAAOA,EACZ9N,KAAKG,YAAcA,G,g3CCYvB,IAAMyb,GAAO/E,IAAOC,IAAV,MAOa,SAAAb,GAAK,OAAIA,EAAMc,MAAM3E,oBAGnB,SAAA6D,GAAK,OAAIA,EAAMc,MAAM3E,oBAChC,SAAA6D,GAAK,OAAIA,EAAMc,MAAMC,cAOV,SAAAf,GAAK,OAAIA,EAAMc,MAAMvE,Sb5BnB,SaqCrBqJ,GAAYhF,IAAOiF,MAAV,MAITC,GAAmBlF,IAAOmB,OAAV,MAGC,SAAA/B,GAAK,OAAIA,EAAMc,MAAMvE,UAGrB,SAAAyD,GAAK,OAAIA,EAAMc,MAAM5E,WAGhC,SAAA8D,GAAK,OAAIA,EAAMc,MAAMxD,kBAG5BsF,GbrDsB,Sa6DrBmD,GAAkBnF,IAAOmB,OAAV,MAGE,SAAA/B,GAAK,OAAIA,EAAMc,MAAM5E,WAChC,SAAA8D,GAAK,OAAIA,EAAMc,MAAM1D,mBACV,SAAA4C,GAAK,OAAIA,EAAMc,MAAMvE,SAMvCqG,IAGCoD,GAAapF,YAAOmF,GAAPnF,CAAH,Kb3EW,SamFrBqF,G,kDACJ,WAAYjG,GAAQ,IAAD,8BACjB,cAAMA,IAEDvJ,MAAQ,CACXyP,KAAM,GACNC,MAAO,IAGT,EAAKC,WAAa,EAAKA,WAAWlF,KAAhB,gBAClB,EAAKmF,OAAS,EAAKC,SAASpF,KAAd,gBACd,EAAKqF,YAAc,EAAKA,YAAYrF,KAAjB,gBACnB,EAAKsF,YAAc,EAAKA,YAAYtF,KAAjB,gBACnB,EAAKuF,YAAc,EAAKA,YAAYvF,KAAjB,gBAEnB,EAAKwF,aAAe,KACpB,EAAKC,YAAc,KAfF,E,6DAkBD,IACRhV,EAAa5H,KAAKiW,MAAlBrO,SAER,OAAIA,EACI,oBAAN,OAA2BA,EAA3B,OAEM,iC,kCAIE9C,GAAQ,IACV8C,EAAa5H,KAAKiW,MAAlBrO,SAKR,GAFAtG,QAAQC,IAAI,mCAAoCqG,GAE5CA,EAAU,CACZ,IAAMwU,EAAQtX,EAAMkM,OAAOoL,MAE3B,GAAqB,IAAjBA,EAAM3S,OAER,YADAnI,QAAQC,IAAI,yBAKd,IADA,IAAMqM,EAAqB,GAClBwG,EAAI,EAAGA,EAAIgI,EAAM3S,OAAQ2K,IAChCxG,EAAmB9F,KACjB,IAAI6T,GAAkB,CACpB7N,KAAMsO,EAAMjM,KAAKiE,GACjBjU,YAAa+C,OAInB5B,QAAQC,IAAI,0BAA2B6a,GAEvCpc,KAAKiW,MAAM9N,StBxGO,SAAAyF,GAAkB,MAAK,CAC7C3J,KClCuB,YDmCvB6B,QAAS8H,GsBsGeiP,CAASjP,IAE7B6C,GAAgB7I,EAAUgG,QAE1BtI,GAAmB,sD,iCAIZR,GACT9E,KAAK8c,SAAS,CAAEX,KAAMrX,EAAMkM,OAAO+L,U,iCAGzB,IACFnV,EAAa5H,KAAKiW,MAAlBrO,SACAuU,EAASnc,KAAK0M,MAAdyP,KAER7a,QAAQC,IAAI,+BAAgC4a,GAExB,IAAhBA,EAAK1S,SAIL7B,IvBvIR,SAAwB9H,EAAMqc,GAC5B,IAAMrX,EAAQ,IAAIiF,GAChBtJ,EACA,IAAIZ,EAAkB,CAAEC,OAAMC,QAASoc,KAEzC1U,GAAsB4E,cAAcvH,GuBmIhCkY,CAAepV,EAAUuU,GAEzBnc,KAAK8c,SAAS,CAAEX,KAAM,KAClBnc,KAAK4c,aACP5c,KAAK4c,YAAYK,SAGnB3X,GAAmB,kD,oCAKrBtF,KAAK2c,cAAgB3c,KAAK2c,aAAaO,U,oKAIpBjD,UAAUC,UAAUiD,W,OAAjChB,E,OAENnc,KAAK8c,SAAS,CACZX,S,qIAIM,IAAD,OACCA,EAASnc,KAAK0M,MAAdyP,KAER,OACE,kBAACP,GAAD,KACE,kBAACC,GAAD,CACE5X,KAAK,OACLwS,IAAM,SAACA,GAAD,OAAS,EAAKkG,aAAelG,GACnC2G,UAAW,EACX9F,QAAU,WAAQ,EAAKqF,aAAaI,MAAQ,MAC5CM,SAAWrd,KAAKwc,cAClB,kBAACT,GAAD,CAAkBzE,QAAUtX,KAAKyc,aAAjC,OACA,8BACEa,YAAc,MACdC,eAAiB,MACjBC,YAAa,EACb/G,IAAM,SAACA,GAAD,OAAS,EAAKmG,YAAcnG,GAClCsG,MAAQZ,EAAOkB,SAAWrd,KAAKqc,WAC/BoB,YAAczd,KAAK0d,mBACrB,kBAAC1B,GAAD,CAAiB1E,QAAUtX,KAAK0c,aAAhC,SAGA,kBAACT,GAAD,CAAY3E,QAAUtX,KAAKsc,QAA3B,a,GA1HoB/E,aAsIbkB,iBAJS,SAAA/L,GAAK,MAAK,CAChClD,OAAQkD,EAAMlD,OACd5B,SAAU8E,EAAM9E,YAEH6Q,CAAyByD,I,4qBCjNxC,IAAMyB,GAAcC,YAAH,MAEQ,SAAA3H,GAAK,OAAIA,EAAMc,MAAM3E,oBAIxCyL,GAAehH,IAAOC,IAAV,KddS,ScuBrBgH,GAAYjH,IAAOC,IAAV,MACQ,SAAAb,GAAK,OAAIA,EAAMc,MAAMzE,WdxBjB,SckCrByL,GAAelH,IAAOC,IAAV,MACK,SAAAb,GAAK,OAAIA,EAAMc,MAAM3E,mBdnCjB,ScoHZ4L,G,kDArEb,WAAY/H,GAAQ,IAAD,8BACjB,cAAMA,IAJRgI,wBAA0B,0BAGP,EAFnBC,WAAa,EAKX,EAAKxR,MAAQ,CACXyR,WAAYzM,GAAY,EAAK0M,wBAA0B,yBAGzD,EAAKhF,cAAgB,EAAKA,cAAcjC,KAAnB,gBAPJ,E,mEAWjB,OAAOtH,OAAOwO,aAAaC,QAAQte,KAAKie,2B,2CAGrBlB,GACnBlN,OAAOwO,aAAaE,QAAQve,KAAKie,wBAAyBlB,K,iCAGjD9S,GACT,IAAMuU,EAAUvU,EAAKjK,KAAKke,YAG1B,OAFAle,KAAKke,YAAcle,KAAKke,WAAa,GAAKjU,EAAKR,OAE3C+U,IAAYH,aAAaC,QAAQte,KAAKie,yBACjCje,KAAKye,WAAWxU,GAEhBuU,I,sCAKTld,QAAQC,IAAI,wBAEZ,IAAM0I,EAAOD,OAAOC,KAAKyH,IACnB8M,EAAUxe,KAAKye,WAAWxU,GAChCjK,KAAK0e,qBAAqBF,GAE1Bld,QAAQC,IAAI,gBAAiBid,GAE7Bxe,KAAK8c,SAAS,CACZqB,WAAYzM,GAAY8M,O,+BAIlB,IACAL,EAAene,KAAK0M,MAApByR,WAIR,OAFA7c,QAAQC,IAAI,iBAAkB4c,GAG5B,kBAAC,IAAD,CAAepH,MAAQoH,GACrB,kBAACR,GAAD,MACA,kBAACE,GAAD,CAAcxG,UAAU,OACtB,kBAACyG,GAAD,CAAWzG,UAAU,2BACnB,kBAAC0G,GAAD,KACE,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAmB3E,cAAgBpZ,KAAKoZ,gBACxC,kBAAC,GAAD,MACA,kBAAC,GAAD,OAEF,kBAAC,GAAD,MACA,kBAAC,GAAD,a,GAjEM7B,aCpCEoH,QACW,cAA7B9O,OAAO+O,SAASC,UAEe,UAA7BhP,OAAO+O,SAASC,UAEhBhP,OAAO+O,SAASC,SAASC,MACvB,2DCVNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,KAAD,CAAU/W,MAAQA,IAChB,kBAAC,GAAD,QAGJgX,SAASC,eAAe,SDsHpB,kBAAmBlF,WACrBA,UAAUmF,cAAcC,MACrBjF,MAAK,SAAAkF,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLne,QAAQme,MAAMA,EAAM1f,c","file":"static/js/main.b30377ee.chunk.js","sourcesContent":["class EventSendTextData {\n  constructor({ uuid, message }) {\n    this.uuid = uuid;\n    this.message = message;\n  }\n}\n\nclass EventSendFilesData {\n  constructor({ uuid, message, size, fingerprint }) {\n    this.uuid = uuid;\n    this.message = message;\n    this.size = size;\n    this.fingerprint = fingerprint;\n  }\n}\n\nclass EventDownloadFileData {\n  constructor({ uuid, fingerprint }) {\n    this.uuid = uuid;\n    this.fingerprint = fingerprint;\n  }\n}\n\nclass EventConnectData {\n  constructor({ uuid }) {\n    this.uuid = uuid;\n  }\n}\n\nclass EventSendMessageData {\n  constructor({ message }) {\n    this.message = message;\n  }\n}\n\nclass EventErrorData {\n  constructor({ uuid, message }) {\n    this.uuid = uuid;\n    this.message = message;\n  }\n}\n\n\nexport {\n  EventSendTextData,\n  EventSendFilesData,\n  EventDownloadFileData,\n  EventConnectData,\n  EventSendMessageData,\n  EventErrorData\n}","import {\n  EventSendTextData,\n  EventSendFilesData,\n  EventConnectData,\n  EventSendMessageData,\n  EventErrorData,\n} from './utils/dataSchema/LocalDropEventData';\n\nexport const MESSAGE_TYPE = {\n  'UUID': 'UUID',\n  'PEERS': 'PEERS',\n  'JOIN': 'JOIN',\n  'LEAVE': 'LEAVE',\n  'OFFER': 'OFFER',\n  'ANSWER': 'ANSWER',\n  'PING': 'PING',\n  'PONG': 'PONG',\n  'ERROR': 'ERROR',\n  'ICE_CANDIDATE': 'ICE_CANDIDATE',\n};\n\nconst messageSchema = {\n  \"messageSchema\": {\n    \"messageType\": \"String\",\n    \"data\": \"Json String. Type is one of dataSchema\"\n  }\n};\n\nconst dataSchema = {\n  errorDataSchema: {\n    \"message\": \"string\"\n  },\n  offerDataSchema: {\n    \"fromUUID\": \"string\",\n    \"toUUID\": \"string\",\n    \"timeStamp\": \"time string, ISO format\",\n    \"offer\": {\n      \"type\": \"string\",\n      \"sdp\": \"string\"\n    }\n  },\n  answerDataSchema: {\n    \"fromUUID\": \"string\",\n    \"toUUID\": \"string\",\n    \"timeStamp\": \"time string, ISO format\",\n    \"answer\": {\n      // TODO: CHECK answer schema!!!\n      \"type\": \"string\",\n      \"sdp\": \"string\"\n    }\n  },\n  pingpongDataSchema: {\n    \"message\": \"string\"\n  },\n  uuidDataSchema: {\n    \"uuid\": \"string\"\n  },\n  peersDataSchema: {\n    \"peers\": \"array of string\"\n  },\n  joinDataSchema: {\n    \"peers\": \"array of string\"\n  },\n  leaveDataSchema: {\n    \"peers\": \"array of string\"\n  },\n  iceCandidateDataSchema: {\n    \"fromUUID\": \"string\",\n    \"toUUID\": \"string\",\n    \"ice\": \"string\",\n  },\n  peerTextDataSchema: {\n    'message': 'string',\n  },\n  peerFileDataSchema: {\n    'message': 'string',\n    'fingerprint': 'string',\n    'size': 'long',\n  }\n}\n\nexport const CLIENT_EVENT_TYPE = {\n  'CONNECT': 'CONNECT',\n  'SEND_TEXT': 'SEND_TEXT',\n  'SEND_FILES': 'SEND_FILES',\n  'DOWNLOAD_FILE': 'DOWNLOAD_FILE',\n  'RECONNECT': 'RECONNECT',\n  // TODO Change name to SEND_MESSAGE_TO_SIGNAL\n  'SEND_MESSAGE': 'SEND_MESSAGE',\n  'CLOSE': 'CLOSE',\n  'ERROR': 'ERROR',\n};\n\nconst clientEventDataSchema = {\n  sendTextDatSchema: EventSendTextData,\n  sendFileDataSchema: EventSendFilesData,\n  connectDataSchema: EventConnectData,\n  sendMessageDataSchema: EventSendMessageData,\n  errorDataSchema: EventErrorData,\n}\n\n\nexport const PEER_MESSAGE_TYPE = {\n  'TEXT': 'TEXT',\n  'FILE': 'FILE',\n  'ERROR': 'ERROR',\n  'DOWNLOAD': 'DOWNLOAD',\n}\n\nconst peerMessageSchema = {\n  \"messageSchema\": {\n    \"messageType\": \"String\",\n    \"data\": \"Json String. Type is one of peerMessageDataSchema\"\n  }\n};\n\nconst peerMessageDataSchema = {\n  textDataSchema: { message: 'string' },\n  fileDataSchema: {\n    message: 'string',\n    fingerprint: 'string',\n  },\n  downloadDataSchema: { fingerprint: 'string' },\n  erroDataSchema: { message: 'string' },\n}\n\nconst messagePacketSchema = {\n  'source': 'uuid string',\n  'destination': 'uuid string',\n  'type': 'PEER_MESSAGE_TYPE string',\n  'data': 'peerDataSchema',\n  'time': 'date',\n  'progress': 'int',\n}\n\nconst meesagePacketDownloadHeaderSchema = {\n  'fingerprint': '35 bytes',\n}\n\nconst peerConnectionMangerSchema = {\n  'uuid': 'string',\n  'peerConnections': {\n    ['otherPeerUUid']: {\n      'peerConnection': 'RTCPeerConnection',\n      'dataChannel': 'RTCDataChannel',\n    }\n  }\n}\n\nconst systemMessageSchema = {\n  message: 'string',\n  fingerprint: 'string',\n  createdAt: 'time string'\n};\n\n","class messageTextData {\n  constructor({ message, size, fingerprint }) {\n    this.message = message;\n    this.size = size;\n    this.fingerprint = fingerprint;\n  }\n}\n\nclass messageFileData {\n  constructor({ fingerprint, message, size }) {\n    this.fingerprint = fingerprint;\n    this.message = message;\n    this.size = size;\n  }\n}\n\nclass messageDownloadData {\n  constructor({ fingerprint }) {\n    this.fingerprint = fingerprint;\n  }\n}\n\nclass messageErrorData {\n  constructor({ message }) {\n    this.message = message;\n  }\n}\n\n\nexport {\n  messageTextData,\n  messageFileData,\n  messageDownloadData,\n  messageErrorData,\n}\n","import { MESSAGE_TYPE } from '../schema';\n\nfunction createMessage(messageType, data) {\n  const message = {\n    messageType,\n    data,\n  };\n\n  return JSON.stringify(message);\n}\n\nfunction parseMessage(rawMessage) {\n  console.log('rawMessage is ', rawMessage);\n  const parsedMessage = ((rawMessage) => {\n    try {\n      const message = JSON.parse(rawMessage);\n\n      if (!(message['messageType'] in MESSAGE_TYPE)) {\n        throw new Error(`This messageType is not supported! type: ${message['messageType']}`)\n      }\n\n      return message;\n    } catch(err) {\n      return {\n        messageType: MESSAGE_TYPE.ERROR,\n        data: {\n          \"message\": err.message\n        }\n      }\n    }\n  })(rawMessage);\n\n  return parsedMessage;\n}\n\n\nexport {\n  createMessage,\n  parseMessage,\n};","import { PEER_MESSAGE_TYPE } from '../schema';\nimport {\n  FINGERPRINT_SIZE,\n  HEADER_SIZE_IN_BYTES,\n} from '../constants/constant';\n\nfunction createPeerMessage(messageType, data) {\n  const message = {\n    messageType,\n    data,\n  };\n\n  return JSON.stringify(message);\n}\n\nfunction parsePeerMessage(rawMessage) {\n  console.log('rawPeerMessage is ', rawMessage);\n  const parsedMessage = ((rawMessage) => {\n    try {\n      const message = JSON.parse(rawMessage);\n\n      if (!(message['messageType'] in PEER_MESSAGE_TYPE)) {\n        throw new Error(`This peerMessageType is not supported! type: ${message['messageType']}`)\n      }\n\n      return message;\n    } catch(err) {\n      return {\n        messageType: PEER_MESSAGE_TYPE.ERROR,\n        data: {\n          \"message\": err.message\n        }\n      }\n    }\n  })(rawMessage);\n\n  return parsedMessage;\n}\n\nasync function concatHeaderAndChunk(fingerprint, chunk) {\n  const headerFingerprint = new TextEncoder(\"utf-8\").encode(fingerprint);\n\n  console.log('sender: fingerprint is ', fingerprint);\n  console.log('headerFingerprint is ', headerFingerprint);\n\n  const chunkWithHeader = await (new Blob([headerFingerprint.buffer, chunk])).arrayBuffer();\n\n  return chunkWithHeader;\n}\n\nfunction parseChunkAndHeader(chunkWithHeader) {\n  const uInt8Array = new Uint8Array(chunkWithHeader);\n  const fingerprint = new TextDecoder().decode(uInt8Array.slice(0, FINGERPRINT_SIZE));\n\n  const chunk =\n    uInt8Array.slice(HEADER_SIZE_IN_BYTES, uInt8Array.byteLength).buffer;\n\n  return {\n    fingerprint,\n    chunk\n  };\n}\n\n\nexport {\n  createPeerMessage,\n  parsePeerMessage,\n  concatHeaderAndChunk,\n  parseChunkAndHeader\n}","function getSizeString(size) {\n  if (size >= 1000 && size < 1000 * 1000) {\n    return `${ (size / 1000).toFixed(1) } KB`;\n  }\n\n  if (size >= 1000 * 1000 && size < 1000 * 1000 * 1000) {\n    return `${ (size / (1000 * 1000)).toFixed(1) } MB`;\n  }\n\n  if (size >= 1000 * 1000 * 1000) {\n    return `${ (size / (1000 * 1000 * 1000)).toFixed(1) } GB`;\n  }\n}\n\nfunction getCurrentTime() {\n  const now = new Date();\n\n  const hours = `0${ now.getHours() }`.slice(-2);\n  const minutes = `0${ now.getMinutes() }`.slice(-2);\n  const seconds = `0${ now.getSeconds() }`.slice(-2);\n\n  return `${ hours }:${ minutes }:${ seconds }`;\n}\n\nfunction generateFingerPrint() {\n  const arr = new Uint8Array(10);\n  crypto.getRandomValues(arr);\n  \n  const stringArr = Array.from(arr, x => ('0' + x.toString(16)).substr(-2));\n\n  return 'localdrop-file-'+ stringArr.join('');\n}\n\n\nexport {\n  getSizeString,\n  getCurrentTime,\n  generateFingerPrint,\n}","import { PEER_MESSAGE_TYPE } from '../schema';\nimport { getCurrentTime } from './commonUtil';\n\nfunction createMessagePacket({\n  source, destination, messageType, data,\n}) {\n  if (messageType === PEER_MESSAGE_TYPE.TEXT) {\n\n    return {\n      source,\n      destination,\n      type: messageType,\n      data,\n      time: getCurrentTime(),\n      progress: 100\n    }\n  }\n\n  if (messageType === PEER_MESSAGE_TYPE.FILE) {\n    return {\n      source,\n      destination,\n      type: messageType,\n      data,\n      time: getCurrentTime(),\n      progress: 0\n    }\n  }\n\n  if (messageType === PEER_MESSAGE_TYPE.ERROR) {\n    return {\n      source,\n      destination,\n      type: messageType,\n      data,\n      time: getCurrentTime(),\n      progress: 100\n    }\n  }\n}\n\nexport {\n  createMessagePacket,\n}","import { MESSAGE_TYPE, CLIENT_EVENT_TYPE, PEER_MESSAGE_TYPE } from '../schema';\nimport {\n  messageTextData,\n  messageFileData,\n  messageDownloadData,\n  messageErrorData,\n} from './dataSchema/PeerMessageData';\nimport { createMessage } from './message';\nimport {\n  createPeerMessage,\n  parsePeerMessage,\n} from './peerMessage';\nimport { createMessagePacket } from './messagePacket';\nimport { generateFingerPrint } from './commonUtil';\nimport {\n  sendMessageToServer,\n  addJoinedPeers,\n  deleteLeavedPeers,\n  updateUUID,\n  getMyUUID,\n  addMessagePacket,\n  transferFileToPeer,\n  writePeerChunk,\n  writeSystemMessage,\n  abortDownloadFile,\n} from './localApi';\n\nfunction createPeerConnection(uuid) {\n  const peerConnection = new RTCPeerConnection();\n\n  // TODO: Handle createDataChannel error later\n  const dataChannel = peerConnection.createDataChannel('localdropDataChannel', {\n    negotiated: true,\n    id: 0,\n  });\n\n  dataChannel.binaryType = 'arraybuffer';\n  dataChannel.onopen = (event) => {\n    handleDataChannelStatusChange(event, uuid);\n  };\n\n  dataChannel.onclose = (event) => {\n    handleDataChannelStatusChange(event, uuid);\n\n    abortDownloadFile(uuid);\n  };\n\n  dataChannel.onmessage = (event) => {\n    // console.log('[Message from DataChannel]: ', event);\n    handleDataChannelMessage(event, uuid);\n  }\n\n  dataChannel.onerror = (event) => {\n    const { message, filename, lineno, colno } = event;\n    const payload = JSON.stringify({ message, filename, lineno, colno }, undefined, 2);\n\n    const systemMessage = `[peer ${uuid}]: dataChannel error: ` + payload;\n    writeSystemMessage(systemMessage);\n  }\n\n  peerConnection.onicecandidate = event => {\n    console.log(`[peer ${uuid}]: onicecandidate, event is `, event);\n  \n    if (event.candidate) {\n      // Send the candidate to the remote peer\n      const message = createMessage(MESSAGE_TYPE.ICE_CANDIDATE, {\n        fromUUID: getMyUUID(),\n        toUUID: uuid,\n        ice: event.candidate,\n      });\n\n      sendMessageToServer(message);\n\n    } else {\n      // All ICE candidates have been sent\n    }\n  };\n\n  peerConnection.onconnectionstatechange = event => {\n    console.log(`[peer ${uuid}]: onconnectionstatechange, event is `, event);\n    console.log(`[peer ${uuid}]: peerConnection.connectionState is `, peerConnection.connectionState);\n\n    switch(peerConnection.connectionState) {\n      case 'connecting':\n        // do nothing\n        break;\n      case 'connected':\n        // do nothing\n        break;\n      case 'disconnected':\n        break;\n      case 'failed':\n        writeSystemMessage('onconnectionstatechange, peerConnection failed');\n        break;\n      case 'closed':\n        // TODO: Recreate PeerConnectionManager\n        writeSystemMessage('onconnectionstatechange, peerConnection closed');\n        break;\n      default:\n        writeSystemMessage('onconnectionstatechange, peerConnection.connectionState: ' + peerConnection.connectionState);\n    }\n\n  };\n\n  return { peerConnection, dataChannel };\n}\n\nasync function handleDataChannelMessage(event, uuid) {\n  if (typeof event.data !== 'string') {\n    const arrayBuffer = event.data;\n\n    await writePeerChunk(arrayBuffer, uuid);\n\n    return;\n  }\n\n  const message = parsePeerMessage(event.data);\n\n  console.log(`[peer ${uuid}]: handleDataChannelMessage, message is `, message);\n\n  const { messageType, data } = message;\n\n  if (messageType === PEER_MESSAGE_TYPE.TEXT) {\n    const messagePacket = createMessagePacket({\n      source: uuid,\n      destination: getMyUUID(),\n      data,\n      messageType,\n    });\n\n    console.log('[handleDataChannelMessage]: messagePacket is ', messagePacket);\n    addMessagePacket(messagePacket);\n\n    return;\n  }\n\n  if (messageType === PEER_MESSAGE_TYPE.FILE) {\n    const messagePacket = createMessagePacket({\n      source: uuid,\n      destination: getMyUUID(),\n      data,\n      messageType,\n    });\n\n    console.log('[handleDataChannelMessage]: messagePacket is ', messagePacket);\n    addMessagePacket(messagePacket);\n\n    return;\n  }\n\n  if (messageType === PEER_MESSAGE_TYPE.DOWNLOAD) {\n    const { fingerprint } = data;\n    // transfer file\n    transferFileToPeer(fingerprint, uuid);\n    return;\n  }\n\n  if (messageType === PEER_MESSAGE_TYPE.ERROR) {\n    const { message } = data;\n\n    writeSystemMessage(message);\n    return;\n  }\n}\n\nfunction handleDataChannelStatusChange(event, uuid) {\n  console.log(`[peer ${uuid}]: handleDataChannelStatusChange, event is `, event);\n  const { type: eventType } = event;\n\n  // TODO: Delete dataChannel in peerConnectionManager\n  if (eventType === 'close') {\n    const systemMessage = `[peer #${uuid}]: dataChannel closed `;\n    writeSystemMessage(systemMessage);\n  }\n}\n\n// TODO: Handle error later\nasync function createOffer(peerConnection) {\n  const offer = await peerConnection.createOffer();\n  await peerConnection.setLocalDescription(offer);\n\n  return peerConnection.localDescription;\n}\n\nasync function setRemoteOffer(peerConnection, offer) {\n  console.log('setOffer called');\n  await peerConnection.setRemoteDescription(offer);\n\n  console.log(peerConnection);\n}\n\n// TODO: Handle error later\nasync function createAnswer(peerConnection) {\n  const answer = await peerConnection.createAnswer();\n  console.log('createAnswer, answer is ', answer);\n\n  await peerConnection.setLocalDescription(answer);\n\n  return peerConnection.localDescription;\n}\n\nasync function setRemoteAnswer(peerConnection, answer) {\n  await peerConnection.setRemoteDescription(answer);\n}\n\nfunction initializePeerConnections(peerConnectionManager, peers) {\n  const connectionArr = [];\n\n  for (const peerUUID of peers) {\n    if (!peerConnectionManager.peerConnections[peerUUID]) {\n      // initialize peerConnection\n      const { peerConnection, dataChannel } = createPeerConnection(peerUUID);\n\n      connectionArr.push({ uuid: peerUUID, peerConnection, dataChannel });\n    }\n  }\n\n  return connectionArr;\n}\n\n\nfunction addClientEventTypeEventListener(peerConnectionManager) {\n  peerConnectionManager.addEventListener(CLIENT_EVENT_TYPE.CONNECT, async (event) => {\n    const { uuid: toUUID } = event;\n\n    if (peerConnectionManager.peerConnections[toUUID]) {\n      // already exist\n      console.log(`[peerConnectionManger]: ${CLIENT_EVENT_TYPE.CONNECT}, peerConnection already exist`);\n      // return;\n    }\n\n    const { peerConnection, dataChannel } = peerConnectionManager.peerConnections[toUUID] || createPeerConnection(toUUID);\n    peerConnectionManager.peerConnections[toUUID] = { peerConnection, dataChannel };\n\n    // check if peerConnection is done => if done, do nothing\n    if (peerConnection.connectionState === 'connected') {\n      console.log(`[peerConnectionManger]: ${CLIENT_EVENT_TYPE.CONNECT}, peerConnection already connected`);\n      return;\n    }\n\n    try {\n      const myUUID = peerConnectionManager.uuid;\n      const offer = await createOffer(peerConnection);\n      const message = createMessage(MESSAGE_TYPE.OFFER, {\n        fromUUID: myUUID, toUUID, offer,\n      });\n\n      sendMessageToServer(message);\n    } catch(error) {\n      writeSystemMessage(JSON.stringify(error, undefined, 2));\n    }\n  });\n\n  peerConnectionManager.addEventListener(CLIENT_EVENT_TYPE.SEND_TEXT, event =>{\n    const { uuid, message } = event;\n\n    if (!peerConnectionManager.peerConnections[uuid]) {\n      writeSystemMessage(`can not find peer: #${ uuid }`);\n      return;\n    }\n\n    const { dataChannel } = peerConnectionManager.peerConnections[uuid];\n    const data = new messageTextData({\n      message,\n      size: message.length,\n      fingerprint: generateFingerPrint(),\n    });\n\n    const peerMessage = createPeerMessage(PEER_MESSAGE_TYPE.TEXT, data);\n\n    console.log('CLIENT_EVENT_TYPE.SEND_TEXT, message is ', peerMessage);\n\n    console.log('dataChannel is ', dataChannel);\n    console.log('dataChannel.readyState is ', dataChannel.readyState);\n\n    if (dataChannel.readyState !== 'open') {\n      writeSystemMessage('dataChannel not opened!, try to clikc the peer again!');\n      console.log('dataChannel not opened!, click the peer again!');\n      return;\n    }\n\n    dataChannel.send(peerMessage);\n\n    const messagePacket = createMessagePacket({\n      source: getMyUUID(),\n      destination: uuid,\n      data,\n      messageType: PEER_MESSAGE_TYPE.TEXT,\n    });\n\n    addMessagePacket(messagePacket);\n  });\n\n  peerConnectionManager.addEventListener(CLIENT_EVENT_TYPE.SEND_FILES, event => {\n    const { uuid, message, size, fingerprint } = event;\n\n    if (!peerConnectionManager.peerConnections[uuid]) {\n      writeSystemMessage(`can not find peer: #${ uuid }`);\n      return;\n    }\n\n    const { dataChannel } = peerConnectionManager.peerConnections[uuid];\n    const data = new messageFileData({ fingerprint, size, message });\n\n    const peerMessage = createPeerMessage(PEER_MESSAGE_TYPE.FILE, data);\n\n    console.log('CLIENT_EVENT_TYPE.SEND_FILES, message is ', peerMessage);\n\n    console.log('dataChannel is ', dataChannel);\n    console.log('dataChannel.readyState is ', dataChannel.readyState);\n\n    if (dataChannel.readyState !== 'open') {\n      writeSystemMessage('dataChannel not opened!, try to clikc the peer again!');\n      console.log('dataChannel not opened!, click the peer again!');\n      return;\n    }\n\n    dataChannel.send(peerMessage);\n\n    const messagePacket = createMessagePacket({\n      source: getMyUUID(),\n      destination: uuid,\n      data,\n      messageType: PEER_MESSAGE_TYPE.FILE,\n    });\n\n    addMessagePacket(messagePacket);\n  });\n\n  peerConnectionManager.addEventListener(CLIENT_EVENT_TYPE.DOWNLOAD_FILE, event => {\n    const { uuid, fingerprint } = event;\n\n    if (!peerConnectionManager.peerConnections[uuid]) {\n      writeSystemMessage(`can not find peer: #${ uuid }`);\n      return;\n    }\n\n    const { dataChannel } = peerConnectionManager.peerConnections[uuid];\n    const data = new messageDownloadData({ fingerprint });\n\n    const peerMessage = createPeerMessage(PEER_MESSAGE_TYPE.DOWNLOAD, data);\n\n    console.log('CLIENT_EVENT_TYPE.DOWNLOAD_FILE, message is ', peerMessage);\n\n    console.log('dataChannel is ', dataChannel);\n    console.log('dataChannel.readyState is ', dataChannel.readyState);\n\n    if (dataChannel.readyState !== 'open') {\n      writeSystemMessage(\n        `CLIENT_EVENT ${ CLIENT_EVENT_TYPE.DOWNLOAD_FILE }: dataChannel not opened!`\n        + `dataChannel.readyState: ${ dataChannel.readyState }`);\n      console.log('dataChannel not opened!');\n      return;\n    }\n\n    dataChannel.send(peerMessage);\n    // TODO: should I notify that peerMessage has been sent well?\n  });\n\n  peerConnectionManager.addEventListener(CLIENT_EVENT_TYPE.ERROR, event =>{\n    const { uuid, message } = event;\n\n    if (!peerConnectionManager.peerConnections[uuid]) {\n      writeSystemMessage(`can not find peer: #${ uuid }`);\n      return;\n    }\n\n    const { dataChannel } = peerConnectionManager.peerConnections[uuid];\n    const data = new messageErrorData({ message });\n\n    const peerMessage = createPeerMessage(PEER_MESSAGE_TYPE.ERROR, data);\n\n    console.log('CLIENT_EVENT_TYPE.ERROR, message is ', peerMessage);\n\n    console.log('dataChannel is ', dataChannel);\n    console.log('dataChannel.readyState is ', dataChannel.readyState);\n\n    if (dataChannel.readyState !== 'open') {\n      writeSystemMessage(\n        `CLIENT_EVENT ${ CLIENT_EVENT_TYPE.ERROR }: dataChannel not opened!`);\n      console.log('dataChannel not opened!');\n      return;\n    }\n\n    dataChannel.send(peerMessage);\n  });\n\n\n  peerConnectionManager.addEventListener(CLIENT_EVENT_TYPE.RECONNECT, event =>{\n    const { uuid } = event;\n    // TODO: DO it later\n  });\n}\n\nfunction addMessageTypeEventListener(peerConnectionManager) {\n  peerConnectionManager.addEventListener(MESSAGE_TYPE.UUID, event => {\n    const { uuid } = event;\n\n    peerConnectionManager.uuid = uuid;\n    updateUUID(uuid);\n  });\n\n  peerConnectionManager.addEventListener(MESSAGE_TYPE.PEERS, event => {\n    const { peers } = event;\n    const filteredPeers = peers.filter(peerUUID => peerUUID !== peerConnectionManager.uuid);\n\n    const connectionArr = initializePeerConnections(peerConnectionManager, filteredPeers);\n\n    for (const connection of connectionArr) {\n      const { uuid, peerConnection, dataChannel } = connection;\n\n      peerConnectionManager.peerConnections[uuid] = { peerConnection, dataChannel };\n    }\n\n    // TODO: Inform this event to store\n    addJoinedPeers(filteredPeers);\n  });\n\n  peerConnectionManager.addEventListener(MESSAGE_TYPE.JOIN, event => {\n    const { peers } = event;\n    const filteredPeers = peers.filter(peerUUID => peerUUID !== peerConnectionManager.uuid);\n\n    const connectionArr = initializePeerConnections(peerConnectionManager, filteredPeers);\n\n    for (const connection of connectionArr) {\n      const { uuid, peerConnection, dataChannel } = connection;\n\n      peerConnectionManager.peerConnections[uuid] = { peerConnection, dataChannel };\n    }\n\n    // TODO: Inform this event to store\n    addJoinedPeers(filteredPeers);\n  });\n\n  peerConnectionManager.addEventListener(MESSAGE_TYPE.LEAVE, event => {\n    const { peers } = event;\n    const filteredPeers = peers.filter(peerUUID => peerUUID !== peerConnectionManager.uuid);\n\n    // tear down and delete\n    for (const peerUUID of filteredPeers) {\n      if (!peerConnectionManager.peerConnections[peerUUID]) {\n        continue;\n      }\n\n      const { peerConnection, dataChannel } = peerConnectionManager.peerConnections[peerUUID];\n\n      console.log('[LEAVE]: peerConnectionManager.peerConnections[peerUUID] is ', peerConnectionManager.peerConnections[peerUUID]);\n\n      peerConnection.close();\n      dataChannel.close();\n\n      delete peerConnectionManager.peerConnections[peerUUID];\n    }\n\n    deleteLeavedPeers(filteredPeers);\n  });\n\n  peerConnectionManager.addEventListener(MESSAGE_TYPE.OFFER, async (event) => {\n    const { fromUUID, toUUID, offer, timeStamp } = event;\n\n    console.log('peerConnectionManager.peerConnections[fromUUID] is', peerConnectionManager.peerConnections[fromUUID]);\n\n    // TODO: Reject of Accept offer depend on timeStamp\n    // Maybe.. need to use websocketManager to send message back\n    if (!peerConnectionManager.peerConnections[fromUUID]) {\n      console.log('offer, peerConnectionManager.peerConnections[fromUUID] not exist', peerConnectionManager);\n      return;\n    }\n\n    const { peerConnection } = peerConnectionManager.peerConnections[fromUUID];\n\n    try {\n      await setRemoteOffer(peerConnection, offer);\n\n      const answer = await createAnswer(peerConnection);\n      const message = createMessage(MESSAGE_TYPE.ANSWER, {\n        fromUUID: toUUID,\n        toUUID: fromUUID,\n        answer,\n      });\n\n      sendMessageToServer(message);\n    } catch(err) {\n      writeSystemMessage(JSON.stringify(err, undefined, 2));\n    }\n  });\n\n  peerConnectionManager.addEventListener(MESSAGE_TYPE.ANSWER, async (event) => {\n    const { fromUUID, toUUID, answer, timeStamp } = event;\n\n    if (!peerConnectionManager.peerConnections[fromUUID]) {\n      console.log('answer, peerConnectionManager.peerConnections[fromUUID] not exist');\n      return;\n    }\n\n    console.log('answer is ', answer);\n\n    const { peerConnection } = peerConnectionManager.peerConnections[fromUUID];\n    await setRemoteAnswer(peerConnection, answer);\n  });\n\n  peerConnectionManager.addEventListener(MESSAGE_TYPE.ERROR, event => {\n    // handle error later\n\n    const { message } = event;\n    writeSystemMessage(message);\n\n  });\n\n  peerConnectionManager.addEventListener(MESSAGE_TYPE.ICE_CANDIDATE, async (event) => {\n    const { fromUUID, toUUID, ice } = event;\n\n    console.log('ICE_CANDIDATE, event is ', event);\n\n    if (!peerConnectionManager.peerConnections[fromUUID]) {\n      console.log('ICE CANDIDATE, peerConnection not exist');\n      return;\n    }\n\n    const { peerConnection, dataChannel } = peerConnectionManager.peerConnections[fromUUID];\n    await peerConnection.addIceCandidate(ice);\n  });\n}\n\nfunction createPeerConnectionManager() {\n  const peerConnectionManager = {\n    uuid: null,\n    peerConnections: { },\n    events: { },\n  };\n\n  peerConnectionManager.addEventListener = (eventType, callback) => {\n    // extract event type and do something here\n  \n    peerConnectionManager.events[eventType] = peerConnectionManager.events[eventType] || []\n    peerConnectionManager.events[eventType].push(callback);\n  }\n  \n  peerConnectionManager.dispatchEvent = (event) => {\n    const eventType = event.type;\n    const eventCallbacks = peerConnectionManager.events[eventType];\n  \n    if (!eventCallbacks) {\n      console.log(`peerConnectionManager does not handle event: ${ eventType }`);\n      return;\n    }\n  \n    for (const callback of eventCallbacks) {\n      callback(event);\n    }\n  }\n\n  addMessageTypeEventListener(peerConnectionManager);\n  addClientEventTypeEventListener(peerConnectionManager);\n\n  return peerConnectionManager;\n}\n\nconst peerConnectionManager = createPeerConnectionManager();\nexport {\n  peerConnectionManager,\n  createPeerConnectionManager,\n};\n","import {\n  parsePeerChunk,\n  getMessagePacket, \n  sendErrorToPeer,\n  getMyUUID,\n  writeSystemMessage,\n} from './localApi';\nimport { HEADER_SIZE_IN_BYTES } from '../constants/constant';\nimport { concatHeaderAndChunk } from './peerMessage';\nimport StreamSaver from 'streamsaver';\nStreamSaver.mitm = `${ process.env.REACT_APP_MITM_URL }/mitm.html?version=2.0.0`;\n\nconst FIRST_ACC_SIZE = 66;\nconst DEFAULT_ACC_SIZE = 625;\n\nlet MAXIMUM_ACC_SIZE = FIRST_ACC_SIZE;\n\n// For receiver side store\nconst chunkStore = {\n  // schema\n  // [fingerprint]: {\n  //   accArr: [],\n  //   downloadWriter: null,\n  //   offset: 0,\n  //   size: 0,\n  // }\n};\nconst currentDownloadJob = {\n  // schema\n  // [peerUUID]: { writer, fingerprint }\n};\n\n\n// For transfer side store\nconst transferStore = { };\n\n\nasync function writeChunk(chunkArr, downloadWriter) {\n  const arrayBuffers = [...chunkArr];\n\n  const arrayBuffer = await (new Blob(arrayBuffers)).arrayBuffer();\n  const buffer = new Uint8Array(arrayBuffer);\n\n  downloadWriter.write(buffer);\n}\n\n\n// TODO: Handle the case when user cancel downloads manually\nasync function accumulateChunk(chunkWithHeader, uuid) {\n  const {\n    fingerprint, chunk\n  } = parsePeerChunk(chunkWithHeader);\n\n  chunkStore[fingerprint] = chunkStore[fingerprint] || {\n    accArr: [],\n    downloadWriter: null,\n    offset: 0,\n    size: 0,\n    available: true,\n  };\n\n  if (!chunkStore[fingerprint].downloadWriter) {\n    const messagePacket = getMessagePacket(fingerprint);\n\n    const filename = (messagePacket && messagePacket.data.message) || 'localdrop_download_file';\n    const fileSize = (messagePacket && messagePacket.data.size) || 0;\n    const options = { pathname: fingerprint, size: fileSize };\n\n    chunkStore[fingerprint].size = fileSize;\n    const fileStream = StreamSaver.createWriteStream(filename, options);\n\n    const writer = fileStream.getWriter();\n\n    window.addEventListener('unload', (_) => {\n      writer.abort();\n    });\n\n    // add writer to download job\n    currentDownloadJob[uuid] = currentDownloadJob[uuid] || [];\n    currentDownloadJob[uuid] = [{ writer, fingerprint }, ...currentDownloadJob[uuid]];\n\n\n    chunkStore[fingerprint].downloadWriter = writer;\n    const chunkArr = chunkStore[fingerprint].accArr;\n\n    chunkStore[fingerprint].offset += chunk.byteLength;\n    chunkArr.push(chunk);\n  } else {\n    const chunkArr = chunkStore[fingerprint].accArr;\n    const downloadWriter = chunkStore[fingerprint].downloadWriter;\n\n    chunkStore[fingerprint].offset += chunk.byteLength;\n    chunkArr.push(chunk);\n\n    if (chunkArr.length >= MAXIMUM_ACC_SIZE && chunkStore[fingerprint].available) {\n      chunkStore[fingerprint].available = false;\n\n      // if (chunkArr.length !== MAXIMUM_ACC_SIZE) {\n      //   throw new Error(`length are different, ${MAXIMUM_ACC_SIZE}/${chunkArr.length}`);\n      // }\n\n      const arrayBuffers = [...chunkArr];\n      chunkStore[fingerprint].accArr.splice(0, MAXIMUM_ACC_SIZE);\n\n      await writeChunk(arrayBuffers, downloadWriter);\n      chunkStore[fingerprint].available = true;\n\n      if (MAXIMUM_ACC_SIZE === FIRST_ACC_SIZE) {\n        MAXIMUM_ACC_SIZE = DEFAULT_ACC_SIZE;\n      }\n    }\n  }\n\n  // no need to lock, only occurred once\n  if (chunkStore[fingerprint].offset >= chunkStore[fingerprint].size) {\n    const chunkArr = chunkStore[fingerprint].accArr;\n    const downloadWriter = chunkStore[fingerprint].downloadWriter;\n\n    await writeChunk([...chunkArr], downloadWriter);\n    chunkStore[fingerprint].accArr = [];\n\n    downloadWriter.close();\n\n    // delete writer in download job\n    if (currentDownloadJob[uuid]) {\n      const index = currentDownloadJob[uuid].findIndex((item) => {\n        return item.fingerprint === fingerprint;\n      });\n\n      if (index !== -1) {\n        currentDownloadJob[uuid].splice(index, 1);\n      }\n\n      if (currentDownloadJob[uuid].length === 0) {\n        delete currentDownloadJob[uuid];\n      }\n\n      console.log('currentDownloadJob is ', currentDownloadJob);\n    }\n\n    delete chunkStore[fingerprint];\n  }\n}\n\nfunction readFile(file, offset, chunkSize, reader, fingerprint, uuid) {\n  if (offset > file.size) {\n    if (transferStore[fingerprint]) {\n      transferStore[fingerprint] = false;\n    }\n\n    console.log('offset is ', offset);\n    console.log('file.size is ', file.size);\n\n    const message = `Transfer file to #${ uuid } done.\\nFile: ${ file.name }`\n    writeSystemMessage(message);\n\n    return;\n  }\n\n  const chunk = file.slice(offset, offset + chunkSize);\n  reader.readAsArrayBuffer(chunk);\n}\n\nfunction isDownloadInProgress(fingerprint) {\n  return transferStore[fingerprint] || false;\n}\n\nfunction transferFile(fingerprint, file, dataChannel, uuid) {\n  transferStore[fingerprint] = true;\n\n  const reader = new FileReader();\n  const chunkSize = 16000 - HEADER_SIZE_IN_BYTES;\n  let offset = 0;\n\n  console.log('chunkSize is ', chunkSize);\n  console.log('file.size is ', file.size);\n\n  readFile(file, offset, chunkSize, reader, fingerprint, uuid);\n\n  reader.addEventListener('load', async (event) => {\n    console.log('event.target.result is ', event.target.result);\n    console.log('typeof event.target.result is ', typeof event.target.result);\n\n    const chunk = event.target.result;\n    console.log('chunk is ', chunk);\n\n    const chunkWithHeader = await concatHeaderAndChunk(fingerprint, chunk);\n    console.log('chunkWithHeader is ', chunkWithHeader);\n    console.log('chunkWithHeader.byteLength is ', chunkWithHeader.byteLength);\n\n    if (dataChannel.readyState === 'closing' || dataChannel.readyState === 'closed') {\n      return;\n    }\n\n    dataChannel.send(chunkWithHeader);\n    offset += chunkSize;\n\n    // read next chunk\n    readFile(file, offset, chunkSize, reader, fingerprint, uuid);\n  });\n}\n\nfunction handleDataChannelClose(otherUUID) {\n  if (currentDownloadJob[otherUUID]) {\n    currentDownloadJob[otherUUID].forEach(({ writer }) => {\n      writer.abort();\n      // TODO: Record File name also\n      writeSystemMessage(`Download from #${ otherUUID } Aborted`);\n    });\n\n    delete currentDownloadJob[otherUUID];\n  }\n}\n\n\nexport {\n  accumulateChunk,\n  transferFile,\n  isDownloadInProgress,\n  handleDataChannelClose,\n}\n","import { peerConnectionManager } from './peerConnection';\nimport LocalDropEvent from './LocalDropEvent';\nimport {\n  EventSendTextData,\n  EventSendFilesData,\n  EventDownloadFileData,\n  EventConnectData,\n  EventSendMessageData,\n  EventErrorData\n} from './dataSchema/LocalDropEventData';\nimport { CLIENT_EVENT_TYPE, PEER_MESSAGE_TYPE } from '../schema';\nimport websocketManager from './websocket';\nimport store from '../redux/store';\nimport {\n  addPeer,\n  deletePeer,\n  addMessage,\n  updateMyUUID,\n  addSystemMessage,\n} from '../redux/action';\nimport { parseChunkAndHeader } from './peerMessage';\nimport { getCurrentTime, generateFingerPrint } from './commonUtil';\nimport {\n  accumulateChunk,\n  transferFile,\n  isDownloadInProgress,\n  handleDataChannelClose\n} from './downloadManager';\n\nfunction sendTextToPeer(uuid, text) {\n  const event = new LocalDropEvent(\n    CLIENT_EVENT_TYPE.SEND_TEXT,\n    new EventSendTextData({ uuid, message: text }));\n\n  peerConnectionManager.dispatchEvent(event);\n}\n\nfunction sendFileToPeer(uuid, fingerprintedFile) {\n  const { file, fingerprint } = fingerprintedFile\n\n  console.log('sendFileToPeer, file is', file);\n\n  const event = new LocalDropEvent(\n    CLIENT_EVENT_TYPE.SEND_FILES,\n    new EventSendFilesData({\n      uuid,\n      message: file.name,\n      size: file.size,\n      fingerprint,\n    }));\n\n  peerConnectionManager.dispatchEvent(event);\n}\n\nfunction sendErrorToPeer(uuid, message) {\n  const event = new LocalDropEvent(\n    CLIENT_EVENT_TYPE.ERROR,\n    new EventErrorData({ uuid, message }));\n\n  peerConnectionManager.dispatchEvent(event);\n}\n\nfunction sendFilesToPeer(uuid, fingerprintedFiles) {\n  fingerprintedFiles.forEach((fingerprintedFile) => {\n    sendFileToPeer(uuid, fingerprintedFile);\n  });\n}\n\nfunction requestDownloadFile(uuid, data) {\n  const { fingerprint } = data;\n\n  const event = new LocalDropEvent(\n    CLIENT_EVENT_TYPE.DOWNLOAD_FILE,\n    new EventDownloadFileData({\n      uuid, fingerprint\n    }));\n\n  peerConnectionManager.dispatchEvent(event);\n}\n\nfunction abortDownloadFile(otherUUID) {\n  handleDataChannelClose(otherUUID);\n}\n\nfunction connectToPeer(uuid) {\n  const event = new LocalDropEvent(\n    CLIENT_EVENT_TYPE.CONNECT,\n    new EventConnectData({ uuid }));\n\n  peerConnectionManager.dispatchEvent(event);\n}\n\nfunction sendMessageToServer(message) {\n  const event = new LocalDropEvent(\n    CLIENT_EVENT_TYPE.SEND_MESSAGE,\n    new EventSendMessageData({ message }));\n\n  websocketManager.dispatchEvent(event);\n}\n\nfunction closeWebSocket() {\n  const event = new LocalDropEvent(CLIENT_EVENT_TYPE.CLOSE);\n\n  websocketManager.dispatchEvent(event);\n}\n\nfunction addJoinedPeers(peers) {\n  store.dispatch(addPeer(peers));\n}\n\nfunction deleteLeavedPeers(peers) {\n  store.dispatch(deletePeer(peers));\n}\n\nfunction addMessagePacket(message) {\n  store.dispatch(addMessage(message));\n}\n\nfunction updateUUID(uuid) {\n  store.dispatch(updateMyUUID(uuid));\n}\n\nfunction getPeerUUID() {\n  return store.getState().peerUUID;\n}\n\nfunction getMyUUID() {\n  return store.getState().myUUID;\n}\n\nfunction getFileToTransfer(fingerprint) {\n  const filesToTransfer = store.getState().filesToTransfer;\n\n  return filesToTransfer[fingerprint];\n}\n\nfunction transferFileToPeer(fingerprint, uuid) {\n  const file = getFileToTransfer(fingerprint);\n\n  if (!file) {\n    const message = `[From #${ getMyUUID() }]: ${ fingerprint } file link has expired`;\n    sendErrorToPeer(uuid, message);\n    return;\n  }\n\n  if (!peerConnectionManager.peerConnections[uuid]) {\n    // There is nothing to do in this case..\n    const systemMessage =\n      `#${ uuid } requested download but uuid not found : ` + JSON.stringify({ fingerprint, file }, undefined, 2);\n    writeSystemMessage(systemMessage);\n    return;\n  }\n\n  const { dataChannel } = peerConnectionManager.peerConnections[uuid];\n\n  if (isDownloadInProgress(fingerprint)) {\n    const { name, size, type } = file;\n    const payload = {\n      fingerprint,\n      file: { name, size, type },\n    }\n    const message = `[From #${ getMyUUID() }]: download is in progress ` + JSON.stringify(payload, undefined, 2);\n    sendErrorToPeer(uuid, message);\n    return;\n  } else {\n    transferFile(fingerprint, file, dataChannel, uuid);\n  }\n}\n\nfunction getMessagePacket(fingerprint) {\n  // TODO: Make O(1)\n\n  const messagePacket = store.getState().messagePackets.find((messagePacket) => {\n    const { data } = messagePacket;\n\n    return data.fingerprint === fingerprint;\n  });\n\n  return messagePacket;\n}\n\nfunction parsePeerChunk(chunkWithHeader) {\n  return parseChunkAndHeader(chunkWithHeader);\n}\n\nasync function writePeerChunk(chunkWithHeader, uuid) {\n  await accumulateChunk(chunkWithHeader, uuid);\n}\n\nfunction writeSystemMessage(message) {\n  const systemMessage = {\n    message,\n    fingerprint: generateFingerPrint(),\n    createdAt: getCurrentTime(),\n  };\n\n  store.dispatch(addSystemMessage(systemMessage));\n}\n\nexport {\n  sendTextToPeer,\n  sendFilesToPeer,\n  sendErrorToPeer,\n  requestDownloadFile,\n  sendMessageToServer,\n  connectToPeer,\n  closeWebSocket,\n  addJoinedPeers,\n  deleteLeavedPeers,\n  addMessagePacket,\n  updateUUID,\n  getPeerUUID,\n  getMyUUID,\n  getFileToTransfer,\n  transferFileToPeer,\n  getMessagePacket,\n  parsePeerChunk,\n  writePeerChunk,\n  writeSystemMessage,\n  abortDownloadFile,\n};\n","import {\n  ADD_PEER,\n  DELETE_PEER,\n  ADD_MESSAGE,\n  UPDATE_MY_UUID,\n  UPDATE_PEER_UUID,\n  ADD_FILES,\n  DELETE_FILES,\n  UPDATE_PROGRESS,\n  UPDATE_IS_SYSTEM_MESSAGE_SELECTED,\n  ADD_SYSTEM_MESSAGE,\n} from './actionType';\n\nexport const addPeer = peerList => ({\n  type: ADD_PEER,\n  payload: peerList,\n});\n\nexport const deletePeer = peerList => ({\n  type: DELETE_PEER,\n  payload: peerList,\n});\n\nexport const addMessage = message => ({\n  type: ADD_MESSAGE,\n  payload: message,\n});\n\nexport const updateMyUUID = uuid => ({\n  type: UPDATE_MY_UUID,\n  payload: uuid,\n});\n\nexport const updatePeerUUID = uuid => ({\n  type: UPDATE_PEER_UUID,\n  payload: uuid,\n})\n\nexport const addFiles = fingerprintedFiles => ({\n  type: ADD_FILES,\n  payload: fingerprintedFiles\n});\n\nexport const deleteFiles = files => ({\n  type: DELETE_FILES,\n  payload: files\n});\n\nexport const updateProgress = (fingerprint, progress) => ({\n  type: UPDATE_PROGRESS,\n  payload: { fingerprint, progress }\n});\n\nexport const updateIsSystemMessageTabSelected = () => ({\n  type: UPDATE_IS_SYSTEM_MESSAGE_SELECTED,\n});\n\nexport const addSystemMessage = (systemMessage) => ({\n  type: ADD_SYSTEM_MESSAGE,\n  payload: systemMessage,\n});\n","export const ADD_PEER = 'ADD_PEER';\nexport const DELETE_PEER = 'DELETE_PEER';\nexport const ADD_MESSAGE = 'ADD_MESSAGE';\nexport const UPDATE_MY_UUID = 'UPDATE_MY_UUID';\nexport const UPDATE_PEER_UUID = 'UPDATE_PEER_UUID';\nexport const ADD_FILES = 'ADD_FILES';\nexport const DELETE_FILES = 'DELETE_FILES';\nexport const UPDATE_PROGRESS = 'UPDATE_PROGRESS';\nexport const UPDATE_IS_SYSTEM_MESSAGE_SELECTED = 'UPDATE_IS_SYSTEM_MESSAGE_SELECTED';\nexport const ADD_SYSTEM_MESSAGE = 'ADD_SYSTEM_MESSAGE';\n","class LocalDropEvent {\n  constructor(eventType, data) {\n    this.type = eventType;\n\n    if (data) {\n      for (const key of Object.keys(data)) {\n        this[key] = data[key];\n      }\n    }\n  }\n\n}\n\nexport default LocalDropEvent;\n","const SOCKET_STATE = {\n  CONNECTING: 0,\n  OPEN: 1,\n  CLOSING: 2,\n  CLOSED: 3,\n};\n\nconst SOCKET_STATE_CODE = {\n  0: 'CONNECTING',\n  1: 'OPEN',\n  2: 'CLOSING',\n  3: 'CLOSED',\n}\n\n\n// 2020-06-25 13:34:55: Copied from https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent\nconst WEBSOCKET_CLOSE_EVENT_CODE = {\n  1000: {\n    name: 'Normal Closure',\n    description: 'Normal closure; the connection successfully completed whatever purpose for which it was created.'\n  },\n  1001: {\n    name: 'Going Away',\n    description: 'The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.'\n  },\n  1002: {\n    name: 'Protocol Error',\n    description: 'The endpoint is terminating the connection due to a protocol error.',\n  },\n  1003: {\n    name: 'Unsupported Data',\n    description: 'The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data).',\n  },\n  1004: {\n    name: 'Reserved',\n    description: 'Reserved. A meaning might be defined in the future.',\n  },\n  1005: {\n    name: 'No Status Received',\n    description: 'Reserved.  Indicates that no status code was provided even though one was expected.',\n  },\n  1006: {\n    name: 'Abnormal Closure',\n    description: 'Reserved. Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected.',\n  },\n  1007: {\n    name: 'Invalid frame payload data',\n    description: 'The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message).',\n  },\n  1008: {\n    name: 'Policy Violation',\n    description: 'The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable.',\n  },\n  1009: {\n    name: 'Message too big',\n    description: 'The endpoint is terminating the connection because a data frame was received that is too large.',\n  },\n  1010: {\n    name: 'Missing Extension',\n    description: 'The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn\\'t.',\n  },\n  1011: {\n    name: 'Internal Error',\n    description: 'The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.',\n  },\n  1012: {\n    name: 'Service Restart',\n    description: 'The server is terminating the connection because it is restarting.',\n  },\n  1013: {\n    name: 'Try Again Later',\n    description: 'The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients.',\n  },\n  1014: {\n    name: 'Bad Gateway',\n    description: 'The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code.',\n  },\n  1015: {\n    name: 'TLS Handshake',\n    description: 'Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can\\'t be verified).',\n  },\n}\n\nexport {\n  SOCKET_STATE,\n  WEBSOCKET_CLOSE_EVENT_CODE,\n  SOCKET_STATE_CODE,\n}","import { MESSAGE_TYPE, CLIENT_EVENT_TYPE } from '../schema';\nimport {\n  SOCKET_STATE,\n  SOCKET_STATE_CODE,\n  WEBSOCKET_CLOSE_EVENT_CODE,\n} from './dataSchema/WebSocketData';\nimport { createMessage, parseMessage } from './message';\nimport { peerConnectionManager } from './peerConnection';\nimport LocalDropEvent from './LocalDropEvent';\nimport { writeSystemMessage } from './localApi';\n\n\nfunction createWebSocketConnection(url) {\n  const socket = new WebSocket(url);\n\n  socket.addEventListener('open', async function (event) {\n    const message = createMessage(MESSAGE_TYPE.PING, { message: 'ping, hello server!' })\n    socket.send(message);\n  });\n\n  socket.addEventListener('message', async function (rawMessage) {\n    console.log('[Message form server], event is ', rawMessage);\n    console.log('[Message from server] ', rawMessage.data);\n  \n    const message = parseMessage(rawMessage.data);\n  \n    // handle message depends on messageType\n    handleMessage(message, socket);\n  });\n\n  socket.addEventListener('close', (event) => {\n    // TODO: try reconnect depend on network state and close event code\n    const { code, reason, wasClean } = event;\n    const payload = {\n      eventType: 'CLOSE',\n      code,\n      reason,\n      wasClean,\n    };\n\n    if (WEBSOCKET_CLOSE_EVENT_CODE[code]) {\n      const { name, description } = WEBSOCKET_CLOSE_EVENT_CODE[code];\n      payload.name = name;\n      payload.description = description;\n    }\n\n    const systemMessage = 'Websocket connection closed, ' + JSON.stringify(payload, undefined, 2);\n    writeSystemMessage(systemMessage);\n  });\n\n  socket.addEventListener('error', (event) => {\n    console.log('websocket error, event is ', event);\n\n    const payload = {\n      eventType: 'ERROR',\n      event,\n    };\n\n    writeSystemMessage('websocket error: ' + JSON.stringify(payload, undefined, 2));\n  })\n\n  return socket;\n}\n\nasync function handleMessage(message, socket) {\n  const { messageType, data } = message;\n\n  console.log('handleMessage, messageType is ', messageType);\n  console.log('handleMessage, data is ', data);\n\n  if (messageType === MESSAGE_TYPE.UUID) {\n    const { uuid } = data;\n\n    const event = new LocalDropEvent(messageType, { uuid });\n    peerConnectionManager.dispatchEvent(event);\n\n    return;\n  }\n\n  if (messageType === MESSAGE_TYPE.PEERS) {\n    const { peers } = data;\n\n    const event = new LocalDropEvent(messageType, { peers });\n    peerConnectionManager.dispatchEvent(event);\n\n    return;\n  }\n\n  if (messageType === MESSAGE_TYPE.JOIN) {\n    const { peers } = data;\n\n    const event = new LocalDropEvent(messageType, { peers });\n    peerConnectionManager.dispatchEvent(event);\n\n    return;\n  }\n\n  if (messageType === MESSAGE_TYPE.LEAVE) {\n    const { peers } = data;\n\n    const event = new LocalDropEvent(messageType, { peers });\n    peerConnectionManager.dispatchEvent(event);\n\n    return;\n  }\n\n\n  if (messageType === MESSAGE_TYPE.OFFER) {\n    const event = new LocalDropEvent(messageType, data);\n    peerConnectionManager.dispatchEvent(event);\n\n    return;\n  }\n\n  if (messageType === MESSAGE_TYPE.ANSWER) {\n    const event = new LocalDropEvent(messageType, data);\n    peerConnectionManager.dispatchEvent(event);\n\n    return;\n  }\n\n  if (messageType === MESSAGE_TYPE.PING) {\n    const message = createMessage(messageType, { message: \"This is client pong!\" });\n\n    socket.send(message);\n\n    return;\n  }\n\n  if (messageType === MESSAGE_TYPE.PONG) {\n    const { message } = data;\n\n    console.log(`[pong from server]: ${ message }`);\n\n    return;\n  }\n\n  if (messageType === MESSAGE_TYPE.ERROR) {\n    // show error!\n    const errorMessage = data['message'];\n\n    const event = new LocalDropEvent(messageType, {\n      message: errorMessage\n    });\n    peerConnectionManager.dispatchEvent(event);\n\n    return;\n  }\n\n  if (messageType === MESSAGE_TYPE.ICE_CANDIDATE) {\n    const event = new LocalDropEvent(messageType, data);\n\n    peerConnectionManager.dispatchEvent(event);\n    return;\n  }\n\n}\n\nfunction addCustomMessageTypeEventListener(webSocketManager) {\n  webSocketManager.addEventListener(CLIENT_EVENT_TYPE.SEND_MESSAGE, event => {\n    const { message } = event;\n\n    webSocketManager.send(message);\n  });\n\n  webSocketManager.addEventListener(CLIENT_EVENT_TYPE.CLOSE, event => {\n    webSocketManager.close();\n  })\n}\n\nfunction createWebSocketManager(url) {\n  const webSocketManager = {\n    socket: createWebSocketConnection(url),\n    state: '', // not sure. maybe doesn't need\n    events: {},\n  };\n\n  webSocketManager.addEventListener = (eventType, callback) => {\n    webSocketManager.events[eventType] = webSocketManager.events[eventType] || [];\n    webSocketManager.events[eventType].push(callback);\n  }\n\n  webSocketManager.dispatchEvent = (event) => {\n    const eventType = event.type;\n    const eventCallbacks = webSocketManager.events[eventType];\n\n    if (!eventCallbacks) {\n      console.log(`websocketManager does not handle event: ${eventType}`);\n      return;\n    }\n\n    for (const callback of eventCallbacks) {\n      callback(event);\n    }\n  }\n\n  webSocketManager.send = (message) => {\n    const socket = webSocketManager.socket;\n\n    if (socket.readyState !== SOCKET_STATE.OPEN) {\n      // TODO: Notify to user\n      const message\n        =`websocket it not opened! state: ` + SOCKET_STATE_CODE[socket.readyState];\n      writeSystemMessage(message);\n    }\n\n\n    webSocketManager.socket.send(message);\n  }\n\n  webSocketManager.close = () => {\n    webSocketManager.socket.close();\n  }\n\n  return webSocketManager;\n}\n\nconst url = process.env.REACT_APP_WEB_SOCKET_URL || 'ws://localhost:4000';\nconst websocketManager = createWebSocketManager(url);\naddCustomMessageTypeEventListener(websocketManager);\n\nexport default websocketManager;\n","import { combineReducers } from 'redux';\nimport {\n  ADD_PEER,\n  DELETE_PEER,\n  ADD_MESSAGE,\n  UPDATE_MY_UUID,\n  UPDATE_PEER_UUID,\n  ADD_FILES,\n  UPDATE_PROGRESS,\n  UPDATE_IS_SYSTEM_MESSAGE_SELECTED,\n  ADD_SYSTEM_MESSAGE,\n} from './actionType';\nimport { generateFingerPrint, getCurrentTime } from '../utils/commonUtil';\nimport { LOCALDROP_APP_VERSION } from '../constants/constant';\n\nconst initialState = { peers: [], message: [] }\n\nfunction localDropState(state = initialState, action) {\n  console.log('localDropReducer is called ', state);\n  console.log('action is ', action);\n\n  if (action.type === ADD_PEER) {\n    // naive implementation\n    const newState = { ...state };\n    const peers = action.payload;\n\n    console.log('ADD_PEER!!!');\n    newState.peers = [...newState.peers, ...peers ];\n    console.log('ADD_PEER!!!, ', newState);\n\n    return newState;\n  } else if (action.type === DELETE_PEER) {\n    // naive implementation\n    const newState = { ...state };\n    const peerSet = new Set(action.payload);\n\n    console.log('peerSet is ', peerSet);\n\n    const newPeers = newState.peers.filter(peer => !peerSet.has(peer));\n    console.log('newPeers is ', newPeers);\n    newState.peers = newPeers;\n\n    return newState;\n  }\n\n  return state;\n}\n\nfunction messagePackets(state = [], action) {\n  if (action.type === ADD_MESSAGE) {\n    const message = action.payload;\n    const newState = [ ...state, message ];\n\n    return newState;\n  }\n\n  return state;\n}\n\nfunction messageProgresses(state = {}, action) {\n  if (action.type === UPDATE_PROGRESS) {\n    const newState = { ...state };\n    const { fingerprint, progress } = action.payload;\n\n    if (newState[fingerprint]) {\n      newState[fingerprint] = progress;\n    }\n\n    return newState;\n  }\n\n  return state;\n}\n\nfunction myUUID(state = null, action) {\n  if (action.type === UPDATE_MY_UUID) {\n    const newState = action.payload;\n\n    return newState;\n  }\n\n  return state;\n}\n\nfunction peerUUID(state = null, action) {\n  if (action.type === UPDATE_PEER_UUID) {\n    const newState = action.payload;\n\n    return newState;\n  }\n\n  if (action.type === DELETE_PEER) {\n    const peers = action.payload;\n\n    if (peers.indexOf(state) !== -1) {\n      return null;\n    }\n  }\n\n  return state;\n}\n\nfunction filesToTransfer(state = {}, action) {\n  if (action.type === ADD_FILES) {\n    const fingerprintedFiles = action.payload;\n\n    const newState = { ...state };\n\n    fingerprintedFiles.forEach((fingerprintedFile) => {\n      const { file, fingerprint } = fingerprintedFile;\n\n      newState[fingerprint] = file;\n    });\n\n    return newState;\n  }\n\n  return state;\n}\n\nfunction systemMessageMetaData(\n  state = { isSelected: false, isRead: true }, action) {\n\n  if (action.type === UPDATE_IS_SYSTEM_MESSAGE_SELECTED) {\n    const newState = { ...state };\n\n    newState.isSelected = !newState.isSelected;\n    newState.isRead = newState.isSelected ? true : newState.isRead;\n\n    return newState;\n  }\n\n  if (action.type === ADD_SYSTEM_MESSAGE) {\n    const newState = { ...state };\n    newState.isRead = newState.isSelected ? true : false;\n\n    return newState;\n  }\n\n  return state;\n\n}\n\nconst defaultSystemMessage = {\n  message: `App version: ${ LOCALDROP_APP_VERSION }\\n\\nHi, This is the first system message!`,\n  fingerprint: generateFingerPrint(),\n  createdAt: getCurrentTime(),\n};\n\nfunction systemMessages(state = [defaultSystemMessage], action) {\n  if (action.type === ADD_SYSTEM_MESSAGE) {\n    const systemMessage = action.payload;\n    const newState = [ systemMessage, ...state ];\n\n    return newState;\n  }\n\n  return state;\n}\n\n\nexport default combineReducers({\n  localDropState,\n  messagePackets,\n  myUUID,\n  peerUUID,\n  filesToTransfer,\n  messageProgresses,\n  systemMessageMetaData,\n  systemMessages,\n});\n\n","export const IMAGE_URL = 'asset';\nexport const FINGERPRINT_SIZE = 35\nexport const HEADER_SIZE_IN_BYTES = FINGERPRINT_SIZE;\nexport const LOCALDROP_APP_VERSION = process.env.REACT_APP_VERSION_NUMBER || 'v0.1.0';\n","import { createStore } from 'redux';\nimport rootReducer from \"./reducer\";\n\nexport default createStore(rootReducer);\n","import { closeWebSocket } from './localApi';\n\nwindow.addEventListener('beforeunload', (event) => {\n  console.log('beforeunload');\n  closeWebSocket();\n});\n","export const colorCheckBoxBorder = '#757575';\nexport const TabSmall2Width = 40;\nexport const TabSmallWidth = 50;\nexport const TabDefaultWidth = 100;\nexport const TabContentWidth = 200;\nexport const mobileWidth = '620px'\n\nexport const MaterialThemeOceanic = {\n  'Background': '#263238',\n  'Foreground': '#B0BEC5',\n  'Text': '#607D8B',\n  'SelectionBackground': '#546E7A',\n  'SelectionForeground': '#FFFFFF',\n  'Buttons': '#2E3C43',\n  'SecondBackground': '#32424A',\n  'Disabled': '#415967',\n  'Contrast': '#1E272C',\n  'Active': '#314549',\n  'Border': '#2A373E',\n  'Highlight': '#425B67',\n  'Tree': '#546E7A',\n  'Notifications': '#1E272C',\n  'AccentColor': '#009688',\n  'ExcludedFilesColor': '#2E3C43',\n  'CommentsColor': '#546e7a',\n  'LinksColor': '#80cbc4',\n  'FunctionsColor': '#82aaff',\n  'KeywordsColor': '#c792ea',\n  'TagsColor': '#f07178',\n  'StringsColor': '#c3e88d',\n  'OperatorsColor': '#89ddff',\n  'AttributesColor': '#ffcb6b',\n  'NumbersColor': '#f78c6c',\n  'ParametersColor': '#f78c6c',\n\n  // Custom Color\n  'SecondText': '#FFFFFF',\n  'ContrastBackground': '#000000',\n};\n\nexport const MaterialThemePalenight = {\n  'Background': '#292D3E',\n  'Foreground': '#A6ACCD',\n  'Text': '#676E95',\n  'SelectionBackground': '#3C435E',\n  'SelectionForeground': '#FFFFFF',\n  'Buttons': '#303348',\n  'SecondBackground': '#34324a',\n  'Disabled': '#515772',\n  'Contrast': '#202331',\n  'Active': '#414863',\n  'Border': '#2b2a3e',\n  'Highlight': '#444267',\n  'Tree': '#676E95',\n  'Notifications': '#202331',\n  'AccentColor': '#ab47bc',\n  'ExcludedFilesColor': '#2f2e43',\n  'CommentsColor': '#676E95',\n  'LinksColor': '#80cbc4',\n  'FunctionsColor': '#82aaff',\n  'KeywordsColor': '#c792ea',\n  'TagsColor': '#f07178',\n  'StringsColor': \"#c3e88d\",\n  'OperatorsColor': '#89ddff',\n  'AttributesColor': '#ffcb6b',\n  'NumbersColor': '#f78c6c',\n  'ParametersColor': '#f78c6c',\n\n  // Custom Color\n  'SecondText': '#FFFFFF',\n  'ContrastBackground': '#000000',\n};\n\nexport const MaterialThemeGithub = {\n  'Background': '#F7F8FA',\n  'Foreground': '#5B6168',\n  'Text': '#292D31',\n  'SelectionBackground': '#3A66D1',\n  'SelectionForeground': '#FFFFFF',\n  'Buttons': '#F1F3F6',\n  'SecondBackground': '#F7F8FA',\n  'Disabled': '#6C737C',\n  'Contrast': '#FFFFFF',\n  'Active': '#cce5ff',\n  'Border': '#DFE1E4',\n  'Highlight': '#CCE5FF',\n  'Tree': '#3A66D1',\n  'Notifications': '#DFECFE',\n  'AccentColor': '#79CB60',\n  'ExcludedFilesColor': '#FDFDFD',\n  'CommentsColor': '#6A737D',\n  'LinksColor': '#005CC5',\n  'FunctionsColor': '#6F42C1',\n  'KeywordsColor': '#D73A49',\n  'TagsColor': '#22863A',\n  'StringsColor': '#032F62',\n  'OperatorsColor': '#D73A49',\n  'AttributesColor': '#6F42C1',\n  'NumbersColor': '#005CC5',\n  'ParametersColor': '#E36209',\n\n  // Custom Color\n  'SecondText': '#000000',\n  'ContrastBackground': '#FFFFFF',\n};\n\nexport const MaterialThemeDarker = {\n  Background: '#212121',\n  Foreground: '#B0BEC5',\n  Text: '#727272',\n  SelectionBackground: '#353535',\n  SelectionForeground: '#FFFFFF',\n  Buttons: '#2A2A2A',\n  SecondBackground: '#292929',\n  Disabled: '#474747',\n  Contrast: '#1A1A1A',\n  Active: '#323232',\n  Border: '#292929',\n  Highlight: '#3F3F3F',\n  Tree: '#323232',\n  Notifications: '#1A1A1A',\n  AccentColor: '#FF9800',\n  ExcludedFilesColor: '#323232',\n  CommentsColor: '#616161',\n  LinksColor: '#80cbc4',\n  FunctionsColor: '#82aaff',\n  KeywordsColor: '#c792ea',\n  TagsColor: '#f07178',\n  StringsColor: '#c3e88d',\n  OperatorsColor: '#89ddff',\n  AttributesColor: '#ffcb6b',\n  NumbersColor: '#f78c6c',\n  ParametersColor: '#f78c6c',\n\n  // Custom Color\n  'SecondText': '#FFFFFF',\n  'ContrastBackground': '#000000',\n}\n\nexport const MaterialThemeDeepOcean = {\n  Background: '#0F111A',\n  Foreground: '#8F93A2',\n  Text: '#4B526D',\n  SelectionBackground: '#232632',\n  SelectionForeground: '#FFFFFF',\n  Buttons: '#191A21',\n  SecondBackground: '#181A1F',\n  Disabled: '#464B5D',\n  Contrast: '#090B10',\n  Active: '#1A1C25',\n  Border: '#0F111A',\n  Highlight: '#1F2233',\n  Tree: '#717CB4',\n  Notifications: '#090B10',\n  AccentColor: '#84ffff',\n  ExcludedFilesColor: '#292D3E',\n  CommentsColor: '#717CB4',\n  LinksColor: '#80cbc4',\n  FunctionsColor: '#82aaff',\n  KeywordsColor: '#c792ea',\n  TagsColor: '#f07178',\n  StringsColor: '#c3e88d',\n  OperatorsColor: '#89ddff',\n  AttributesColor: '#ffcb6b',\n  NumbersColor: '#f78c6c',\n  ParametersColor: '#F59762',\n\n  // Custom Color\n  'SecondText': '#FFFFFF',\n  'ContrastBackground': '#000000',\n};\n\nexport const ThemeMonoKaiPro = {\n  Background: '#2D2A2E',\n  Foreground: '#fcfcfa',\n  Text: '#939293',\n  SelectionBackground: '#5B595C',\n  SelectionForeground: '#ffd866',\n  Buttons: '#403E41',\n  SecondBackground: '#403E41',\n  Disabled: '#727072',\n  Contrast: '#221F22',\n  Active: '#4A474B',\n  Border: '#2d2a2e',\n  Highlight: '#5b595c',\n  Tree: '#403E41',\n  Notifications: '#363437',\n  AccentColor: '#ffd866',\n  ExcludedFilesColor: '#3a3a3c',\n  CommentsColor: '#727072',\n  LinksColor: '#78DCE8',\n  FunctionsColor: '#A9DC76',\n  KeywordsColor: '#FF6188',\n  TagsColor: '#FF6188',\n  StringsColor: '#FFD866',\n  OperatorsColor: '#FF6188',\n  AttributesColor: '#78DCE8',\n  NumbersColor: '#AB9DF2',\n  ParametersColor: '#F59762',\n\n  // Custom Color\n  'SecondText': '#FFFFFF',\n  'ContrastBackground': '#000000',\n};\n\nexport const MaterialThemeLighter = {\n  Background: '#FAFAFA',\n  Foreground: '#546E7A',\n  Text: '#94A7B0',\n  SelectionBackground: '#80CBC4',\n  SelectionForeground: '#546e7a',\n  Buttons: '#F3F4F5',\n  SecondBackground: '#eae8e8',\n  Disabled: '#D2D4D5',\n  Contrast: '#F4F4F4',\n  Active: '#E7E7E8',\n  Border: '#d3e1e8',\n  Highlight: '#E7E7E8',\n  Tree: '#80CBC4',\n  Notifications: '#eae8e8',\n  AccentColor: '#00BCD4',\n  ExcludedFilesColor: '#eae8e8',\n  CommentsColor: '#AABFC9',\n  LinksColor: '#39ADB5',\n  FunctionsColor: '#6182B8',\n  KeywordsColor: '#7C4DFF',\n  TagsColor: '#E53935',\n  StringsColor: '#91B859',\n  OperatorsColor: '#39ADB5',\n  AttributesColor: '#F6A434',\n  NumbersColor: '#F76D47',\n  ParametersColor: '#F76D47',\n\n  // Custom Color\n  'SecondText': '#000000',\n  'ContrastBackground': '#FFFFFF',\n};\n\nexport const ThemeOneLight = {\n  Background: '#FAFAFA',\n  Foreground: '#232324',\n  Text: '#9D9D9F',\n  SelectionBackground: '#DBDBDC',\n  SelectionForeground: '#232324',\n  Buttons: '#DBDBDC',\n  SecondBackground: '#EAEAEB',\n  Disabled: '#424243',\n  Contrast: '#FFFFFF',\n  Active: '#DBDBDC',\n  Border: '#DBDBDC',\n  Highlight: '#EAEAEB',\n  Tree: '#DBDBDC',\n  Notifications: '#F2F2F2',\n  AccentColor: '#2979ff',\n  ExcludedFilesColor: '#DBDBDC',\n  CommentsColor: '#A0A1A7',\n  LinksColor: '#0184BC',\n  FunctionsColor: '#4078F2',\n  KeywordsColor: '#A626A4',\n  TagsColor: '#E4564A',\n  StringsColor: '#50A14E',\n  OperatorsColor: '#4078F2',\n  AttributesColor: '#C18401',\n  NumbersColor: '#986801',\n  ParametersColor: '#383A42',\n\n  // Custom Color\n  'SecondText': '#000000',\n  'ContrastBackground': '#FFFFFF',\n}\n\nexport const SolarizedLight = {\n  Background: '#fdf6e3',\n  Foreground: '#586e75',\n  Text: '#93a1a1',\n  SelectionBackground: '#93a1a1',\n  SelectionForeground: '#002b36',\n  Buttons: '#FEFBF1',\n  SecondBackground: '#F6F0DE',\n  Disabled: '#C9CCC3',\n  Contrast: '#eee8d5',\n  Active: '#F6F0DE',\n  Border: '#edead9',\n  Highlight: '#F6F0DE',\n  Tree: '#93a1a1',\n  Notifications: '#EDE8D4',\n  AccentColor: '#d33682',\n  ExcludedFilesColor: '#E3DCC9',\n  CommentsColor: '#93A1A1',\n  LinksColor: '#268BD2',\n  FunctionsColor: '#B58900',\n  KeywordsColor: '#859900',\n  TagsColor: '#268BD2',\n  StringsColor: '#2AA198',\n  OperatorsColor: '#657B83',\n  AttributesColor: '#657B83',\n  NumbersColor: '#D33682',\n  ParametersColor: '#657B83',\n\n  // Custom Color\n  'SecondText': '#000000',\n  'ContrastBackground': '#FFFFFF',\n};\n\nexport const ThemeDracula = {\n  Background: '#282A36',\n  Foreground: '#F8F8F2',\n  Text: '#6272A4',\n  SelectionBackground: '#44475A',\n  SelectionForeground: '#8BE9FD',\n  Buttons: '#393C4B',\n  SecondBackground: '#282A36',\n  Disabled: '#6272A4',\n  Contrast: '#191A21',\n  Active: '#44475A',\n  Border: '#21222C',\n  Highlight: '#6272A4',\n  Tree: '#44475A',\n  Notifications: '#1D2228',\n  AccentColor: '#FF79C5',\n  ExcludedFilesColor: '#34353D',\n  CommentsColor: '#6272A4',\n  LinksColor: '#F1FA8C',\n  FunctionsColor: '#50FA78',\n  KeywordsColor: '#FF79C6',\n  TagsColor: '#FF79C6',\n  StringsColor: '#F1FA8C',\n  OperatorsColor: '#FF79C6',\n  AttributesColor: '#50FA7B',\n  NumbersColor: '#BD93F9',\n  ParametersColor: '#FFB86C',\n\n  // Custom Color\n  'SecondText': '#FFFFFF',\n  'ContrastBackground': '#000000',\n};\n\nexport const ThemeArcDark = {\n  Background: '#2f343f',\n  Foreground: '#D3DAE3',\n  Text: '#8b9eb5',\n  SelectionBackground: '#8888FF',\n  SelectionForeground: '#FFFFFF',\n  Buttons: '#383C4A',\n  SecondBackground: '#393f4c',\n  Disabled: '#D3DAE3',\n  Contrast: '#262b33',\n  Active: '#41416A',\n  Border: '#404552',\n  Highlight: '#3F3F46',\n  Tree: '#08507C',\n  Notifications: '#262a33',\n  AccentColor: '#42A5F5',\n  ExcludedFilesColor: '#474B57',\n  CommentsColor: '#747C84',\n  LinksColor: '#7587A6',\n  FunctionsColor: '#7587A6',\n  KeywordsColor: '#9B859D',\n  TagsColor: '#CF6A4C',\n  StringsColor: '#8F9D6A',\n  OperatorsColor: '#A7A7A7',\n  AttributesColor: '#F9EE98',\n  NumbersColor: '#CDA869',\n  ParametersColor: '#CDA869',\n\n  // Custom Color\n  'SecondText': '#FFFFFF',\n  'ContrastBackground': '#000000',\n};\n\nexport const ThemeOneDark = {\n  Background: '#282C34',\n  Foreground: '#979FAD',\n  Text: '#979FAD',\n  SelectionBackground: '#3A3F4B',\n  SelectionForeground: '#FFFFFF',\n  Buttons: '#3A3F4B',\n  SecondBackground: '#2F333D',\n  Disabled: '#6B727D',\n  Contrast: '#21252B',\n  Active: '#383E49',\n  Border: '#282C34',\n  Highlight: '#383D48',\n  Tree: '#3A3F4B',\n  Notifications: '#282C34',\n  AccentColor: '#2979ff',\n  ExcludedFilesColor: '#3c4150',\n  CommentsColor: '#59626F',\n  LinksColor: '#56B6C2',\n  FunctionsColor: '#61AEEF',\n  KeywordsColor: '#C679DD',\n  TagsColor: '#F07178',\n  StringsColor: '#98C379',\n  OperatorsColor: '#61AFEF',\n  AttributesColor: '#E5C17C',\n  NumbersColor: '#D19A66',\n  ParametersColor: '#ABB2BF',\n\n  // Custom Color\n  'SecondText': '#FFFFFF',\n  'ContrastBackground': '#000000',\n};\n\nexport const ThemeNightOwl = {\n  Background: '#011627',\n  Foreground: '#d6deeb',\n  Text: '#5f7e97',\n  SelectionBackground: '#1d3b53FF',\n  SelectionForeground: '#FFFFFF',\n  Buttons: '#0b253a',\n  SecondBackground: '#0b2942',\n  Disabled: '#697098',\n  Contrast: '#010e1a',\n  Active: '#234d70',\n  Border: '#122d42',\n  Highlight: '#084d81',\n  Tree: '#234d70',\n  Notifications: '#01111d',\n  AccentColor: '#7e57c2',\n  ExcludedFilesColor: '#0e293f',\n  CommentsColor: '#637777',\n  LinksColor: '#ecc48d',\n  FunctionsColor: '#B58900',\n  KeywordsColor: '#c792ea',\n  TagsColor: '#7fdbca',\n  StringsColor: '#ecc48d',\n  OperatorsColor: '#c792ea',\n  AttributesColor: '#ef5350',\n  NumbersColor: '#f78c6c',\n  ParametersColor: '#d6deeb',\n\n  // Custom Color\n  'SecondText': '#FFFFFF',\n  'ContrastBackground': '#000000',\n};\n\nexport const ThemeLightOwl = {\n  Background: '#F0F0F0',\n  Foreground: '#403f53',\n  Text: '#90A7B2',\n  SelectionBackground: '#E0E0E0',\n  SelectionForeground: '#403f53',\n  Buttons: '#d9d9d9',\n  SecondBackground: '#FBFBFB',\n  Disabled: '#93A1A1',\n  Contrast: '#D0D0D0',\n  Active: '#d3e8f8',\n  Border: '#d9d9d9',\n  Highlight: '#CCCCCC',\n  Tree: '#7cd3e8',\n  Notifications: '#F0F0F0',\n  AccentColor: '#2AA298',\n  ExcludedFilesColor: '#E0E7EA',\n  CommentsColor: '#989fb1',\n  LinksColor: '#ff869a',\n  FunctionsColor: '#4876d6',\n  KeywordsColor: '#994cc3',\n  TagsColor: '#994cc3',\n  StringsColor: '#c96765',\n  OperatorsColor: '#994cc3',\n  AttributesColor: '#0c969b',\n  NumbersColor: '#aa0982',\n  ParametersColor: '#0c969b',\n\n  // Custom Color\n  'SecondText': '#000000',\n  'ContrastBackground': '#FFFFFF',\n}\n\n\nexport const ColorThemes = {\n  MaterialThemeOceanic,\n  MaterialThemePalenight,\n  MaterialThemeDarker,\n  MaterialThemeDeepOcean,\n  ThemeOneLight,\n  ThemeMonoKaiPro,\n  MaterialThemeLighter,\n  SolarizedLight,\n  ThemeDracula,\n  ThemeArcDark,\n  ThemeOneDark,\n  ThemeNightOwl,\n  ThemeLightOwl,\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M409.132,114.573c-19.608-33.596-46.205-60.194-79.798-79.8C295.736,15.166,259.057,5.365,219.271,5.365 c-39.781,0-76.472,9.804-110.063,29.408c-33.596,19.605-60.192,46.204-79.8,79.8C9.803,148.168,0,184.854,0,224.63 c0,47.78,13.94,90.745,41.827,128.906c27.884,38.164,63.906,64.572,108.063,79.227c5.14,0.954,8.945,0.283,11.419-1.996 c2.475-2.282,3.711-5.14,3.711-8.562c0-0.571-0.049-5.708-0.144-15.417c-0.098-9.709-0.144-18.179-0.144-25.406l-6.567,1.136 c-4.187,0.767-9.469,1.092-15.846,1c-6.374-0.089-12.991-0.757-19.842-1.999c-6.854-1.231-13.229-4.086-19.13-8.559 c-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559 c-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-0.951-2.568-2.098-3.711-3.429c-1.142-1.331-1.997-2.663-2.568-3.997 c-0.572-1.335-0.098-2.43,1.427-3.289c1.525-0.859,4.281-1.276,8.28-1.276l5.708,0.853c3.807,0.763,8.516,3.042,14.133,6.851 c5.614,3.806,10.229,8.754,13.846,14.842c4.38,7.806,9.657,13.754,15.846,17.847c6.184,4.093,12.419,6.136,18.699,6.136 c6.28,0,11.704-0.476,16.274-1.423c4.565-0.952,8.848-2.383,12.847-4.285c1.713-12.758,6.377-22.559,13.988-29.41 c-10.848-1.14-20.601-2.857-29.264-5.14c-8.658-2.286-17.605-5.996-26.835-11.14c-9.235-5.137-16.896-11.516-22.985-19.126 c-6.09-7.614-11.088-17.61-14.987-29.979c-3.901-12.374-5.852-26.648-5.852-42.826c0-23.035,7.52-42.637,22.557-58.817 c-7.044-17.318-6.379-36.732,1.997-58.24c5.52-1.715,13.706-0.428,24.554,3.853c10.85,4.283,18.794,7.952,23.84,10.994 c5.046,3.041,9.089,5.618,12.135,7.708c17.705-4.947,35.976-7.421,54.818-7.421s37.117,2.474,54.823,7.421l10.849-6.849 c7.419-4.57,16.18-8.758,26.262-12.565c10.088-3.805,17.802-4.853,23.134-3.138c8.562,21.509,9.325,40.922,2.279,58.24 c15.036,16.18,22.559,35.787,22.559,58.817c0,16.178-1.958,30.497-5.853,42.966c-3.9,12.471-8.941,22.457-15.125,29.979 c-6.191,7.521-13.901,13.85-23.131,18.986c-9.232,5.14-18.182,8.85-26.84,11.136c-8.662,2.286-18.415,4.004-29.263,5.146 c9.894,8.562,14.842,22.077,14.842,40.539v60.237c0,3.422,1.19,6.279,3.572,8.562c2.379,2.279,6.136,2.95,11.276,1.995 c44.163-14.653,80.185-41.062,108.068-79.226c27.88-38.161,41.825-81.126,41.825-128.906 C438.536,184.851,428.728,148.168,409.132,114.573z\"\n}));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"g\", null);\n\nvar SvgGithubLogo = function SvgGithubLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"438.549px\",\n    height: \"438.549px\",\n    viewBox: \"0 0 438.549 438.549\",\n    style: {\n      enableBackground: \"new 0 0 438.549 438.549\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgGithubLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/github-logo.76d344f0.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { mobileWidth } from '../constants/styleConstants';\nimport { ReactComponent as GithubLogo } from '../assets/github-logo.svg';\n\nconst Header = styled.div`\n  display: flex;\n  text-align: center;\n  font-size: 26px;\n  height: 60px;\n  background: ${ props => props.theme.Background };\n\n  .localdrop-header-title {\n    display: flex;\n    height: 100%;\n    align-items: center;\n    margin-left: 20px;\n    flex-grow: 1;\n    text-align: left;\n    color: ${ props => props.theme.StringsColor };\n    font-weight: bold;\n  }\n\n  .localdrop-header-github {\n    display: flex;\n    font-size: 18px;\n    justify-content: center;\n    align-items: center;\n    margin-right: 20px;\n    color: ${ props => props.theme.StringsColor };\n    cursor: pointer;\n\n    svg {\n      width: 24px;\n      height: 24px;\n      margin-right: 12px;\n      fill: ${ props => props.theme.SecondText };\n    }\n  }\n\n  @media (max-width: ${ mobileWidth }) {\n    display: flex;\n    height: 50px;\n    text-align: left;\n\n    .localdrop-header-title {\n      margin-left: 10px;\n      font-size: 18px;\n    }\n\n    .localdrop-header-github {\n      font-size: 14px;\n      margin-right: 10px;\n\n      svg {\n        width: 16px;\n        height: 16px;\n        margin-right: 6px;\n      }\n    }\n  }\n`;\n\n\nclass HeaderComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onClickRepo = this.onClickRepo.bind(this);\n  }\n\n  onClickRepo() {\n    window.open('https://github.com/24seconds/localdrop', '_blank');\n  }\n\n  render() {\n    return (\n      <Header className='localdrop-header' >\n        <div className='localdrop-header-title'>\n          Local Drop!\n        </div>\n        <div className='localdrop-header-github' onClick={ this.onClickRepo }>\n          <GithubLogo/>\n          localdrop\n        </div>\n      </Header>\n    );\n  }\n}\n\n\nexport default HeaderComponent;\n","import React, { Component } from 'react';\nimport styled, { withTheme } from 'styled-components';\n\nconst Switch = styled.div`\n  display: flex;\n  align-items: center;\n\n  .localdrop-animation-switch {\n    display: inline-block;\n    box-sizing: border-box;\n    width: 60px;\n    height: 30px;\n    background-color: ${ props => props.theme.Disabled };\n    padding: 3px;\n    cursor: pointer;\n    border: solid 2px ${ props => props.theme.Border };\n    border-radius: 4px;\n\n    &.on {\n      background-color: ${ props => props.theme.Active };\n    }\n\n    .slider-container {\n      width: 100%;\n      height: 100%;\n      position: relative;\n      \n\n      .slider {\n        display: flex;\n        align-items: center;\n        font-size: 20px;\n        justify-content: center;\n        background-color: ${ props => props.theme.SecondText };\n        color: ${ props => props.theme.Notifications };\n        width: 50%;\n        height: 100%;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        transition: .3s;\n        border-radius: 4px;\n\n        user-select: none;\n\n        &.on {\n          transform: translate3d(100%, 0, 0);\n        }\n      }\n    }\n  }\n`;\n\nexport default class ToggleSwitch extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onAnimationToggle = this.onAnimationToggle.bind(this);\n  }\n\n  onAnimationToggle() {\n    const { onClick } = this.props;\n\n    onClick();\n  }\n\n  render() {\n    const { isSwitchOn, isRead } = this.props;\n\n    return (\n      <Switch>\n        <div className= { `localdrop-animation-switch ${ isSwitchOn ? 'on' : 'off' }` }\n          onClick={ this.onAnimationToggle }>\n          <div className='slider-container'>\n            <div className={ `slider ${ isSwitchOn ? 'on' : 'off' }` }>\n              { isRead ? '' : '!' }\n            </div>\n          </div>\n        </div>\n      </Switch>\n    );\n  }\n}\n","import React, { Component, Fragment } from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport { connectToPeer } from '../../utils/localApi';\nimport { updatePeerUUID, updateIsSystemMessageTabSelected } from '../../redux/action';\nimport { mobileWidth } from '../../constants/styleConstants';\nimport ToggleSwitch from '../ToggleSwitch';\n\nconst PeerTab = styled.div`\n  background: ${ props => props.theme.SelectionBackground };\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  height: 50px;\n\n`;\n\nconst PeerList = styled.div`\n  display: flex;\n  flex-grow: 1;\n\n  overflow-x: scroll;\n  scrollbar-width: none; /* Firefox */\n\n  ::-webkit-scrollbar { /* WebKit */\n    width: 0;\n    height: 0;\n  }\n`;\n\nconst SystemMessageTab = styled.div`\n  position:relative;\n  display: flex;\n  align-items: center;\n  border-radius: 4px;\n  height: 40px;\n  margin-right: 5px;\n`;\n\nconst ConnectivityState = styled.div`\n  margin: 10px 0;\n  // TODO: Change color to Material color\n  border: solid 1px green;\n\n  button {\n    margin-left: 16px;\n  }\n`;\n\nconst PeerTabButton = styled.button`\n  width: 100px;\n  height: 40px;\n  font-size: 14px;\n  margin: 0 5px;\n  background-color: ${\n    props => props.isSelected\n    ? props => props.theme.SelectionForeground\n    : props => props.theme.Disabled };\n  border: solid 2px ${ props => props.theme.Border };\n  border-radius: 4px;\n  outline: none;\n  color: ${ props => props.theme.Contrast };\n\n  &:hover {\n    cursor: pointer;\n    opacity: 0.7;\n  }\n\n  @media (max-width: ${ mobileWidth }) {\n    width: 80px;\n    height: 30px;\n    font-size: 12px;\n  }\n`;\n\nconst Peers = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 80px;\n  height: 40px;\n  font-size: 16px;\n  background: ${ props => props.theme.SecondBackground };\n  margin: 0 0 0 5px;\n  border: solid 2px ${ props => props.theme.Border };\n  border-radius: 4px;\n  color: ${ props => props.theme.FunctionsColor };\n\n  @media (max-width: ${ mobileWidth }) {\n    width: 50px;\n    height: 30px;\n    font-size: 12px;\n  }\n`;\n\n\nclass PeerTabComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onClick = this.onClickPeer.bind(this);\n    this.onClickSystemMessageTab = this.onClickSystemMessageTab.bind(this);\n  }\n\n  onClickPeer(uuid) {\n    console.log('uuid is ', uuid);\n\n    this.props.dispatch(updatePeerUUID(uuid));\n    connectToPeer(uuid);\n  }\n\n  onClickSystemMessageTab() {\n    this.props.dispatch(updateIsSystemMessageTabSelected());\n  }\n\n  render() {\n    const {\n      peers,\n      peerUUID: selectedPeerUUID,\n      systemMessageMetaData,\n    } = this.props;\n\n    console.log('this.props is ', this.props);\n    console.log('peers is ', peers);\n\n    return (\n      <Fragment>\n        <PeerTab className='localdrop-peer-tab'>\n          <Peers>PEERS :</Peers>\n          {\n            false &&\n            <PeerTabButton key='ALL' disabled={ false }>\n              ALL\n            </PeerTabButton>\n          }\n          {\n            <PeerList>\n              {\n                peers && peers.map(peer => {\n                  return (\n                    <PeerTabButton\n                      key={ peer }\n                      isSelected={ peer === selectedPeerUUID }\n                      onClick={ this.onClickPeer.bind(this, peer) }>\n                      { `#${peer}` }\n                    </PeerTabButton>\n                  )\n                })\n              }\n            </PeerList>\n          }\n          <SystemMessageTab isRead={ systemMessageMetaData.isRead }>\n            <ToggleSwitch\n              key='System-Message-toggle'\n              isSwitchOn={ systemMessageMetaData.isSelected }\n              isRead={ systemMessageMetaData.isRead }\n              onClick={ this.onClickSystemMessageTab } />\n          </SystemMessageTab>\n        </PeerTab>\n        {\n          false &&\n          <ConnectivityState className='localdrop-connectivity-state'>\n            Peer Connection State: Connected, <button> Retry </button>\n          </ConnectivityState>\n        }\n      </Fragment>\n    )\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  peers: state.localDropState.peers,\n  peerUUID: state.peerUUID,\n  systemMessageMetaData: state.systemMessageMetaData,\n});\nexport default connect(mapStateToProps)(PeerTabComponent);\n","import { css } from 'styled-components';\nimport {\n  mobileWidth,\n  TabDefaultWidth,\n} from '../constants/styleConstants';\n\nexport const messageCell = css`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: solid 1px ${ props => props.theme.Border };\n  border-top: none;\n  padding: ${props => props.padding || '0 10px' };\n  height: 30px;\n  font-size: 16px;\n  width: ${props => props.width || TabDefaultWidth }px;\n  min-width: ${props => props.width || TabDefaultWidth }px;\n  max-width: ${props => props.width || TabDefaultWidth }px;\n`\nexport const rippleEffect = css`\n  background-position: center;\n  transition: background 0.3s;\n\n  &:hover {\n    cursor: pointer;\n    opacity: 0.8;\n    background: ${ props => props.theme.Buttons }\n        radial-gradient(circle, transparent 1%, ${ props => props.theme.Active } 1%)\n        center/15000%;\n  }\n\n  &:active {\n    background-color: ${ props => props.theme.Contrast };\n    background-size: 100%;\n    transition: background 0s;\n  }\n\n  @media (max-width: ${ mobileWidth }) {\n    &:focus {\n    -webkit-tap-highlight-color: transparent;\n    outline: none;\n    -ms-touch-action: manipulation;\n    touch-action: manipulation;\n  }\n  }\n`;\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport { mobileWidth } from '../../constants/styleConstants';\nimport { rippleEffect } from '../SharedStyle';\n\n\nconst MetaData = styled.div`\n  display: flex;\n  align-items: center;\n  height: 40px;\n`;\n\nconst OtherMetadata = styled.div`\n  display: flex;\n  flex-grow: 1;\n  justify-content: flex-end;\n`;\n\nconst ThemeColorButton = styled.button`\n  height: 30px;\n  margin: 0 5px;\n  outline: none;\n  border: solid 2px ${ props => props.theme.Border };\n  border-radius: 4px;\n  background-color: ${ props => props.theme.Buttons };\n  color: ${ props => props.theme.AttributesColor };\n\n  ${ rippleEffect };\n`;\n\nconst MyUUID = styled.div`\n  display: flex;\n  height: 30px;\n  align-items: center;\n  font-size: 14px;\n  color: ${ props => props.theme.StringsColor };\n  background-color: ${ props => props.theme.SecondBackground };\n\n  span {\n    margin-right: 8px;\n    margin: 0 8px 0 10px;\n    color: ${ props => props.theme.ParametersColor };\n  }\n\n  @media (max-width: ${ mobileWidth }) {\n    height: 25px;\n  }\n`;\n\nclass MetaDataComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onClickColorThemeButton = this.onClickColorThemeButton.bind(this);\n  }\n\n  // TODO: Give Theme Select option to user later\n  onClickColorThemeButton() {\n    const { onChangeTheme } = this.props;\n\n    if (onChangeTheme) {\n      onChangeTheme();\n    }\n  }\n\n  render() {\n    const { myUUID } = this.props\n\n    return (\n      <MetaData>\n        <MyUUID>\n          <span>My uuid:</span>\n          { `${ myUUID ? ('#'+ myUUID) : '' }` }\n        </MyUUID>\n        <OtherMetadata>\n          <ThemeColorButton onClick={ this.onClickColorThemeButton } >\n            Change Color Theme\n          </ThemeColorButton>\n        </OtherMetadata>\n      </MetaData>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  myUUID: state.myUUID,\n});\nexport default connect(mapStateToProps)(MetaDataComponent);","import React, { Component, Fragment } from 'react';\nimport styled from 'styled-components';\nimport { PEER_MESSAGE_TYPE } from '../../schema';\nimport { requestDownloadFile } from '../../utils/localApi';\nimport { messageCell, rippleEffect } from '../SharedStyle';\nimport {\n  TabContentWidth,\n  TabSmallWidth,\n  TabSmall2Width,\n  mobileWidth,\n} from '../../constants/styleConstants';\nimport { getMyUUID } from '../../utils/localApi';\nimport { getSizeString } from '../../utils/commonUtil';\n\nconst MessageItem = styled.div`\n  display: flex;\n  width: 100%;\n  height: 40px;\n  font-size: 18px;\n  border: solid 1px ${ props => props.theme.Contrast };\n  border-style: solid none solid none;\n  box-sizing: border-box;\n  color: ${ props => props.theme.StringsColor };\n\n  @media (max-width: ${ mobileWidth }) {\n    border: none;\n  }\n\n`;\n\nconst MessageCell = styled.div`\n  ${ messageCell }\n  height: auto;\n  border-style: none solid none none;\n  font-size: 14px;\n\n  @media (max-width: ${ mobileWidth }) {\n    border-style: none solid solid none;\n  }\n`;\n\nconst MessageInOutCell = styled(MessageCell)`\n  color: ${ props =>\n    props.isMyMessagePacket\n    ? props => props.theme.ParametersColor\n    : props => props.theme.OperatorsColor };\n`;\n\n\nconst MessageContentCellContainer = styled.div`\n  ${ messageCell }\n  justify-content: flex-start;\n  border-style: none solid none none;\n  height: auto;\n  width: auto;\n  max-width: none;\n  flex-grow: 1;\n\n  @media (max-width: ${ mobileWidth }) {\n    border: solid 1px ${ props => props.theme.Border };\n    border-style: none solid solid none;\n  }\n`;\n\nconst MessageContentCell = styled.span`\n  display: block;\n  height: auto;\n  border-style: none;\n  text-align: left;\n  font-size: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n\n  a {\n    color: ${ props => props.theme.LinksColor };\n  }\n`;\n\nconst MessageButtonContainer = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  width: 100px;\n  min-width: 100px;\n  padding: 0 10px;\n\n  @media (max-width: ${ mobileWidth }) {\n    border: solid 1px ${ props => props.theme.Border };\n    border-style: none solid solid none;\n  }\n`;\n\nconst MessageButtonCell = styled.button`\n  width: 80px;\n  height: 30px;\n  margin: 0 3px;\n  padding: 0;\n  outline: none;\n  font-size: 14px;\n\n  background-color: ${ props => props.theme.Buttons };\n  color: ${ props => props.theme.AttributesColor };\n  border: 2px solid ${ props => props.theme.Border };\n  border-radius: 4px;\n\n  ${ rippleEffect };\n`;\n\nclass MessageItemComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onDownloadOrCopy = this.onDownloadOrCopy.bind(this);\n    this.isMyMessagePacket = this.isMyMessagePacket.bind(this);\n  }\n\n  onDownloadOrCopy() {\n    const { messagePacket } = this.props;\n    const { source, type, data } = messagePacket;\n\n    if (type === PEER_MESSAGE_TYPE.TEXT) {\n      const { message } = data;\n\n      navigator.clipboard.writeText(message).then(function() {\n        // TODO: notify user that copy to clip succeed\n      }, function() {\n        // TODO: notify user that copy to clip failed\n      });\n\n      return;\n    }\n\n    if (type === PEER_MESSAGE_TYPE.FILE) {\n      // request download\n      requestDownloadFile(source, data);\n      return;\n    }\n\n    if (type === PEER_MESSAGE_TYPE.ERROR) {\n      // TODO: ???? do same as text type?..\n    }\n  }\n\n  isMyMessagePacket(source) {\n    console.log('isMyMessagePacket, source is ', source);\n    console.log('isMyMessagePacket, getMyUUID() is ', getMyUUID());\n\n    return source === getMyUUID();\n  }\n\n  isStartWithHttp(message) {\n    return message.startsWith('http');\n  }\n\n  renderContent(messageType, data) {\n    if (messageType === PEER_MESSAGE_TYPE.TEXT) {\n      return (\n        <Fragment>\n          <MessageContentCellContainer width={ TabContentWidth }>\n            {\n              this.isStartWithHttp(data.message)\n              ? <MessageContentCell>\n                  <a href={ data.message } target='_blank' rel='noopener noreferrer'>\n                    { `${ data.message }` }\n                  </a>\n                </MessageContentCell>\n              : <MessageContentCell>{ `${ data.message }` }</MessageContentCell>\n            }\n          </MessageContentCellContainer>\n          <MessageCell padding={ '0' }>{ `${ data.size }` }</MessageCell>\n        </Fragment>\n      );\n    }\n\n    if (messageType === PEER_MESSAGE_TYPE.FILE) {\n      const sizeString =  getSizeString(data.size);\n\n      return (\n        <Fragment>\n          <MessageContentCellContainer width={ TabContentWidth }>\n            <MessageContentCell>{ `${ data.message }` }</MessageContentCell>\n          </MessageContentCellContainer>\n          <MessageCell padding={ '0' }>{ sizeString }</MessageCell>\n        </Fragment>\n      );\n    }\n\n    return;\n  }\n\n  renderButton(messageType, source) {\n    if (messageType === PEER_MESSAGE_TYPE.TEXT) {\n      return (\n        <MessageButtonCell onClick={ this.onDownloadOrCopy }>\n          Copy\n        </MessageButtonCell>\n      )\n    }\n\n    if (messageType === PEER_MESSAGE_TYPE.FILE && !this.isMyMessagePacket(source)) {\n      return (\n        <MessageButtonCell onClick={ this.onDownloadOrCopy }>\n          Download\n        </MessageButtonCell>\n      )\n    }\n\n    return;\n  }\n\n  renderMessagePacket(messagePacket) {\n    if (!messagePacket) {\n      return;\n    }\n\n    const {\n      source,\n      destination,\n      type,\n      data,\n      time,\n      progress,\n    } = messagePacket;\n\n    const isMyMessagePacket = this.isMyMessagePacket(source);\n\n    return (\n      <Fragment>\n        <MessageInOutCell\n          width={ TabSmall2Width } padding={ '0' }\n          isMyMessagePacket={ isMyMessagePacket }>\n          { `${ isMyMessagePacket ? '⇇' : '⇉' }` }\n        </MessageInOutCell>\n        <MessageCell padding={ '0' }>{ `#${ source }` }</MessageCell>\n        <MessageCell padding={ '0' }>{ `#${ destination }` }</MessageCell>\n        <MessageCell width={ TabSmallWidth }>{ `${ type }` }</MessageCell>\n        { this.renderContent(type, data) }\n        <MessageCell width={ TabSmallWidth }>{ `${ time }` }</MessageCell>\n        { false && <MessageCell>{ `${ progress }` }</MessageCell> }\n        <MessageButtonContainer>\n          { this.renderButton(type, source) }\n        </MessageButtonContainer>\n        { false && <MessageButtonCell>+</MessageButtonCell> }\n        { false && <MessageButtonCell>Delete</MessageButtonCell> }\n      </Fragment>\n    );\n  }\n\n  render() {\n    const { messagePacket } = this.props;\n\n    return (\n      <MessageItem className='localdrop-message-item'>\n        { this.renderMessagePacket(messagePacket) }\n      </MessageItem>\n    )\n  }\n}\n\nexport default MessageItemComponent;\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\n\nconst SystemMessageItem = styled.div`\n  display:flex;\n  align-items: center;\n  min-height: 30px;\n  border-bottom: solid 1px ${ props => props.theme.Contrast };\n  color: white;\n\n  span {\n    min-width: 125px;\n    color: ${ props => props.theme.TagsColor };\n    margin: 0 10px 0 10px;\n    font-size: 14px;\n  }\n\n  pre {\n    white-space: pre-wrap;\n    margin-right: 5px;\n    color: ${ props => props.theme.StringsColor };\n  }\n\n`;\n\nexport default class SystemMessageItemComponent extends Component {\n  render() {\n    const { systemMessage } = this.props;\n\n    return (\n      <SystemMessageItem>\n        <span>[System] { `${ systemMessage.createdAt }:` }</span>\n        <pre>\n          { systemMessage.message }\n        </pre>\n      </SystemMessageItem>\n    )\n  }\n}","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport MessageItemComponent from './MessageItemComponent';\nimport SystemMessageItemComponent from './SystemMessageItemComponent';\nimport { mobileWidth } from '../../constants/styleConstants';\n\nconst MessageTable = styled.div`\n  width: 100%;\n  height: calc(100% - 294px);\n`;\n\nconst MessageItemContainer = styled.div`\n  display: ${ props => props.isSelected ? 'block' : 'none' };\n  min-height: 100px;\n  height: 100%;\n  background: ${ props => props.theme.SecondBackground };\n  overflow-y: scroll;\n\n  @media (max-width: ${ mobileWidth }) {\n    height: auto;\n    min-height: 300px;\n  }\n`;\n\n\nclass MessageTableComponent extends Component {\n  render() {\n    const {\n      messagePackets,\n      systemMessages,\n      systemMessageMetaData,\n    } = this.props;\n\n    return (\n      <MessageTable className='localdrop-message-table'>\n        {\n          <MessageItemContainer\n            className='localdrop-message-item-container'\n            isSelected={ !systemMessageMetaData.isSelected }>\n            {\n              messagePackets.map(messagePacket => {\n                const { data } = messagePacket;\n\n                return (\n                  <MessageItemComponent\n                    key={ data.fingerprint }\n                    messagePacket={ messagePacket } />\n                )\n              })\n            }\n          </MessageItemContainer>\n        }\n        {\n          <MessageItemContainer\n            isSelected={ systemMessageMetaData.isSelected }>\n            {\n              systemMessages.map(systemMessage => {\n\n              return (\n                <SystemMessageItemComponent\n                  key={ systemMessage.fingerprint }\n                  systemMessage={ systemMessage } />\n                )\n              })\n            }\n          </MessageItemContainer>\n        }\n      </MessageTable>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  messagePackets: state.messagePackets,\n  systemMessages: state.systemMessages,\n  systemMessageMetaData: state.systemMessageMetaData,\n});\nexport default connect(mapStateToProps)(MessageTableComponent);\n","import React, { Component, Fragment } from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport { messageCell } from '../SharedStyle';\nimport {\n  TabSmallWidth,\n  TabSmall2Width,\n} from '../../constants/styleConstants';\n\nconst MessageTableHeader = styled.div`\n  display: flex;\n  justify-content: flex-start;\n  border: solid 2px ${ props => props.theme.Border };\n  border-style: solid none;\n  background: ${ props => props.theme.Highlight };\n  color: ${ props => props.theme.AttributesColor };\n\n  overflow-x: scroll;\n\n  /* hide scrollbar */\n  scrollbar-width: none; /* Firefox */\n  ::-webkit-scrollbar { /* WebKit */\n    width: 0;\n    height: 0;\n  }\n`;\n\nconst HeaderItem = styled.div`\n  ${ messageCell }\n  border-style: none solid none none;\n`;\n\nconst HeaderContentItem = styled.div`\n  ${ messageCell }\n  border-style: none solid none none;\n  width: auto;\n  max-width: none;\n  flex-grow: 1;\n`;\n\nconst HeaderDownloadSpace = styled.div`\n  min-width: 100px;\n  width: 100px;\n  padding: 0 10px;\n`;\n\nclass MessageTableHeaderComponent extends Component {\n  render() {\n    const { systemMessageMetaData } = this.props;\n\n    return (\n      <Fragment>\n        {\n          !systemMessageMetaData.isSelected &&\n          <MessageTableHeader className='localdrop-message-table-header'>\n            <HeaderItem\n              width={ TabSmall2Width }\n              padding={ '0' }>\n                ⇄\n            </HeaderItem>\n            <HeaderItem padding={ '0' }>Source</HeaderItem>\n            <HeaderItem padding={ '0' }>Destination</HeaderItem>\n            { false && <HeaderItem>NO.</HeaderItem> }\n            <HeaderItem width={ TabSmallWidth }>TYPE</HeaderItem>\n            <HeaderContentItem>Content</HeaderContentItem>\n            <HeaderItem padding={ '0' }>SIZE</HeaderItem>\n            <HeaderItem width={ TabSmallWidth }>Time</HeaderItem>\n            <HeaderDownloadSpace/>\n            { false && <HeaderItem>Progress</HeaderItem> }\n          </MessageTableHeader>\n        }\n      </Fragment>\n    );\n  }\n}\n\n\nconst mapStateToProps = state => ({\n  systemMessageMetaData: state.systemMessageMetaData,\n});\n\nexport default connect(mapStateToProps)(MessageTableHeaderComponent);\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { ReactComponent as GithubLogo } from '../assets/github-logo.svg';\nimport { mobileWidth } from '../constants/styleConstants';\nimport { LOCALDROP_APP_VERSION } from '../constants/constant';\n\n\nconst Footer = styled.div`\n  display: flex;\n  height: 40px;\n  color: ${ props => props.theme.StringsColor };\n  background: ${ props => props.theme.Background };\n\n  div {\n    display: flex;\n    align-items: center;\n    text-align: left;\n    font-size: 14px;\n    margin: 2px 20px 2px 20px;\n    cursor: pointer;\n\n    svg {\n      width: 20px;\n      height: 20px;\n      margin-right: 6px;\n      fill: ${ props => props.theme.SecondText };\n    }\n  }\n\n  .localdrop-app-version {\n    margin-left: auto;\n  }\n\n  @media (max-width: ${ mobileWidth }) {\n    display: none;\n  }\n`;\n\n\nexport default class FooterComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onClickId = this.onClickId.bind(this);\n    this.onClickRepo = this.onClickRepo.bind(this);\n  }\n\n  onClickId() {\n    window.open('https://github.com/24seconds/', '_blank');\n  }\n\n  onClickRepo() {\n    window.open('https://github.com/24seconds/localdrop', '_blank');\n  }\n\n  render() {\n    return (\n      <Footer className='localdrop-footer'>\n        <div onClick={ this.onClickId }>\n          <GithubLogo/>\n          24seconds\n        </div>\n        <div onClick={ this.onClickRepo }>\n          <GithubLogo/>\n          repo : localdrop\n        </div>\n        <div className='localdrop-app-version'>\n          { `version: ${ LOCALDROP_APP_VERSION }` }\n        </div>\n      </Footer>\n    );\n  }\n}","class FingerprintedFile {\n  constructor({ file, fingerprint }) {\n    this.file = file;\n    this.fingerprint = fingerprint;\n  }\n}\n\nexport default FingerprintedFile;","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport {\n  connectToPeer,\n  sendTextToPeer,\n  sendFilesToPeer,\n  writeSystemMessage,\n} from '../../utils/localApi';\nimport { addFiles } from '../../redux/action';\nimport { generateFingerPrint } from '../../utils/commonUtil';\nimport FingerprintedFile from '../../utils/dataSchema/FingerprintedFile';\nimport { mobileWidth } from '../../constants/styleConstants';\nimport { rippleEffect } from '../SharedStyle';\n\nconst Send = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  max-height: 180px;\n  height: 70px;\n  margin-top: 5px;\n  background-color: ${ props => props.theme.SecondBackground };\n\n  textarea {\n    background-color: ${ props => props.theme.SecondBackground };\n    color: ${ props => props.theme.SecondText  };\n    resize: none;\n    flex-grow: 1;\n    padding: 10px 5px;\n    min-height: 40px;\n    max-height: 120px;\n    outline: none;\n    border: 2px solid ${ props => props.theme.Border };\n    border-radius: 4px;\n  }\n\n  @media (max-width: ${ mobileWidth }) {\n    height: 75px;\n  }\n`;\n\nconst FileInput = styled.input`\n  display: none;\n`;\n\nconst SelectFileButton = styled.button`\n  width: 50px;\n  height: 50px;\n  border: 1px solid ${ props => props.theme.Border };\n  border-radius: 4px;\n  margin: 0 5px;\n  background-color: ${ props => props.theme.Buttons };\n  outline: none;\n\n  color: ${ props => props.theme.ParametersColor };\n  font-size: 16px;\n  font-weight: 800;\n  ${ rippleEffect };\n\n  @media (max-width: ${ mobileWidth }) {\n    width: 40px;\n    height: 40px;\n  }\n`;\n\nconst SendPasteButton = styled.button`\n  width: 50px;\n  outline: none;\n  background-color: ${ props => props.theme.Buttons };\n  color: ${ props => props.theme.AttributesColor };\n  border: 2px solid ${ props => props.theme.Border };\n  border-radius: 4px;\n  padding: 0;\n  margin: 0 3px;\n  height: 50px;\n\n  ${ rippleEffect };\n`;\n\nconst SendButton = styled(SendPasteButton)`\n  margin: 0 5px 0 3px;\n\n  @media (max-width: ${ mobileWidth }) {\n    margin: 0 5px 0 0;\n  }\n`;\n\nclass SendComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      text: '',\n      files: [],\n    }\n\n    this.handleText = this.handleText.bind(this);\n    this.onSend = this.sendText.bind(this);\n    this.handleFiles = this.handleFiles.bind(this);\n    this.onClickFile = this.onClickFile.bind(this);\n    this.onPasteText = this.onPasteText.bind(this);\n\n    this.fileInputRef = null;\n    this.textareaRef = null;\n  }\n\n  getPlaceholder() {\n    const { peerUUID } = this.props;\n\n    if (peerUUID) {\n      return `Send Message to #${peerUUID}...`;\n    } else {\n      return `Select peer to send Message!`;\n    }\n  }\n\n  handleFiles(event) {\n    const { peerUUID } = this.props;\n    // 그럼 여기서 packet을 보내야한다는 거네?\n\n    console.log('handleFiles called, peerUUID is ', peerUUID);\n\n    if (peerUUID) {\n      const files = event.target.files;\n\n      if (files.length === 0) {\n        console.log('no files are selected');\n        return;\n      }\n\n      const fingerprintedFiles = [];\n      for (let i = 0; i < files.length; i ++) {\n        fingerprintedFiles.push(\n          new FingerprintedFile({\n            file: files.item(i),\n            fingerprint: generateFingerPrint()\n          }));\n      }\n\n      console.log('handleFiles, files are ', files);\n\n      this.props.dispatch(addFiles(fingerprintedFiles));\n\n      sendFilesToPeer(peerUUID, fingerprintedFiles);\n    } else {\n      writeSystemMessage('peerUUID is null! Select peer to transfer files!');\n    }\n  }\n\n  handleText(event) {\n    this.setState({ text: event.target.value });\n  }\n\n  sendText() {\n    const { peerUUID } = this.props;\n    const { text } = this.state;\n\n    console.log('sendText is called, text is ', text);\n\n    if (text.length === 0) {\n      return;\n    }\n\n    if (peerUUID) {\n      sendTextToPeer(peerUUID, text);\n      // connectToPeer(uuid);\n      this.setState({ text: '' });\n      if (this.textareaRef) {\n        this.textareaRef.focus();\n      }\n    } else {\n      writeSystemMessage('peerUUID is null! Select peer to send text!');\n    }\n  }\n\n  onClickFile() {\n    this.fileInputRef && this.fileInputRef.click()\n  }\n\n  async onPasteText() {\n    const text = await navigator.clipboard.readText();\n\n    this.setState({\n      text\n    });\n  }\n\n  render() {\n    const { text } = this.state;\n\n    return (\n      <Send>\n        <FileInput\n          type='file'\n          ref={ (ref) => this.fileInputRef = ref }\n          multiple={ true }\n          onClick={ () => { this.fileInputRef.value = null } }\n          onChange={ this.handleFiles }/>\n        <SelectFileButton onClick={ this.onClickFile }> + </SelectFileButton>\n        <textarea\n          autoCorrect={ 'off' }\n          autoCapitalize={ 'off' }\n          spellCheck={ false }\n          ref={ (ref) => this.textareaRef = ref }\n          value={ text } onChange={ this.handleText }\n          placeholder={ this.getPlaceholder() } />\n        <SendPasteButton onClick={ this.onPasteText }>\n          paste\n        </SendPasteButton>\n        <SendButton onClick={ this.onSend } >\n          send\n        </SendButton>\n      </Send>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  myUUID: state.myUUID,\n  peerUUID: state.peerUUID,\n});\nexport default connect(mapStateToProps)(SendComponent);\n","import React, { Component, Fragment } from 'react';\nimport styled, { createGlobalStyle, ThemeProvider } from 'styled-components';\nimport './utils/localApi';\nimport './utils/window';\nimport HeaderComponent from './components/HeaderComponent';\nimport PeerTabComponent from './components/Message/PeerTabComponent';\nimport MetaDataComponent from './components/MetaData/MetaDataComponent';\nimport MessageTableComponent from './components/Message/MessageTableComponent';\nimport MessageTableHeaderComponent from './components/Message/MessageTableHeaderComponent';\nimport FooterComponent from './components/FooterComponent';\nimport SendComponent from './components/Send/SendComponent';\nimport { mobileWidth, ColorThemes } from './constants/styleConstants';\n\nconst GlobalStyle = createGlobalStyle`\n  html, body {\n    background-color: ${ props => props.theme.SecondBackground };\n  }\n`;\n\nconst LocalDropApp = styled.div`\n  height: calc(100% - 110px);\n  padding: 50px 100px;\n\n  @media (max-width: ${ mobileWidth }) {\n    padding: 0;\n  }\n`;\n\nconst Container = styled.div`\n  border: solid 2px ${ props => props.theme.Contrast };\n  border-radius: 5px;\n  height: 100%;\n\n  @media (max-width: ${ mobileWidth }) {\n    margin: 0;\n    border: none;\n  }\n`;\n\nconst MobileSticky = styled.div`\n  background-color: ${ props => props.theme.SecondBackground };\n\n  @media (max-width: ${ mobileWidth }) {\n    position: sticky;\n    top: 0;\n  }\n`\n\nclass App extends Component {\n  STORAGE_COLOR_THEME_KEY = 'STORAGE_COLOR_THEME_KEY';\n  themeIndex = 0;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      colorTheme: ColorThemes[this.getStorageColorTheme() || 'MaterialThemeOceanic'],\n    }\n\n    this.onChangeTheme = this.onChangeTheme.bind(this);\n  }\n\n  getStorageColorTheme() {\n    return window.localStorage.getItem(this.STORAGE_COLOR_THEME_KEY);\n  }\n\n  setStorageColorTheme(value) {\n    window.localStorage.setItem(this.STORAGE_COLOR_THEME_KEY, value);\n  }\n\n  getNextKey(keys) {\n    const nextKey = keys[this.themeIndex];\n    this.themeIndex = (this.themeIndex + 1) % keys.length;\n\n    if (nextKey === localStorage.getItem(this.STORAGE_COLOR_THEME_KEY)) {\n      return this.getNextKey(keys);\n    } else {\n      return nextKey;\n    }\n  }\n\n  onChangeTheme() {\n    console.log('onChangeTheme called');\n\n    const keys = Object.keys(ColorThemes);\n    const nextKey = this.getNextKey(keys);\n    this.setStorageColorTheme(nextKey);\n\n    console.log('randomKey is ', nextKey);\n\n    this.setState({\n      colorTheme: ColorThemes[nextKey],\n    });\n  }\n\n  render() {\n    const { colorTheme } = this.state;\n\n    console.log('colorTheme is ', colorTheme);\n\n    return (\n      <ThemeProvider theme={ colorTheme }>\n        <GlobalStyle />\n        <LocalDropApp className=\"App\">\n          <Container className='localdrop-app-container'>\n            <MobileSticky>\n              <HeaderComponent />\n              <SendComponent />\n              <MetaDataComponent onChangeTheme={ this.onChangeTheme } />\n              <PeerTabComponent />\n              <MessageTableHeaderComponent />\n            </MobileSticky>\n            <MessageTableComponent />\n            <FooterComponent />\n          </Container>\n        </LocalDropApp>\n      </ThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' || 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.REACT_APP_PUBLIC_URL, window.location.href);\n\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.REACT_APP_PUBLIC_URL}/service-worker.js`;\n\n      if (!isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={ store } >\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}